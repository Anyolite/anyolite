{"repository_name":"anyolite","body":"# Anyolite\n\nAnyolite is a Crystal shard which adds a fully functional mruby interpreter to Crystal.\n\n![Test](https://github.com/Anyolite/anyolite/workflows/Test/badge.svg)\n\n![Release](https://img.shields.io/github/v/release/Anyolite/anyolite)\n![ReleaseDate](https://img.shields.io/github/release-date/Anyolite/anyolite)\n\n![License](https://img.shields.io/github/license/Anyolite/anyolite)\n\n# Description\n\nAnyolite allows for wrapping Crystal classes and functions into mruby with little effort.\nThis way, mruby can be used as a scripting language to Crystal projects, with the major advantage of a similar syntax.\n\nThis project is currently in the early development phase, so please report any bugs or missing relevant features.\n\n# Features\n\n* Bindings to an mruby interpreter\n* Wrapping of nearly arbitrary Crystal classes and methods to mruby\n* Easy syntax without unnecessary bolderplate code\n* Support for keyword arguments and default values\n* Simple system to prevent garbage collector conflicts\n\n# Prerequisites\n\nYou need to have the following programs installed (and in your PATH variable, if you are on Windows):\n* Ruby (for building mruby)\n* Rake (for building the whole project)\n* Bison (for building mruby)\n* Git (for downloading mruby)\n* GCC or Microsoft Visual Studio 19 (for building the object files required for Anyolite, depending on your OS)\n\n# Installing\n\nPut this shard as a requirement into your shard.yml project file and then call\n```bash\nshards install\n```\nfrom a terminal or the MSVC Developer Console (on Windows).\n\nAlternatively, you can clone this repository into the lib folder of your project and run\n```bash\nrake build_shard\n```\nmanually to install the shard without using the crystal shards program.\n\nIf you want to use other options for Anyolite, you can set `ANYOLITE_CONFIG_PATH` to the filename of a JSON config file,\nwhich allows for changing multiple options when installing the shard. Possible options are:\n\n* `ANYOLITE_BUILDPATH` - The relative directory in which Anyolite will be built\n* `ANYOLITE_MRUBY_FORK` - The web address of the mruby repository\n* `ANYOLITE_MRUBY_DIR` - The relative directory mruby will be installed in\n* `ANYOLITE_MRUBY_CONFIG_PATH` - The config file which is used for building mruby\n* `ANYOLITE_COMPILER` - The C compiler used for building Anyolite\n\n# How to use\n\nImagine a Crystal class for a really bad RPG:\n\n```crystal\nmodule TestModule\n  class Entity\n    property hp : Int32 = 0\n\n    def initialize(@hp)\n    end\n\n    def damage(diff : Int32)\n      @hp -= diff\n    end\n\n    def yell(sound : String, loud : Bool = false)\n      if loud\n        puts \"Entity yelled: #{sound.upcase}\"\n      else\n        puts \"Entity yelled: #{sound}\"\n      end\n    end\n\n    def absorb_hp_from(other : Entity)\n      @hp += other.hp\n      other.hp = 0\n    end\n  end\nend\n```\n\nNow, you want to wrap this class in Ruby. All you need to do is to execute the following code in Crystal:\n\n```crystal\nrequire \"anyolite\"\n\nMrbState.create do |mrb|\n  test_module = MrbModule.new(mrb, \"TestModule\")\n\n  MrbWrap.wrap_class(mrb, Entity, \"Entity\", under: test_module)\n\n  MrbWrap.wrap_constructor_with_keywords(mrb, Entity, {:hp => {Int32, 0}})\n\n  MrbWrap.wrap_property(mrb, Entity, \"hp\", hp, Int32)\n\n  MrbWrap.wrap_instance_method_with_keywords(mrb, Entity, \"damage\", damage, {:diff => Int32})\n\n  MrbWrap.wrap_instance_method_with_keywords(mrb, Entity, \"yell\", yell, {:sound => String, :loud => {Bool, false}})\n\n  MrbWrap.wrap_instance_method_with_keywords(mrb, Entity, \"absorb_hp_from\", absorb_hp_from, {:other => Entity})\n\n  mrb.load_script_from_file(\"examples/hp_example.rb\")\nend\n```\n\nThe last line in the block calls the following example script:\n\n```ruby\na = TestModule::Entity.new(20)\na.damage(diff: 13)\nputs a.hp\n\nb = TestModule::Entity.new(10)\na.absorb_hp_from(other: b)\nputs a.hp\nputs b.hp\nb.yell(sound: 'Ouch, you stole my HP!', loud: true)\na.yell(sound: 'Well, take better care of your public attributes!')\n```\n\nThe syntax stays mostly the same as in Crystal, except for the keyword arguments.\nThese might be added in the future, but technically you can always wrap the generated methods in pure Ruby methods with keywords.\n\nThe example above gives a good overview over the things you can already do with Anyolite.\nMore features will be added in the future.\n\n# Limitations\n\n* Currently, Anyolite does not work on Windows due to Crystal compiler bugs\n* Returning objects of a wrapped class does only work if every constructor argument is optional\n* Arrays, hashes and other complex mruby objects are not directly supported\n* Configuration options for mruby are relatively limited (yet)\n* Default values for unnamed function arguments are limited to integers and floats\n* Optional keyword arguments need a default value (can be a different one than the Crystal value, though)\n* Keywords will always be given to functions, even if optional (then with default values)\n* Splat arguments and arbitrary keywords are not possible due to compiletime symbols in Crystal\n* Only one type per argument is allowed\n\n# Why this name?\n\nhttps://en.wikipedia.org/wiki/Anyolite\n\nIn short, it is a rare variant of the crystalline mineral called zoisite, with a ruby and crystal shards (of pargasite) embedded.\n\nThe term 'anyoli' means 'green' in the Maasai language, thus naming 'anyolite'.\n\n# Roadmap\n\n## Releases\n\n### Version 0.2.0\n\n#### Major features\n\n* Keyword argument support\n* Support for optional keywords\n\n#### Minor features\n\n* Casting from MrbValue objects to closest Crystal values\n* Option to use a JSON config file\n\n#### Breaking changes\n\n* Optional arguments are passed using tuples instead of `MrbWrap::Opt`\n\n#### Safety\n\n* Class checks for arguments\n* Checks for correct keyword classes\n* Module cache analogous to the class cache\n\n#### Usability\n\n* Simplified some macro functions considerably\n* Arguments can be specified consistently as arrays or standalone\n* Documentation builds only for releases\n* Uniform system for passing optional arguments\n* Updated examples and documentation for keyword support\n\n#### Bugfixes\n\n* Fixed erros when naming MrbState instances anything other than 'mrb'\n\n### Version 0.1.1\n\n#### Safety\n\n* Added safeguards for reference table access\n\n#### Bugfixes\n\n* Fixed mruby function return values not being cached\n* Fixed minor documentation errors\n\n### Version 0.1.0\n\n#### Major features\n\n* Basic structure\n* Ubuntu support\n* Wrappers for classes\n* Wrappers for modules\n* Support for classes in modules\n* Wrappers for properties\n* Wrappers for instance methods\n* Wrappers for module and class methods\n* Wrappers for constants\n* Optional values for simple argument types\n* Crystal GC respects the mruby GC\n* Hooks for mruby object creation and deletion\n* Simple examples\n* Build tests\n* Basic documentation\n\n## Upcoming releases\n\nCurrently none planned\n\n### Future updates\n\n* [ ] Windows support (currently not supported due to problems with Crystal)\n* [ ] Mac support (might be possible, not tested yet)\n* [ ] Compiletime errors for macros\n* [ ] Support for more flexible mruby configuration options\n* [ ] Arrays as arguments and return values\n* [ ] MrbClass/MrbModule and Class can be both used as arguments\n* [ ] More stable type casting\n\n### Possible future updates\n\n* [ ] Other types (Hashes, ...) as arguments and return values\n* [ ] Option for passing mruby splat arguments as an array\n* [ ] Support for arbitrary keyword arguments as hashes\n* [ ] More variety for default parameters for unnamed options\n* [ ] Method in mruby to determine owner of object (if possible)\n","program":{"html_id":"anyolite/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"anyolite","program":true,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"anyolite/MrbCast","path":"MrbCast.html","kind":"module","full_name":"MrbCast","name":"MrbCast","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"src/MrbCast.cr","line_number":2,"url":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbCast.cr#L2"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":"Module for specific casts of Crystal values into mruby values","summary":"<p>Module for specific casts of Crystal values into mruby values</p>","class_methods":[{"id":"cast_to_bool(mrb:Pointer(MrbInternal::MrbState),value:MrbInternal::MrbValue)-class-method","html_id":"cast_to_bool(mrb:Pointer(MrbInternal::MrbState),value:MrbInternal::MrbValue)-class-method","name":"cast_to_bool","doc":null,"summary":null,"abstract":false,"args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":"::Pointer(MrbInternal::MrbState)"},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"MrbInternal::MrbValue"}],"args_string":"(mrb : Pointer(MrbInternal::MrbState), value : MrbInternal::MrbValue)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbCast.cr#L69","def":{"name":"cast_to_bool","args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":"::Pointer(MrbInternal::MrbState)"},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"MrbInternal::MrbValue"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if value.tt == MrbInternal::MrbVType::MRB_TT_TRUE\n  true\nelse\n  if (value.tt == MrbInternal::MrbVType::MRB_TT_FALSE) && (value.value.value_int != 0)\n    false\n  else\n    raise(\"ERROR: Wrong arg\")\n  end\nend"}},{"id":"cast_to_float(mrb:Pointer(MrbInternal::MrbState),value:MrbInternal::MrbValue)-class-method","html_id":"cast_to_float(mrb:Pointer(MrbInternal::MrbState),value:MrbInternal::MrbValue)-class-method","name":"cast_to_float","doc":null,"summary":null,"abstract":false,"args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":"::Pointer(MrbInternal::MrbState)"},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"MrbInternal::MrbValue"}],"args_string":"(mrb : Pointer(MrbInternal::MrbState), value : MrbInternal::MrbValue)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbCast.cr#L87","def":{"name":"cast_to_float","args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":"::Pointer(MrbInternal::MrbState)"},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"MrbInternal::MrbValue"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if value.tt == MrbInternal::MrbVType::MRB_TT_FLOAT\n  value.value.value_float\nelse\n  raise(\"ERROR: Wrong arg\")\nend"}},{"id":"cast_to_int(mrb:Pointer(MrbInternal::MrbState),value:MrbInternal::MrbValue)-class-method","html_id":"cast_to_int(mrb:Pointer(MrbInternal::MrbState),value:MrbInternal::MrbValue)-class-method","name":"cast_to_int","doc":null,"summary":null,"abstract":false,"args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":"::Pointer(MrbInternal::MrbState)"},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"MrbInternal::MrbValue"}],"args_string":"(mrb : Pointer(MrbInternal::MrbState), value : MrbInternal::MrbValue)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbCast.cr#L79","def":{"name":"cast_to_int","args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":"::Pointer(MrbInternal::MrbState)"},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"MrbInternal::MrbValue"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if value.tt == MrbInternal::MrbVType::MRB_TT_FIXNUM\n  value.value.value_int\nelse\n  raise(\"ERROR: Wrong arg\")\nend"}},{"id":"cast_to_string(mrb:Pointer(MrbInternal::MrbState),value:MrbInternal::MrbValue)-class-method","html_id":"cast_to_string(mrb:Pointer(MrbInternal::MrbState),value:MrbInternal::MrbValue)-class-method","name":"cast_to_string","doc":null,"summary":null,"abstract":false,"args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":"::Pointer(MrbInternal::MrbState)"},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"MrbInternal::MrbValue"}],"args_string":"(mrb : Pointer(MrbInternal::MrbState), value : MrbInternal::MrbValue)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbCast.cr#L95","def":{"name":"cast_to_string","args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":"::Pointer(MrbInternal::MrbState)"},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"MrbInternal::MrbValue"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if value.tt == MrbInternal::MrbVType::MRB_TT_STRING\n  String.new(MrbInternal.mrb_str_to_cstr(mrb, value))\nelse\n  raise(\"ERROR: Wrong arg\")\nend"}},{"id":"interpret_ruby_value(mrb:Pointer(MrbInternal::MrbState),value:MrbInternal::MrbValue)-class-method","html_id":"interpret_ruby_value(mrb:Pointer(MrbInternal::MrbState),value:MrbInternal::MrbValue)-class-method","name":"interpret_ruby_value","doc":null,"summary":null,"abstract":false,"args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":"::Pointer(MrbInternal::MrbState)"},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"MrbInternal::MrbValue"}],"args_string":"(mrb : Pointer(MrbInternal::MrbState), value : MrbInternal::MrbValue)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbCast.cr#L109","def":{"name":"interpret_ruby_value","args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":"::Pointer(MrbInternal::MrbState)"},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"MrbInternal::MrbValue"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"case value.tt\nwhen MrbInternal::MrbVType::MRB_TT_UNDEF\n  MrbWrap::Undef\nwhen MrbInternal::MrbVType::MRB_TT_TRUE\n  true\nwhen MrbInternal::MrbVType::MRB_TT_FALSE\n(  value.value.value_int != 0 ? false : nil)\nwhen MrbInternal::MrbVType::MRB_TT_FIXNUM\n  MrbCast.cast_to_int(mrb, value)\nwhen MrbInternal::MrbVType::MRB_TT_FLOAT\n  MrbCast.cast_to_float(mrb, value)\nwhen MrbInternal::MrbVType::MRB_TT_STRING\n  MrbCast.cast_to_string(mrb, value)\nelse\n  raise(\"MrbValue #{value} with #{value.tt} is not supported\")\nend"}},{"id":"is_undef?(value:MrbInternal::MrbValue)-class-method","html_id":"is_undef?(value:MrbInternal::MrbValue)-class-method","name":"is_undef?","doc":null,"summary":null,"abstract":false,"args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"MrbInternal::MrbValue"}],"args_string":"(value : MrbInternal::MrbValue)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbCast.cr#L103","def":{"name":"is_undef?","args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"MrbInternal::MrbValue"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"value.tt == MrbInternal::MrbVType::MRB_TT_UNDEF"}},{"id":"return_bool(value)-class-method","html_id":"return_bool(value)-class-method","name":"return_bool","doc":null,"summary":null,"abstract":false,"args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":""}],"args_string":"(value)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbCast.cr#L21","def":{"name":"return_bool","args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"return MrbInternal.get_bool_value(value ? 1 : 0)"}},{"id":"return_false-class-method","html_id":"return_false-class-method","name":"return_false","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbCast.cr#L13","def":{"name":"return_false","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"return MrbInternal.get_false_value"}},{"id":"return_fixnum(value)-class-method","html_id":"return_fixnum(value)-class-method","name":"return_fixnum","doc":null,"summary":null,"abstract":false,"args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":""}],"args_string":"(value)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbCast.cr#L17","def":{"name":"return_fixnum","args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"return MrbInternal.get_fixnum_value(value)"}},{"id":"return_float(mrb,value)-class-method","html_id":"return_float(mrb,value)-class-method","name":"return_float","doc":null,"summary":null,"abstract":false,"args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":""},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":""}],"args_string":"(mrb, value)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbCast.cr#L25","def":{"name":"return_float","args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":""},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"return MrbInternal.get_float_value(mrb, value)"}},{"id":"return_nil-class-method","html_id":"return_nil-class-method","name":"return_nil","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbCast.cr#L5","def":{"name":"return_nil","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"return MrbInternal.get_nil_value"}},{"id":"return_string(mrb,value)-class-method","html_id":"return_string(mrb,value)-class-method","name":"return_string","doc":null,"summary":null,"abstract":false,"args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":""},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":""}],"args_string":"(mrb, value)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbCast.cr#L29","def":{"name":"return_string","args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":""},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"return MrbInternal.get_string_value(mrb, value)"}},{"id":"return_true-class-method","html_id":"return_true-class-method","name":"return_true","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbCast.cr#L9","def":{"name":"return_true","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"return MrbInternal.get_true_value"}},{"id":"return_value(mrb:Pointer(MrbInternal::MrbState),value:Float)-class-method","html_id":"return_value(mrb:Pointer(MrbInternal::MrbState),value:Float)-class-method","name":"return_value","doc":null,"summary":null,"abstract":false,"args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":"::Pointer(MrbInternal::MrbState)"},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"Float"}],"args_string":"(mrb : Pointer(MrbInternal::MrbState), value : Float)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbCast.cr#L47","def":{"name":"return_value","args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":"::Pointer(MrbInternal::MrbState)"},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"Float"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"self.return_float(mrb, value)"}},{"id":"return_value(mrb:Pointer(MrbInternal::MrbState),value:String)-class-method","html_id":"return_value(mrb:Pointer(MrbInternal::MrbState),value:String)-class-method","name":"return_value","doc":null,"summary":null,"abstract":false,"args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":"::Pointer(MrbInternal::MrbState)"},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"String"}],"args_string":"(mrb : Pointer(MrbInternal::MrbState), value : String)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbCast.cr#L51","def":{"name":"return_value","args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":"::Pointer(MrbInternal::MrbState)"},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"self.return_string(mrb, value)"}},{"id":"return_value(mrb:Pointer(MrbInternal::MrbState),value:Object)-class-method","html_id":"return_value(mrb:Pointer(MrbInternal::MrbState),value:Object)-class-method","name":"return_value","doc":null,"summary":null,"abstract":false,"args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":"::Pointer(MrbInternal::MrbState)"},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"Object"}],"args_string":"(mrb : Pointer(MrbInternal::MrbState), value : Object)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbCast.cr#L55","def":{"name":"return_value","args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":"::Pointer(MrbInternal::MrbState)"},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"Object"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"ruby_class = MrbClassCache.get(typeof(value))\nnew_ruby_object = MrbInternal.new_empty_object(mrb, ruby_class)\n(MrbMacro.convert_from_ruby_object(mrb, new_ruby_object, typeof(value))).value = value\nMrbRefTable.add(value.object_id, (pointerof(value)).as(::Pointer(Void)))\nreturn new_ruby_object\n"}},{"id":"return_value(mrb:Pointer(MrbInternal::MrbState),value:Bool)-class-method","html_id":"return_value(mrb:Pointer(MrbInternal::MrbState),value:Bool)-class-method","name":"return_value","doc":null,"summary":null,"abstract":false,"args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":"::Pointer(MrbInternal::MrbState)"},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"Bool"}],"args_string":"(mrb : Pointer(MrbInternal::MrbState), value : Bool)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbCast.cr#L39","def":{"name":"return_value","args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":"::Pointer(MrbInternal::MrbState)"},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"Bool"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"value ? self.return_true : return_false"}},{"id":"return_value(mrb:Pointer(MrbInternal::MrbState),value:Nil)-class-method","html_id":"return_value(mrb:Pointer(MrbInternal::MrbState),value:Nil)-class-method","name":"return_value","doc":null,"summary":null,"abstract":false,"args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":"::Pointer(MrbInternal::MrbState)"},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"Nil"}],"args_string":"(mrb : Pointer(MrbInternal::MrbState), value : Nil)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbCast.cr#L35","def":{"name":"return_value","args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":"::Pointer(MrbInternal::MrbState)"},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"self.return_nil"}},{"id":"return_value(mrb:Pointer(MrbInternal::MrbState),value:Int)-class-method","html_id":"return_value(mrb:Pointer(MrbInternal::MrbState),value:Int)-class-method","name":"return_value","doc":null,"summary":null,"abstract":false,"args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":"::Pointer(MrbInternal::MrbState)"},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"Int"}],"args_string":"(mrb : Pointer(MrbInternal::MrbState), value : Int)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbCast.cr#L43","def":{"name":"return_value","args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":"::Pointer(MrbInternal::MrbState)"},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"Int"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"self.return_fixnum(value)"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"anyolite/MrbClass","path":"MrbClass.html","kind":"class","full_name":"MrbClass","name":"MrbClass","abstract":false,"superclass":{"html_id":"anyolite/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"anyolite/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"anyolite/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/MrbClass.cr","line_number":2,"url":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbClass.cr#L2"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":"Reference to a mruby class","summary":"<p>Reference to a mruby class</p>","class_methods":[],"constructors":[{"id":"new(mrb:MrbState,name:String,superclass:MrbClass?=nil,under:MrbModule?=nil)-class-method","html_id":"new(mrb:MrbState,name:String,superclass:MrbClass?=nil,under:MrbModule?=nil)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":"MrbState"},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"String"},{"name":"superclass","doc":null,"default_value":"nil","external_name":"superclass","restriction":"MrbClass | Nil"},{"name":"under","doc":null,"default_value":"nil","external_name":"under","restriction":"MrbModule | Nil"}],"args_string":"(mrb : MrbState, name : String, superclass : MrbClass? = <span class=\"n\">nil</span>, under : MrbModule? = <span class=\"n\">nil</span>)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbClass.cr#L5","def":{"name":"new","args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":"MrbState"},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"String"},{"name":"superclass","doc":null,"default_value":"nil","external_name":"superclass","restriction":"MrbClass | Nil"},{"name":"under","doc":null,"default_value":"nil","external_name":"under","restriction":"MrbModule | Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(mrb, name, superclass, under)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"to_unsafe-instance-method","html_id":"to_unsafe-instance-method","name":"to_unsafe","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbClass.cr#L14","def":{"name":"to_unsafe","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"return @class_ptr"}}],"macros":[],"types":[]},{"html_id":"anyolite/MrbClassCache","path":"MrbClassCache.html","kind":"module","full_name":"MrbClassCache","name":"MrbClassCache","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"src/MrbClassCache.cr","line_number":2,"url":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbClassCache.cr#L2"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":"Cache for mruby class references","summary":"<p>Cache for mruby class references</p>","class_methods":[{"id":"get(crystal_class:Class)-class-method","html_id":"get(crystal_class:Class)-class-method","name":"get","doc":null,"summary":null,"abstract":false,"args":[{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":"Class"}],"args_string":"(crystal_class : Class)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbClassCache.cr#L9","def":{"name":"get","args":[{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":"Class"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if @@cache[crystal_class.name]?\n  return @@cache[crystal_class.name]\nelse\n  raise(\"Uncached class: #{crystal_class}\")\nend"}},{"id":"register(crystal_class:Class,mrb_class:MrbClass)-class-method","html_id":"register(crystal_class:Class,mrb_class:MrbClass)-class-method","name":"register","doc":null,"summary":null,"abstract":false,"args":[{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":"Class"},{"name":"mrb_class","doc":null,"default_value":"","external_name":"mrb_class","restriction":"MrbClass"}],"args_string":"(crystal_class : Class, mrb_class : MrbClass)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbClassCache.cr#L5","def":{"name":"register","args":[{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":"Class"},{"name":"mrb_class","doc":null,"default_value":"","external_name":"mrb_class","restriction":"MrbClass"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@cache[crystal_class.name] = mrb_class"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"anyolite/MrbFunc","path":"MrbFunc.html","kind":"alias","full_name":"MrbFunc","name":"MrbFunc","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"src/MrbWrap.cr","line_number":14,"url":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbWrap.cr#L14"}],"repository_name":"anyolite","program":false,"enum":false,"alias":true,"aliased":"Proc(Pointer(MrbInternal::MrbState), MrbInternal::MrbValue, MrbInternal::MrbValue)","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":"Alias for the mruby function pointers\r","summary":"<p>Alias for the mruby function pointers\r</p>","class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"anyolite/MrbMacro","path":"MrbMacro.html","kind":"module","full_name":"MrbMacro","name":"MrbMacro","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"src/MrbMacro.cr","line_number":2,"url":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbMacro.cr#L2"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":"Helper methods which should not be used for trivial cases in the final version","summary":"<p>Helper methods which should not be used for trivial cases in the final version</p>","class_methods":[],"constructors":[],"instance_methods":[],"macros":[{"id":"call_and_return(mrb,proc,proc_args,converted_args)-macro","html_id":"call_and_return(mrb,proc,proc_args,converted_args)-macro","name":"call_and_return","doc":null,"summary":null,"abstract":false,"args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"proc_args","doc":null,"default_value":"","external_name":"proc_args","restriction":""},{"name":"converted_args","doc":null,"default_value":"","external_name":"converted_args","restriction":""}],"args_string":"(mrb, proc, proc_args, converted_args)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbMacro.cr#L129","def":{"name":"call_and_return","args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"proc_args","doc":null,"default_value":"","external_name":"proc_args","restriction":""},{"name":"converted_args","doc":null,"default_value":"","external_name":"converted_args","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    return_value = \n{{ proc }}\n(*\n{{ converted_args }}\n)\n    MrbCast.return_value(\n{{ mrb }}\n, return_value)\n  \n"}},{"id":"call_and_return_instance_method(mrb,proc,converted_obj,converted_args,operator=&quot;&quot;)-macro","html_id":"call_and_return_instance_method(mrb,proc,converted_obj,converted_args,operator=&amp;quot;&amp;quot;)-macro","name":"call_and_return_instance_method","doc":null,"summary":null,"abstract":false,"args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"converted_obj","doc":null,"default_value":"","external_name":"converted_obj","restriction":""},{"name":"converted_args","doc":null,"default_value":"","external_name":"converted_args","restriction":""},{"name":"operator","doc":null,"default_value":"\"\"","external_name":"operator","restriction":""}],"args_string":"(mrb, proc, converted_obj, converted_args, operator = <span class=\"s\">&quot;&quot;</span>)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbMacro.cr#L156","def":{"name":"call_and_return_instance_method","args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"converted_obj","doc":null,"default_value":"","external_name":"converted_obj","restriction":""},{"name":"converted_args","doc":null,"default_value":"","external_name":"converted_args","restriction":""},{"name":"operator","doc":null,"default_value":"\"\"","external_name":"operator","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    return_value = \n{{ converted_obj }}\n.\n{{ proc }}\n{{ operator.id }}\n(*\n{{ converted_args }}\n)\n    MrbCast.return_value(\n{{ mrb }}\n, return_value)\n  \n"}},{"id":"call_and_return_keyword_instance_method(mrb,proc,converted_obj,converted_regular_args,keyword_args,kw_args,operator=&quot;&quot;,empty_regular=false)-macro","html_id":"call_and_return_keyword_instance_method(mrb,proc,converted_obj,converted_regular_args,keyword_args,kw_args,operator=&amp;quot;&amp;quot;,empty_regular=false)-macro","name":"call_and_return_keyword_instance_method","doc":null,"summary":null,"abstract":false,"args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"converted_obj","doc":null,"default_value":"","external_name":"converted_obj","restriction":""},{"name":"converted_regular_args","doc":null,"default_value":"","external_name":"converted_regular_args","restriction":""},{"name":"keyword_args","doc":null,"default_value":"","external_name":"keyword_args","restriction":""},{"name":"kw_args","doc":null,"default_value":"","external_name":"kw_args","restriction":""},{"name":"operator","doc":null,"default_value":"\"\"","external_name":"operator","restriction":""},{"name":"empty_regular","doc":null,"default_value":"false","external_name":"empty_regular","restriction":""}],"args_string":"(mrb, proc, converted_obj, converted_regular_args, keyword_args, kw_args, operator = <span class=\"s\">&quot;&quot;</span>, empty_regular = <span class=\"n\">false</span>)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbMacro.cr#L161","def":{"name":"call_and_return_keyword_instance_method","args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"converted_obj","doc":null,"default_value":"","external_name":"converted_obj","restriction":""},{"name":"converted_regular_args","doc":null,"default_value":"","external_name":"converted_regular_args","restriction":""},{"name":"keyword_args","doc":null,"default_value":"","external_name":"keyword_args","restriction":""},{"name":"kw_args","doc":null,"default_value":"","external_name":"kw_args","restriction":""},{"name":"operator","doc":null,"default_value":"\"\"","external_name":"operator","restriction":""},{"name":"empty_regular","doc":null,"default_value":"false","external_name":"empty_regular","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    \n{% if empty_regular %}\n      return_value = {{ converted_obj }}.{{ proc }}{{ operator.id }}(\n        {% c = 0 %}\n        {% for keyword in keyword_args.keys %}\n          {{ keyword.id }}: MrbMacro.convert_keyword_arg({{ mrb }}, {{ kw_args }}.values[{{ c }}], {{ keyword_args[keyword] }}),\n          {% c += 1 %}\n        {% end %}\n      )\n    {% else %}\n      return_value = {{ converted_obj }}.{{ proc }}{{ operator.id }}(*{{ converted_regular_args }},\n        {% c = 0 %}\n        {% for keyword in keyword_args.keys %}\n          {{ keyword.id }}: MrbMacro.convert_keyword_arg({{ mrb }}, {{ kw_args }}.values[{{ c }}], {{ keyword_args[keyword] }}),\n          {% c += 1 %}\n        {% end %}\n      )\n    {% end %}\n\n\n    MrbCast.return_value(\n{{ mrb }}\n, return_value)\n  \n"}},{"id":"call_and_return_keyword_method(mrb,proc,converted_regular_args,keyword_args,kw_args,empty_regular=false)-macro","html_id":"call_and_return_keyword_method(mrb,proc,converted_regular_args,keyword_args,kw_args,empty_regular=false)-macro","name":"call_and_return_keyword_method","doc":null,"summary":null,"abstract":false,"args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"converted_regular_args","doc":null,"default_value":"","external_name":"converted_regular_args","restriction":""},{"name":"keyword_args","doc":null,"default_value":"","external_name":"keyword_args","restriction":""},{"name":"kw_args","doc":null,"default_value":"","external_name":"kw_args","restriction":""},{"name":"empty_regular","doc":null,"default_value":"false","external_name":"empty_regular","restriction":""}],"args_string":"(mrb, proc, converted_regular_args, keyword_args, kw_args, empty_regular = <span class=\"n\">false</span>)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbMacro.cr#L134","def":{"name":"call_and_return_keyword_method","args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"converted_regular_args","doc":null,"default_value":"","external_name":"converted_regular_args","restriction":""},{"name":"keyword_args","doc":null,"default_value":"","external_name":"keyword_args","restriction":""},{"name":"kw_args","doc":null,"default_value":"","external_name":"kw_args","restriction":""},{"name":"empty_regular","doc":null,"default_value":"false","external_name":"empty_regular","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    \n{% if empty_regular %}\n      return_value = {{ proc }}(\n        {% c = 0 %}\n        {% for keyword in keyword_args.keys %}\n          {{ keyword.id }}: MrbMacro.convert_keyword_arg({{ mrb }}, {{ kw_args }}.values[{{ c }}], {{ keyword_args[keyword] }}),\n          {% c += 1 %}\n        {% end %}\n      )\n    {% else %}\n      return_value = {{ proc }}(*{{ converted_regular_args }},\n        {% c = 0 %}\n        {% for keyword in keyword_args.keys %}\n          {{ keyword.id }}: MrbMacro.convert_keyword_arg({{ mrb }}, {{ kw_args }}.values[{{ c }}], {{ keyword_args[keyword] }}),\n          {% c += 1 %}\n        {% end %}\n      )\n    {% end %}\n\n\n    MrbCast.return_value(\n{{ mrb }}\n, return_value)\n  \n"}},{"id":"convert_arg(mrb,arg,arg_type)-macro","html_id":"convert_arg(mrb,arg,arg_type)-macro","name":"convert_arg","doc":"Converts Ruby values to Crystal values","summary":"<p>Converts Ruby values to Crystal values</p>","abstract":false,"args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":""},{"name":"arg","doc":null,"default_value":"","external_name":"arg","restriction":""},{"name":"arg_type","doc":null,"default_value":"","external_name":"arg_type","restriction":""}],"args_string":"(mrb, arg, arg_type)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbMacro.cr#L83","def":{"name":"convert_arg","args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":""},{"name":"arg","doc":null,"default_value":"","external_name":"arg","restriction":""},{"name":"arg_type","doc":null,"default_value":"","external_name":"arg_type","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    \n{% if arg_type.class_name == \"TupleLiteral\" %}\n      MrbMacro.convert_arg({{ mrb }}, {{ arg }}, {{ arg_type[0] }})\n    {% else %}{% if arg_type.resolve <= Bool %}\n      ({{ arg }} != 0)\n    {% else %}{% if arg_type.resolve <= Int %}\n      {{ arg_type }}.new({{ arg }})\n    {% else %}{% if arg_type.resolve <= Float %}\n      {{ arg_type }}.new({{ arg }})\n    {% else %}{% if arg_type.resolve <= String %}\n      {{ arg_type }}.new({{ arg }})\n    {% else %}\n      MrbMacro.convert_from_ruby_object({{ mrb }}, {{ arg }}, {{ arg_type }}).value\n    {% end %}{% end %}{% end %}{% end %}{% end %}\n\n  \n"}},{"id":"convert_args(mrb,args,proc_args)-macro","html_id":"convert_args(mrb,args,proc_args)-macro","name":"convert_args","doc":null,"summary":null,"abstract":false,"args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":""},{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""},{"name":"proc_args","doc":null,"default_value":"","external_name":"proc_args","restriction":""}],"args_string":"(mrb, args, proc_args)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbMacro.cr#L183","def":{"name":"convert_args","args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":""},{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""},{"name":"proc_args","doc":null,"default_value":"","external_name":"proc_args","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    Tuple.new(\n      \n{% c = 0 %}\n\n      \n{% for arg in proc_args %}\n        MrbMacro.convert_arg({{ mrb }}, {{ args }}[{{ c }}].value, {{ arg }}),\n        {% c += 1 %}\n      {% end %}\n\n    )\n  \n"}},{"id":"convert_from_ruby_object(mrb,obj,crystal_type)-macro","html_id":"convert_from_ruby_object(mrb,obj,crystal_type)-macro","name":"convert_from_ruby_object","doc":null,"summary":null,"abstract":false,"args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":""},{"name":"obj","doc":null,"default_value":"","external_name":"obj","restriction":""},{"name":"crystal_type","doc":null,"default_value":"","external_name":"crystal_type","restriction":""}],"args_string":"(mrb, obj, crystal_type)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbMacro.cr#L119","def":{"name":"convert_from_ruby_object","args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":""},{"name":"obj","doc":null,"default_value":"","external_name":"obj","restriction":""},{"name":"crystal_type","doc":null,"default_value":"","external_name":"crystal_type","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    if MrbInternal.mrb_obj_is_kind_of(\n{{ mrb }}\n, \n{{ obj }}\n, MrbClassCache.get(\n{{ crystal_type }}\n)) == 0\n      obj_class = MrbInternal.get_class_of_obj(\n{{ mrb }}\n, \n{{ obj }}\n)\n      \n# TODO: Raise argument error in mruby instead\n\n      raise(\"ERROR: Invalid data type #{obj_class} for object #{\n{{ obj }}\n}:\\n Should be #{\n{{ crystal_type }}\n} -> MrbClassCache.get(\n{{ crystal_type }}\n) instead.\")\n    \nend\n    ptr = MrbInternal.get_data_ptr(\n{{ obj }}\n)\n    ptr.as(\n{{ crystal_type }}\n*)\n  \n"}},{"id":"convert_keyword_arg(mrb,arg,arg_type)-macro","html_id":"convert_keyword_arg(mrb,arg,arg_type)-macro","name":"convert_keyword_arg","doc":null,"summary":null,"abstract":false,"args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":""},{"name":"arg","doc":null,"default_value":"","external_name":"arg","restriction":""},{"name":"arg_type","doc":null,"default_value":"","external_name":"arg_type","restriction":""}],"args_string":"(mrb, arg, arg_type)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbMacro.cr#L99","def":{"name":"convert_keyword_arg","args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":""},{"name":"arg","doc":null,"default_value":"","external_name":"arg","restriction":""},{"name":"arg_type","doc":null,"default_value":"","external_name":"arg_type","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    \n{% if arg_type.class_name == \"TupleLiteral\" %}\n      if MrbCast.is_undef?({{ arg }})\n        {{ arg_type[1] }}\n      else\n        MrbMacro.convert_keyword_arg({{ mrb }}, {{ arg }}, {{ arg_type[0] }})\n      end\n    {% else %}{% if arg_type.resolve <= Bool %}\n      MrbCast.cast_to_bool({{ mrb }}, {{ arg }})\n    {% else %}{% if arg_type.resolve <= Int %}\n      {{ arg_type }}.new(MrbCast.cast_to_int({{ mrb }}, {{ arg }}))\n    {% else %}{% if arg_type.resolve <= Float %}\n     {{ arg_type }}.new( MrbCast.cast_to_float({{ mrb }}, {{ arg }}))\n    {% else %}{% if arg_type.resolve <= String %}\n      MrbCast.cast_to_string({{ mrb }}, {{ arg }})\n    {% else %}\n      MrbMacro.convert_from_ruby_object({{ mrb }}, {{ arg }}, {{ arg_type }}).value\n    {% end %}{% end %}{% end %}{% end %}{% end %}\n\n  \n"}},{"id":"format_char(arg,optional_values=false)-macro","html_id":"format_char(arg,optional_values=false)-macro","name":"format_char","doc":null,"summary":null,"abstract":false,"args":[{"name":"arg","doc":null,"default_value":"","external_name":"arg","restriction":""},{"name":"optional_values","doc":null,"default_value":"false","external_name":"optional_values","restriction":""}],"args_string":"(arg, optional_values = <span class=\"n\">false</span>)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbMacro.cr#L11","def":{"name":"format_char","args":[{"name":"arg","doc":null,"default_value":"","external_name":"arg","restriction":""},{"name":"optional_values","doc":null,"default_value":"false","external_name":"optional_values","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    \n{% if arg.class_name == \"TupleLiteral\" %}\n      {% if optional_values != true %}\n        \"|\" + MrbMacro.format_char({{ arg[0] }}, optional_values: true)\n      {% else %}\n        MrbMacro.format_char({{ arg[0] }}, optional_values: true)\n      {% end %}\n    {% else %}{% if arg.resolve <= Bool %}\n      \"b\"\n    {% else %}{% if arg.resolve <= Int %}\n      \"i\"\n    {% else %}{% if arg.resolve <= Float %}\n      \"f\"\n    {% else %}{% if arg.resolve <= String %}\n      \"z\"\n    {% else %}\n      \"o\"\n    {% end %}{% end %}{% end %}{% end %}{% end %}\n\n  \n"}},{"id":"format_string(args)-macro","html_id":"format_string(args)-macro","name":"format_string","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(args)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbMacro.cr#L3","def":{"name":"format_string","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    \"\" +\n    \n{% for arg in args %}\n      MrbMacro.format_char({{ arg }}) +\n    {% end %}\n\n    \"\"\n  \n"}},{"id":"generate_arg_tuple(args)-macro","html_id":"generate_arg_tuple(args)-macro","name":"generate_arg_tuple","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(args)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbMacro.cr#L63","def":{"name":"generate_arg_tuple","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    Tuple.new(\n      \n{% for arg in args %}\n        {% if arg.class_name == \"TupleLiteral\" %}\n          MrbMacro.pointer_type({{ arg }}).malloc(size: 1, value: MrbMacro.type_in_ruby({{ arg }}).new({{ arg[1] }})),\n        {% else %}\n          MrbMacro.pointer_type({{ arg }}).malloc(size: 1),\n        {% end %}\n      {% end %}\n\n    )\n  \n"}},{"id":"generate_keyword_argument_struct(keyword_args)-macro","html_id":"generate_keyword_argument_struct(keyword_args)-macro","name":"generate_keyword_argument_struct","doc":null,"summary":null,"abstract":false,"args":[{"name":"keyword_args","doc":null,"default_value":"","external_name":"keyword_args","restriction":""}],"args_string":"(keyword_args)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbMacro.cr#L202","def":{"name":"generate_keyword_argument_struct","args":[{"name":"keyword_args","doc":null,"default_value":"","external_name":"keyword_args","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    kw_names = MrbMacro.generate_keyword_names(\n{{ keyword_args }}\n)\n    kw_args = MrbInternal::KWArgs.new\n    kw_args.num = \n{{ keyword_args }}\n.size\n    kw_args.values = Pointer(MrbInternal::MrbValue).malloc(size: \n{{ keyword_args }}\n.size)\n    kw_args.table = kw_names\n    kw_args.required = \n{{ keyword_args.values.select do |i|\n  i.class_name != \"TupleLiteral\"\nend.size }}\n\n    kw_args.rest = Pointer(MrbInternal::MrbValue).malloc(size: 1)\n    kw_args\n  \n"}},{"id":"generate_keyword_names(keyword_args)-macro","html_id":"generate_keyword_names(keyword_args)-macro","name":"generate_keyword_names","doc":null,"summary":null,"abstract":false,"args":[{"name":"keyword_args","doc":null,"default_value":"","external_name":"keyword_args","restriction":""}],"args_string":"(keyword_args)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbMacro.cr#L213","def":{"name":"generate_keyword_names","args":[{"name":"keyword_args","doc":null,"default_value":"","external_name":"keyword_args","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    [\n      \n{% for keyword in keyword_args.keys %}\n        {{ keyword }}.to_s.to_unsafe,\n      {% end %}\n\n    ]\n  \n"}},{"id":"get_converted_args(mrb,proc_args)-macro","html_id":"get_converted_args(mrb,proc_args)-macro","name":"get_converted_args","doc":null,"summary":null,"abstract":false,"args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":""},{"name":"proc_args","doc":null,"default_value":"","external_name":"proc_args","restriction":""}],"args_string":"(mrb, proc_args)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbMacro.cr#L193","def":{"name":"get_converted_args","args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":""},{"name":"proc_args","doc":null,"default_value":"","external_name":"proc_args","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    args = MrbMacro.generate_arg_tuple(\n{{ proc_args }}\n)\n    format_string = MrbMacro.format_string(\n{{ proc_args }}\n)\n    \n    MrbInternal.mrb_get_args(\n{{ mrb }}\n, format_string, *args)\n\n    MrbMacro.convert_args(\n{{ mrb }}\n, args, \n{{ proc_args }}\n)\n  \n"}},{"id":"get_raw_args(mrb,proc_args)-macro","html_id":"get_raw_args(mrb,proc_args)-macro","name":"get_raw_args","doc":null,"summary":null,"abstract":false,"args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":""},{"name":"proc_args","doc":null,"default_value":"","external_name":"proc_args","restriction":""}],"args_string":"(mrb, proc_args)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbMacro.cr#L75","def":{"name":"get_raw_args","args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":""},{"name":"proc_args","doc":null,"default_value":"","external_name":"proc_args","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    args = MrbMacro.generate_arg_tuple(\n{{ proc_args }}\n)\n    format_string = MrbMacro.format_string(\n{{ proc_args }}\n)\n    MrbInternal.mrb_get_args(\n{{ mrb }}\n, format_string, *args)\n    args\n  \n"}},{"id":"pointer_type(type)-macro","html_id":"pointer_type(type)-macro","name":"pointer_type","doc":null,"summary":null,"abstract":false,"args":[{"name":"type","doc":null,"default_value":"","external_name":"type","restriction":""}],"args_string":"(type)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbMacro.cr#L47","def":{"name":"pointer_type","args":[{"name":"type","doc":null,"default_value":"","external_name":"type","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    \n{% if type.class_name == \"TupleLiteral\" %}\n      MrbMacro.pointer_type({{ type[0] }})\n    {% else %}{% if type.resolve <= Bool %}\n      Pointer(MrbInternal::MrbBool)\n    {% else %}{% if type.resolve <= Int %}\n      Pointer(MrbInternal::MrbInt)\n    {% else %}{% if type.resolve <= Float %}\n      Pointer(MrbInternal::MrbFloat)\n    {% else %}{% if type.resolve <= String %}\n      Pointer(LibC::Char*)\n    {% else %}\n      Pointer(MrbInternal::MrbValue)\n    {% end %}{% end %}{% end %}{% end %}{% end %}\n\n  \n"}},{"id":"type_in_ruby(type)-macro","html_id":"type_in_ruby(type)-macro","name":"type_in_ruby","doc":null,"summary":null,"abstract":false,"args":[{"name":"type","doc":null,"default_value":"","external_name":"type","restriction":""}],"args_string":"(type)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbMacro.cr#L31","def":{"name":"type_in_ruby","args":[{"name":"type","doc":null,"default_value":"","external_name":"type","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    \n{% if type.class_name == \"TupleLiteral\" %}\n      MrbMacro.type_in_ruby({{ type[0] }})  # TODO: Allow nil for regular arguments as default\n    {% else %}{% if type.resolve <= Bool %}\n      MrbInternal::MrbBool\n    {% else %}{% if type.resolve <= Int %}\n      MrbInternal::MrbInt\n    {% else %}{% if type.resolve <= Float %}\n      MrbInternal::MrbFloat\n    {% else %}{% if type.resolve <= String %}  # TODO: Default string arguments do not work here yet, can this be fixed?\n      LibC::Char*\n    {% else %}\n      MrbInternal::MrbValue\n    {% end %}{% end %}{% end %}{% end %}{% end %}\n\n  \n"}},{"id":"wrap_class_method_with_args(mrb_state,crystal_class,name,proc,proc_args=[]ofClass)-macro","html_id":"wrap_class_method_with_args(mrb_state,crystal_class,name,proc,proc_args=[]ofClass)-macro","name":"wrap_class_method_with_args","doc":null,"summary":null,"abstract":false,"args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"proc_args","doc":null,"default_value":"[] of Class","external_name":"proc_args","restriction":""}],"args_string":"(mrb_state, crystal_class, name, proc, proc_args = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">Class</span>)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbMacro.cr#L264","def":{"name":"wrap_class_method_with_args","args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"proc_args","doc":null,"default_value":"[] of Class","external_name":"proc_args","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    \n{% if proc_args.class_name == \"ArrayLiteral\" %}\n      {% proc_arg_array = proc_args %}\n    {% else %}\n      {% proc_arg_array = [proc_args] %}\n    {% end %}\n\n\n    wrapped_method = MrbFunc.new do |mrb, obj|\n      converted_args = MrbMacro.get_converted_args(mrb, \n{{ proc_arg_array }}\n)\n      MrbMacro.call_and_return(mrb, \n{{ proc }}\n, \n{{ proc_arg_array }}\n, converted_args)\n    \nend\n    \n    \n{{ mrb_state }}\n.define_class_method(\n{{ name }}\n, MrbClassCache.get(\n{{ crystal_class }}\n), wrapped_method)\n  \n"}},{"id":"wrap_class_method_with_keyword_args(mrb_state,crystal_class,name,proc,keyword_args,regular_args=[]ofClass)-macro","html_id":"wrap_class_method_with_keyword_args(mrb_state,crystal_class,name,proc,keyword_args,regular_args=[]ofClass)-macro","name":"wrap_class_method_with_keyword_args","doc":null,"summary":null,"abstract":false,"args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"keyword_args","doc":null,"default_value":"","external_name":"keyword_args","restriction":""},{"name":"regular_args","doc":null,"default_value":"[] of Class","external_name":"regular_args","restriction":""}],"args_string":"(mrb_state, crystal_class, name, proc, keyword_args, regular_args = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">Class</span>)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbMacro.cr#L279","def":{"name":"wrap_class_method_with_keyword_args","args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"keyword_args","doc":null,"default_value":"","external_name":"keyword_args","restriction":""},{"name":"regular_args","doc":null,"default_value":"[] of Class","external_name":"regular_args","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    \n{% if regular_args.class_name == \"ArrayLiteral\" %}\n      {% regular_arg_array = regular_args %}\n    {% else %}\n      {% regular_arg_array = [regular_args] %}\n    {% end %}\n\n\n    wrapped_method = MrbFunc.new do |mrb, obj|\n      regular_arg_tuple = MrbMacro.generate_arg_tuple(\n{{ regular_arg_array }}\n)\n      format_string = MrbMacro.format_string(\n{{ regular_arg_array }}\n) + \":\"\n\n      kw_args = MrbMacro.generate_keyword_argument_struct(\n{{ keyword_args }}\n)\n      MrbInternal.mrb_get_args(mrb, format_string, *regular_arg_tuple, pointerof(kw_args))\n\n      converted_regular_args = MrbMacro.convert_args(mrb, regular_arg_tuple, \n{{ regular_arg_array }}\n)\n\n      \n{% if regular_arg_array.size == 0 %}\n        MrbMacro.call_and_return_keyword_method(mrb, {{ proc }}, converted_regular_args, {{ keyword_args }}, kw_args, empty_regular: true)\n      {% else %}\n        MrbMacro.call_and_return_keyword_method(mrb, {{ proc }}, converted_regular_args, {{ keyword_args }}, kw_args)\n      {% end %}\n\n    \nend\n\n    \n{{ mrb_state }}\n.define_class_method(\n{{ name }}\n, MrbClassCache.get(\n{{ crystal_class }}\n), wrapped_method)\n  \n"}},{"id":"wrap_constructor_function_with_args(mrb_state,crystal_class,proc,proc_args=[]ofClass)-macro","html_id":"wrap_constructor_function_with_args(mrb_state,crystal_class,proc,proc_args=[]ofClass)-macro","name":"wrap_constructor_function_with_args","doc":null,"summary":null,"abstract":false,"args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"proc_args","doc":null,"default_value":"[] of Class","external_name":"proc_args","restriction":""}],"args_string":"(mrb_state, crystal_class, proc, proc_args = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">Class</span>)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbMacro.cr#L348","def":{"name":"wrap_constructor_function_with_args","args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"proc_args","doc":null,"default_value":"[] of Class","external_name":"proc_args","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    \n{% if proc_args.class_name == \"ArrayLiteral\" %}\n      {% proc_arg_array = proc_args %}\n    {% else %}\n      {% proc_arg_array = [proc_args] %}\n    {% end %}\n\n\n    wrapped_method = MrbFunc.new do |mrb, obj|\n      \n# Create local object\n\n      converted_args = MrbMacro.get_converted_args(mrb, \n{{ proc_arg_array }}\n)\n      new_obj = \n{{ proc }}\n(*converted_args)\n\n      if new_obj.responds_to?(:mrb_initialize)\n        new_obj.mrb_initialize(mrb)\n      \nend\n\n      \n# Allocate memory so we do not lose this object\n\n      new_obj_ptr = Pointer(\n{{ crystal_class }}\n).malloc(size: 1, value: new_obj)\n      MrbRefTable.add(new_obj_ptr.value.object_id, new_obj_ptr.as(Void*))\n\n      destructor = MrbTypeCache.destructor_method(\n{{ crystal_class }}\n)\n      MrbInternal.set_data_ptr_and_type(obj, new_obj_ptr, MrbTypeCache.register(\n{{ crystal_class }}\n, destructor))\n\n      \n# Return object\n\n      obj\n    \nend\n\n    \n{{ mrb_state }}\n.define_method(\"initialize\", MrbClassCache.get(\n{{ crystal_class }}\n), wrapped_method)\n  \n"}},{"id":"wrap_constructor_function_with_keyword_args(mrb_state,crystal_class,proc,keyword_args,regular_args=[]ofClass)-macro","html_id":"wrap_constructor_function_with_keyword_args(mrb_state,crystal_class,proc,keyword_args,regular_args=[]ofClass)-macro","name":"wrap_constructor_function_with_keyword_args","doc":null,"summary":null,"abstract":false,"args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"keyword_args","doc":null,"default_value":"","external_name":"keyword_args","restriction":""},{"name":"regular_args","doc":null,"default_value":"[] of Class","external_name":"regular_args","restriction":""}],"args_string":"(mrb_state, crystal_class, proc, keyword_args, regular_args = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">Class</span>)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbMacro.cr#L378","def":{"name":"wrap_constructor_function_with_keyword_args","args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"keyword_args","doc":null,"default_value":"","external_name":"keyword_args","restriction":""},{"name":"regular_args","doc":null,"default_value":"[] of Class","external_name":"regular_args","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    \n{% if regular_args.class_name == \"ArrayLiteral\" %}\n      {% regular_arg_array = regular_args %}\n    {% else %}\n      {% regular_arg_array = [regular_args] %}\n    {% end %}\n\n\n    wrapped_method = MrbFunc.new do |mrb, obj|\n      regular_arg_tuple = MrbMacro.generate_arg_tuple(\n{{ regular_arg_array }}\n)\n      format_string = MrbMacro.format_string(\n{{ regular_arg_array }}\n) + \":\"\n\n      kw_args = MrbMacro.generate_keyword_argument_struct(\n{{ keyword_args }}\n)\n      MrbInternal.mrb_get_args(mrb, format_string, *regular_arg_tuple, pointerof(kw_args))\n\n      converted_regular_args = MrbMacro.convert_args(mrb, regular_arg_tuple, \n{{ regular_arg_array }}\n)\n\n      \n{% if regular_arg_array.size == 0 %}\n        new_obj = {{ proc }}(\n          {% c = 0 %}\n          {% for keyword in keyword_args.keys %}\n            {{ keyword.id }}: MrbMacro.convert_keyword_arg(mrb, kw_args.values[{{ c }}], {{ keyword_args[keyword] }}),\n            {% c += 1 %}\n          {% end %}\n        )\n      {% else %}\n        new_obj = {{ proc }}(*converted_regular_args,\n          {% c = 0 %}\n          {% for keyword in keyword_args.keys %}\n            {{ keyword.id }}: MrbMacro.convert_keyword_arg(mrb, kw_args.values[{{ c }}], {{ keyword_args[keyword] }}),\n            {% c += 1 %}\n          {% end %}\n        )\n      {% end %}\n\n\n      if new_obj.responds_to?(:mrb_initialize)\n        new_obj.mrb_initialize(mrb)\n      \nend\n\n      \n# Allocate memory so we do not lose this object\n\n      new_obj_ptr = Pointer(\n{{ crystal_class }}\n).malloc(size: 1, value: new_obj)\n      MrbRefTable.add(new_obj_ptr.value.object_id, new_obj_ptr.as(Void*))\n\n      destructor = MrbTypeCache.destructor_method(\n{{ crystal_class }}\n)\n      MrbInternal.set_data_ptr_and_type(obj, new_obj_ptr, MrbTypeCache.register(\n{{ crystal_class }}\n, destructor))\n\n      obj\n    \nend\n\n    \n{{ mrb_state }}\n.define_method(\"initialize\", MrbClassCache.get(\n{{ crystal_class }}\n), wrapped_method)\n  \n"}},{"id":"wrap_instance_function_with_args(mrb_state,crystal_class,name,proc,proc_args=[]ofClass,operator=&quot;&quot;)-macro","html_id":"wrap_instance_function_with_args(mrb_state,crystal_class,name,proc,proc_args=[]ofClass,operator=&amp;quot;&amp;quot;)-macro","name":"wrap_instance_function_with_args","doc":null,"summary":null,"abstract":false,"args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"proc_args","doc":null,"default_value":"[] of Class","external_name":"proc_args","restriction":""},{"name":"operator","doc":null,"default_value":"\"\"","external_name":"operator","restriction":""}],"args_string":"(mrb_state, crystal_class, name, proc, proc_args = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">Class</span>, operator = <span class=\"s\">&quot;&quot;</span>)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbMacro.cr#L305","def":{"name":"wrap_instance_function_with_args","args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"proc_args","doc":null,"default_value":"[] of Class","external_name":"proc_args","restriction":""},{"name":"operator","doc":null,"default_value":"\"\"","external_name":"operator","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    \n{% if proc_args.class_name == \"ArrayLiteral\" %}\n      {% proc_arg_array = proc_args %}\n    {% else %}\n      {% proc_arg_array = [proc_args] %}\n    {% end %}\n\n\n    wrapped_method = MrbFunc.new do |mrb, obj|\n      converted_args = MrbMacro.get_converted_args(mrb, \n{{ proc_arg_array }}\n)\n      converted_obj = MrbMacro.convert_from_ruby_object(mrb, obj, \n{{ crystal_class }}\n).value\n      MrbMacro.call_and_return_instance_method(mrb, \n{{ proc }}\n, converted_obj, converted_args, \n{{ operator }}\n)\n    \nend\n\n    \n{{ mrb_state }}\n.define_method(\n{{ name + operator }}\n, MrbClassCache.get(\n{{ crystal_class }}\n), wrapped_method)\n  \n"}},{"id":"wrap_instance_function_with_keyword_args(mrb_state,crystal_class,name,proc,keyword_args,regular_args=[]ofClass,operator=&quot;&quot;)-macro","html_id":"wrap_instance_function_with_keyword_args(mrb_state,crystal_class,name,proc,keyword_args,regular_args=[]ofClass,operator=&amp;quot;&amp;quot;)-macro","name":"wrap_instance_function_with_keyword_args","doc":null,"summary":null,"abstract":false,"args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"keyword_args","doc":null,"default_value":"","external_name":"keyword_args","restriction":""},{"name":"regular_args","doc":null,"default_value":"[] of Class","external_name":"regular_args","restriction":""},{"name":"operator","doc":null,"default_value":"\"\"","external_name":"operator","restriction":""}],"args_string":"(mrb_state, crystal_class, name, proc, keyword_args, regular_args = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">Class</span>, operator = <span class=\"s\">&quot;&quot;</span>)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbMacro.cr#L321","def":{"name":"wrap_instance_function_with_keyword_args","args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"keyword_args","doc":null,"default_value":"","external_name":"keyword_args","restriction":""},{"name":"regular_args","doc":null,"default_value":"[] of Class","external_name":"regular_args","restriction":""},{"name":"operator","doc":null,"default_value":"\"\"","external_name":"operator","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    \n{% if regular_args.class_name == \"ArrayLiteral\" %}\n      {% regular_arg_array = regular_args %}\n    {% else %}\n      {% regular_arg_array = [regular_args] %}\n    {% end %}\n\n\n    wrapped_method = MrbFunc.new do |mrb, obj|\n      regular_arg_tuple = MrbMacro.generate_arg_tuple(\n{{ regular_arg_array }}\n)\n      format_string = MrbMacro.format_string(\n{{ regular_arg_array }}\n) + \":\"\n\n      kw_args = MrbMacro.generate_keyword_argument_struct(\n{{ keyword_args }}\n)\n      MrbInternal.mrb_get_args(mrb, format_string, *regular_arg_tuple, pointerof(kw_args))\n\n      converted_regular_args = MrbMacro.convert_args(mrb, regular_arg_tuple, \n{{ regular_arg_array }}\n)\n      converted_obj = MrbMacro.convert_from_ruby_object(mrb, obj, \n{{ crystal_class }}\n).value\n\n      \n{% if regular_arg_array.size == 0 %}\n        MrbMacro.call_and_return_keyword_instance_method(mrb, {{ proc }}, converted_obj, converted_regular_args, {{ keyword_args }}, kw_args, {{ operator }}, empty_regular: true)\n      {% else %}\n        MrbMacro.call_and_return_keyword_instance_method(mrb, {{ proc }}, converted_obj, converted_regular_args, {{ keyword_args }}, kw_args, {{ operator }})\n      {% end %}\n\n    \nend\n\n    \n{{ mrb_state }}\n.define_method(\n{{ name + operator }}\n, MrbClassCache.get(\n{{ crystal_class }}\n), wrapped_method)\n  \n"}},{"id":"wrap_module_function_with_args(mrb_state,under_module,name,proc,proc_args=[]ofClass)-macro","html_id":"wrap_module_function_with_args(mrb_state,under_module,name,proc,proc_args=[]ofClass)-macro","name":"wrap_module_function_with_args","doc":null,"summary":null,"abstract":false,"args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"under_module","doc":null,"default_value":"","external_name":"under_module","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"proc_args","doc":null,"default_value":"[] of Class","external_name":"proc_args","restriction":""}],"args_string":"(mrb_state, under_module, name, proc, proc_args = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">Class</span>)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbMacro.cr#L221","def":{"name":"wrap_module_function_with_args","args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"under_module","doc":null,"default_value":"","external_name":"under_module","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"proc_args","doc":null,"default_value":"[] of Class","external_name":"proc_args","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    \n{% if proc_args.class_name == \"ArrayLiteral\" %}\n      {% proc_arg_array = proc_args %}\n    {% else %}\n      {% proc_arg_array = [proc_args] %}\n    {% end %}\n\n\n    \n{% proc_arg_array = MrbMacro.put_args_in_array(proc_args) %}\n\n\n    wrapped_method = MrbFunc.new do |mrb, obj|\n      converted_args = MrbMacro.get_converted_args(mrb, \n{{ proc_arg_array }}\n)\n      MrbMacro.call_and_return(mrb, \n{{ proc }}\n, \n{{ proc_arg_array }}\n, converted_args)\n    \nend\n\n    \n{{ mrb_state }}\n.define_module_function(\n{{ name }}\n, \n{{ under_module }}\n, wrapped_method)\n  \n"}},{"id":"wrap_module_function_with_keyword_args(mrb_state,under_module,name,proc,keyword_args,regular_args=[]ofClass)-macro","html_id":"wrap_module_function_with_keyword_args(mrb_state,under_module,name,proc,keyword_args,regular_args=[]ofClass)-macro","name":"wrap_module_function_with_keyword_args","doc":null,"summary":null,"abstract":false,"args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"under_module","doc":null,"default_value":"","external_name":"under_module","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"keyword_args","doc":null,"default_value":"","external_name":"keyword_args","restriction":""},{"name":"regular_args","doc":null,"default_value":"[] of Class","external_name":"regular_args","restriction":""}],"args_string":"(mrb_state, under_module, name, proc, keyword_args, regular_args = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">Class</span>)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbMacro.cr#L238","def":{"name":"wrap_module_function_with_keyword_args","args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"under_module","doc":null,"default_value":"","external_name":"under_module","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"keyword_args","doc":null,"default_value":"","external_name":"keyword_args","restriction":""},{"name":"regular_args","doc":null,"default_value":"[] of Class","external_name":"regular_args","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    \n{% if regular_args.class_name == \"ArrayLiteral\" %}\n      {% regular_arg_array = regular_args %}\n    {% else %}\n      {% regular_arg_array = [regular_args] %}\n    {% end %}\n\n\n    wrapped_method = MrbFunc.new do |mrb, obj|\n      regular_arg_tuple = MrbMacro.generate_arg_tuple(\n{{ regular_arg_array }}\n)\n      format_string = MrbMacro.format_string(\n{{ regular_arg_array }}\n) + \":\"\n\n      kw_args = MrbMacro.generate_keyword_argument_struct(\n{{ keyword_args }}\n)\n      MrbInternal.mrb_get_args(mrb, format_string, *regular_arg_tuple, pointerof(kw_args))\n\n      converted_regular_args = MrbMacro.convert_args(mrb, regular_arg_tuple, \n{{ regular_arg_array }}\n)\n\n      \n{% if regular_arg_array.size == 0 %}\n        MrbMacro.call_and_return_keyword_method(mrb, {{ proc }}, converted_regular_args, {{ keyword_args }}, kw_args, empty_regular: true)\n      {% else %}\n        MrbMacro.call_and_return_keyword_method(mrb, {{ proc }}, converted_regular_args, {{ keyword_args }}, kw_args)\n      {% end %}\n\n    \nend\n\n    \n{{ mrb_state }}\n.define_module_function(\n{{ name }}\n, \n{{ under_module }}\n, wrapped_method)\n  \n"}}],"types":[]},{"html_id":"anyolite/MrbModule","path":"MrbModule.html","kind":"class","full_name":"MrbModule","name":"MrbModule","abstract":false,"superclass":{"html_id":"anyolite/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"anyolite/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"anyolite/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/MrbModule.cr","line_number":2,"url":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbModule.cr#L2"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":"Reference to a mruby module","summary":"<p>Reference to a mruby module</p>","class_methods":[],"constructors":[{"id":"new(mrb:MrbState,name:String,under:MrbModule?=nil)-class-method","html_id":"new(mrb:MrbState,name:String,under:MrbModule?=nil)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":"MrbState"},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"String"},{"name":"under","doc":null,"default_value":"nil","external_name":"under","restriction":"MrbModule | Nil"}],"args_string":"(mrb : MrbState, name : String, under : MrbModule? = <span class=\"n\">nil</span>)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbModule.cr#L5","def":{"name":"new","args":[{"name":"mrb","doc":null,"default_value":"","external_name":"mrb","restriction":"MrbState"},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"String"},{"name":"under","doc":null,"default_value":"nil","external_name":"under","restriction":"MrbModule | Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(mrb, name, under)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"to_unsafe-instance-method","html_id":"to_unsafe-instance-method","name":"to_unsafe","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbModule.cr#L13","def":{"name":"to_unsafe","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"return @module_ptr"}}],"macros":[],"types":[]},{"html_id":"anyolite/MrbModuleCache","path":"MrbModuleCache.html","kind":"module","full_name":"MrbModuleCache","name":"MrbModuleCache","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"src/MrbModuleCache.cr","line_number":2,"url":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbModuleCache.cr#L2"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":"Cache for mruby class references\r","summary":"<p>Cache for mruby class references\r</p>","class_methods":[{"id":"get(crystal_module:Class)-class-method","html_id":"get(crystal_module:Class)-class-method","name":"get","doc":null,"summary":null,"abstract":false,"args":[{"name":"crystal_module","doc":null,"default_value":"","external_name":"crystal_module","restriction":"Class"}],"args_string":"(crystal_module : Class)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbModuleCache.cr#L9","def":{"name":"get","args":[{"name":"crystal_module","doc":null,"default_value":"","external_name":"crystal_module","restriction":"Class"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if @@cache[crystal_module.name]?\n  return @@cache[crystal_module.name]\nelse\n  raise(\"Uncached class: #{crystal_module}\")\nend"}},{"id":"register(crystal_module:Class,mrb_module:MrbModule)-class-method","html_id":"register(crystal_module:Class,mrb_module:MrbModule)-class-method","name":"register","doc":null,"summary":null,"abstract":false,"args":[{"name":"crystal_module","doc":null,"default_value":"","external_name":"crystal_module","restriction":"Class"},{"name":"mrb_module","doc":null,"default_value":"","external_name":"mrb_module","restriction":"MrbModule"}],"args_string":"(crystal_module : Class, mrb_module : MrbModule)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbModuleCache.cr#L5","def":{"name":"register","args":[{"name":"crystal_module","doc":null,"default_value":"","external_name":"crystal_module","restriction":"Class"},{"name":"mrb_module","doc":null,"default_value":"","external_name":"mrb_module","restriction":"MrbModule"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@cache[crystal_module.name] = mrb_module"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"anyolite/MrbRefTable","path":"MrbRefTable.html","kind":"module","full_name":"MrbRefTable","name":"MrbRefTable","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"src/MrbRefTable.cr","line_number":7,"url":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbRefTable.cr#L7"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":"This is a very simple approach to generate artificial references to the wrapped objects.\nTherefore, the GC won't delete the wrapped objects until necessary.\nNote that this is currently one-directional, so Mruby might still delete Crystal objects generated from Crystal itself.\n\nTODO: Add reset method or transform this module into a class\nTODO: Add compilation option for ignoring entry checks","summary":"<p>This is a very simple approach to generate artificial references to the wrapped objects.</p>","class_methods":[{"id":"add(identification,value)-class-method","html_id":"add(identification,value)-class-method","name":"add","doc":null,"summary":null,"abstract":false,"args":[{"name":"identification","doc":null,"default_value":"","external_name":"identification","restriction":""},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":""}],"args_string":"(identification, value)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbRefTable.cr#L14","def":{"name":"add","args":[{"name":"identification","doc":null,"default_value":"","external_name":"identification","restriction":""},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if @@content[identification]?\n  puts(\"WARNING: Tried to add object #{identification} to already existing reference table entry.\")\nend\n@@content[identification] = value\n"}},{"id":"delete(identification)-class-method","html_id":"delete(identification)-class-method","name":"delete","doc":null,"summary":null,"abstract":false,"args":[{"name":"identification","doc":null,"default_value":"","external_name":"identification","restriction":""}],"args_string":"(identification)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbRefTable.cr#L21","def":{"name":"delete","args":[{"name":"identification","doc":null,"default_value":"","external_name":"identification","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if @@content[identification]?\n  @@content.delete(identification)\nelse\n  puts(\"WARNING: Tried to remove unregistered object #{identification} from reference table.\")\nend\nnil\n"}},{"id":"get(identification)-class-method","html_id":"get(identification)-class-method","name":"get","doc":null,"summary":null,"abstract":false,"args":[{"name":"identification","doc":null,"default_value":"","external_name":"identification","restriction":""}],"args_string":"(identification)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbRefTable.cr#L10","def":{"name":"get","args":[{"name":"identification","doc":null,"default_value":"","external_name":"identification","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"return @@content[identification]"}},{"id":"is_registered?(identification)-class-method","html_id":"is_registered?(identification)-class-method","name":"is_registered?","doc":null,"summary":null,"abstract":false,"args":[{"name":"identification","doc":null,"default_value":"","external_name":"identification","restriction":""}],"args_string":"(identification)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbRefTable.cr#L30","def":{"name":"is_registered?","args":[{"name":"identification","doc":null,"default_value":"","external_name":"identification","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"return @@content[identification]?"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"anyolite/MrbState","path":"MrbState.html","kind":"class","full_name":"MrbState","name":"MrbState","abstract":false,"superclass":{"html_id":"anyolite/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"anyolite/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"anyolite/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/MrbState.cr","line_number":2,"url":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbState.cr#L2"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":"Wrapper for an mruby state reference","summary":"<p>Wrapper for an mruby state reference</p>","class_methods":[{"id":"create(&)-class-method","html_id":"create(&)-class-method","name":"create","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"(&)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbState.cr#L5","def":{"name":"create","args":[],"double_splat":null,"splat_index":null,"yields":1,"block_arg":null,"return_type":"","visibility":"Public","body":"mrb = self.new\nyield mrb\nmrb.close\n"}}],"constructors":[{"id":"new-class-method","html_id":"new-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbState.cr#L11","def":{"name":"new","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"close-instance-method","html_id":"close-instance-method","name":"close","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbState.cr#L15","def":{"name":"close","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"MrbInternal.mrb_close(@mrb_ptr)"}},{"id":"define_class_method(name:String,c:MrbClass,proc:MrbFunc)-instance-method","html_id":"define_class_method(name:String,c:MrbClass,proc:MrbFunc)-instance-method","name":"define_class_method","doc":null,"summary":null,"abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"String"},{"name":"c","doc":null,"default_value":"","external_name":"c","restriction":"MrbClass"},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":"MrbFunc"}],"args_string":"(name : String, c : MrbClass, proc : MrbFunc)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbState.cr#L40","def":{"name":"define_class_method","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"String"},{"name":"c","doc":null,"default_value":"","external_name":"c","restriction":"MrbClass"},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":"MrbFunc"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"MrbInternal.mrb_define_class_method(@mrb_ptr, c, name, proc, 1)"}},{"id":"define_method(name:String,c:MrbClass,proc:MrbFunc)-instance-method","html_id":"define_method(name:String,c:MrbClass,proc:MrbFunc)-instance-method","name":"define_method","doc":"TODO: Use internal mruby arg count in future versions","summary":"<p><span class=\"flag orange\">TODO</span>  Use internal mruby arg count in future versions</p>","abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"String"},{"name":"c","doc":null,"default_value":"","external_name":"c","restriction":"MrbClass"},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":"MrbFunc"}],"args_string":"(name : String, c : MrbClass, proc : MrbFunc)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbState.cr#L32","def":{"name":"define_method","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"String"},{"name":"c","doc":null,"default_value":"","external_name":"c","restriction":"MrbClass"},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":"MrbFunc"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"MrbInternal.mrb_define_method(@mrb_ptr, c, name, proc, 1)"}},{"id":"define_module_function(name:String,mod:MrbModule,proc:MrbFunc)-instance-method","html_id":"define_module_function(name:String,mod:MrbModule,proc:MrbFunc)-instance-method","name":"define_module_function","doc":null,"summary":null,"abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"String"},{"name":"mod","doc":null,"default_value":"","external_name":"mod","restriction":"MrbModule"},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":"MrbFunc"}],"args_string":"(name : String, mod : MrbModule, proc : MrbFunc)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbState.cr#L36","def":{"name":"define_module_function","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"String"},{"name":"mod","doc":null,"default_value":"","external_name":"mod","restriction":"MrbModule"},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":"MrbFunc"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"MrbInternal.mrb_define_module_function(@mrb_ptr, mod, name, proc, 1)"}},{"id":"execute_script_line(str:String)-instance-method","html_id":"execute_script_line(str:String)-instance-method","name":"execute_script_line","doc":null,"summary":null,"abstract":false,"args":[{"name":"str","doc":null,"default_value":"","external_name":"str","restriction":"String"}],"args_string":"(str : String)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbState.cr#L23","def":{"name":"execute_script_line","args":[{"name":"str","doc":null,"default_value":"","external_name":"str","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"MrbInternal.execute_script_line(@mrb_ptr, str)"}},{"id":"load_script_from_file(filename:String)-instance-method","html_id":"load_script_from_file(filename:String)-instance-method","name":"load_script_from_file","doc":null,"summary":null,"abstract":false,"args":[{"name":"filename","doc":null,"default_value":"","external_name":"filename","restriction":"String"}],"args_string":"(filename : String)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbState.cr#L27","def":{"name":"load_script_from_file","args":[{"name":"filename","doc":null,"default_value":"","external_name":"filename","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"MrbInternal.load_script_from_file(@mrb_ptr, filename)"}},{"id":"to_unsafe-instance-method","html_id":"to_unsafe-instance-method","name":"to_unsafe","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbState.cr#L19","def":{"name":"to_unsafe","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"return @mrb_ptr"}}],"macros":[],"types":[]},{"html_id":"anyolite/MrbTypeCache","path":"MrbTypeCache.html","kind":"module","full_name":"MrbTypeCache","name":"MrbTypeCache","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"src/MrbTypeCache.cr","line_number":2,"url":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbTypeCache.cr#L2"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":"Cache for mruby data types, holding the destructor methods","summary":"<p>Cache for mruby data types, holding the destructor methods</p>","class_methods":[{"id":"register(crystal_class:Class,destructor:Proc(Pointer(MrbInternal::MrbState),Pointer(Void),Void))-class-method","html_id":"register(crystal_class:Class,destructor:Proc(Pointer(MrbInternal::MrbState),Pointer(Void),Void))-class-method","name":"register","doc":null,"summary":null,"abstract":false,"args":[{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":"Class"},{"name":"destructor","doc":null,"default_value":"","external_name":"destructor","restriction":"Proc(::Pointer(MrbInternal::MrbState), ::Pointer(Void), Void)"}],"args_string":"(crystal_class : Class, destructor : Proc(Pointer(MrbInternal::MrbState), Pointer(Void), Void))","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbTypeCache.cr#L5","def":{"name":"register","args":[{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":"Class"},{"name":"destructor","doc":null,"default_value":"","external_name":"destructor","restriction":"Proc(::Pointer(MrbInternal::MrbState), ::Pointer(Void), Void)"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"new_type = MrbInternal::MrbDataType.new(struct_name: crystal_class.name, dfree: destructor)\n@@cache[crystal_class.name] = Pointer(MrbInternal::MrbDataType).malloc(size: 1, value: new_type)\nreturn @@cache[crystal_class.name]\n"}}],"constructors":[],"instance_methods":[],"macros":[{"id":"destructor_method(crystal_class)-macro","html_id":"destructor_method(crystal_class)-macro","name":"destructor_method","doc":null,"summary":null,"abstract":false,"args":[{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":""}],"args_string":"(crystal_class)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbTypeCache.cr#L11","def":{"name":"destructor_method","args":[{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    ->(mrb : MrbInternal::MrbState*, ptr : Void*) \n{\n      crystal_ptr = ptr.as(\n{{ crystal_class }}\n*)\n\n      \n# Call optional mruby callback\n\n      if (crystal_value = crystal_ptr.value).responds_to?(:mrb_finalize)\n        crystal_value.mrb_finalize(mrb)\n      \nend\n\n      \n# Delete the Crystal reference to this object\n\n      MrbRefTable.delete(crystal_ptr.value.object_id)\n    }\n  \n"}}],"types":[]},{"html_id":"anyolite/MrbWrap","path":"MrbWrap.html","kind":"module","full_name":"MrbWrap","name":"MrbWrap","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"src/MrbWrap.cr","line_number":17,"url":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbWrap.cr#L17"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[{"id":"Undef","name":"Undef","value":"Undefined.new","doc":"Undefined mruby value\r","summary":"<p>Undefined mruby value\r</p>"}],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":"Main wrapper module, which should be covering most of the use cases\r","summary":"<p>Main wrapper module, which should be covering most of the use cases\r</p>","class_methods":[],"constructors":[],"instance_methods":[],"macros":[{"id":"wrap_class(mrb_state,crystal_class,name,under=nil,superclass=nil)-macro","html_id":"wrap_class(mrb_state,crystal_class,name,under=nil,superclass=nil)-macro","name":"wrap_class","doc":"Wraps a Crystal class directly into an mruby class.\r\n\r\nThe Crystal class *crystal_class* will be integrated into the `MrbState` *mrb_state*,\r\nwith *name* as its new designation, returning an `MrbClass`.\r\n\r\nTo inherit from another mruby class, specify an `MrbClass` as a *superclass*.\r\n\r\nEach class can be defined in a specifiy module by setting *under* to a `MrbModule`.\r","summary":"<p>Wraps a Crystal class directly into an mruby class.</p>","abstract":false,"args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"under","doc":null,"default_value":"nil","external_name":"under","restriction":""},{"name":"superclass","doc":null,"default_value":"nil","external_name":"superclass","restriction":""}],"args_string":"(mrb_state, crystal_class, name, under = <span class=\"n\">nil</span>, superclass = <span class=\"n\">nil</span>)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbWrap.cr#L40","def":{"name":"wrap_class","args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"under","doc":null,"default_value":"nil","external_name":"under","restriction":""},{"name":"superclass","doc":null,"default_value":"nil","external_name":"superclass","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    new_class = MrbClass.new(\n{{ mrb_state }}\n, \n{{ name }}\n, under: \n{{ under }}\n, superclass: \n{{ superclass }}\n)\r\n    MrbInternal.set_instance_tt_as_data(new_class)\r\n    MrbClassCache.register(\n{{ crystal_class }}\n, new_class)\r\n    MrbClassCache.get(\n{{ crystal_class }}\n)\r\n  \n"}},{"id":"wrap_class_method(mrb_state,crystal_class,name,proc,proc_args=[]ofClass)-macro","html_id":"wrap_class_method(mrb_state,crystal_class,name,proc,proc_args=[]ofClass)-macro","name":"wrap_class_method","doc":"Wraps a class method into mruby.\r\n\r\nThe class method *proc* of the Crystal class *crystal_class* will be integrated into the `MrbState` *mrb_state*,\r\nwith the arguments *proc_args* as an `Array of Class`.\r\n\r\nIts new name will be *name*.\r","summary":"<p>Wraps a class method into mruby.</p>","abstract":false,"args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"proc_args","doc":null,"default_value":"[] of Class","external_name":"proc_args","restriction":""}],"args_string":"(mrb_state, crystal_class, name, proc, proc_args = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">Class</span>)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbWrap.cr#L103","def":{"name":"wrap_class_method","args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"proc_args","doc":null,"default_value":"[] of Class","external_name":"proc_args","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    MrbMacro.wrap_class_method_with_args(\n{{ mrb_state }}\n, \n{{ crystal_class }}\n, \n{{ name }}\n, \n{{ proc }}\n, \n{{ proc_args }}\n)\r\n  \n"}},{"id":"wrap_class_method_with_keywords(mrb_state,crystal_class,name,proc,keyword_args,regular_args=[]ofClass)-macro","html_id":"wrap_class_method_with_keywords(mrb_state,crystal_class,name,proc,keyword_args,regular_args=[]ofClass)-macro","name":"wrap_class_method_with_keywords","doc":"Wraps a class method into mruby, using keyword arguments.\r\n\r\nThe class method *proc* of the Crystal class *crystal_class* will be integrated into the `MrbState` *mrb_state*,\r\nwith the arguments *regular_args* as an `Array of Class` and *keyword_args* as a `Hash of Symbol => Class`.\r\nAlternatively, a `Tuple` with the `Class` and a default value for the `Class` can be used instead of the `Class`.\r\n\r\nIts new name will be *name*.\r","summary":"<p>Wraps a class method into mruby, using keyword arguments.</p>","abstract":false,"args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"keyword_args","doc":null,"default_value":"","external_name":"keyword_args","restriction":""},{"name":"regular_args","doc":null,"default_value":"[] of Class","external_name":"regular_args","restriction":""}],"args_string":"(mrb_state, crystal_class, name, proc, keyword_args, regular_args = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">Class</span>)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbWrap.cr#L114","def":{"name":"wrap_class_method_with_keywords","args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"keyword_args","doc":null,"default_value":"","external_name":"keyword_args","restriction":""},{"name":"regular_args","doc":null,"default_value":"[] of Class","external_name":"regular_args","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    MrbMacro.wrap_class_method_with_keyword_args(\n{{ mrb_state }}\n, \n{{ crystal_class }}\n, \n{{ name }}\n, \n{{ proc }}\n, \n{{ keyword_args }}\n, \n{{ regular_args }}\n)\r\n  \n"}},{"id":"wrap_constant(mrb_state,under_module,name,crystal_value)-macro","html_id":"wrap_constant(mrb_state,under_module,name,crystal_value)-macro","name":"wrap_constant","doc":"Wraps a constant value into mruby.\r\n\r\nThe value *crystal_value* will be integrated into the `MrbState` *mrb_state*,\r\nwith the name *name* and the parent `MrbModule` *under_module*.\r","summary":"<p>Wraps a constant value into mruby.</p>","abstract":false,"args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"under_module","doc":null,"default_value":"","external_name":"under_module","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"crystal_value","doc":null,"default_value":"","external_name":"crystal_value","restriction":""}],"args_string":"(mrb_state, under_module, name, crystal_value)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbWrap.cr#L173","def":{"name":"wrap_constant","args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"under_module","doc":null,"default_value":"","external_name":"under_module","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"crystal_value","doc":null,"default_value":"","external_name":"crystal_value","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    MrbInternal.mrb_define_const(\n{{ mrb_state }}\n, \n{{ under_module }}\n, \n{{ name }}\n, MrbCast.return_value(\n{{ mrb_state }}\n.to_unsafe, \n{{ crystal_value }}\n))\r\n  \n"}},{"id":"wrap_constructor(mrb_state,crystal_class,proc_args=[]ofClass)-macro","html_id":"wrap_constructor(mrb_state,crystal_class,proc_args=[]ofClass)-macro","name":"wrap_constructor","doc":"Wraps the constructor of a Crystal class into mruby.\r\n\r\nThe constructor for the Crystal class *crystal_class* will be integrated into the `MrbState` *mrb_state*,\r\nwith the arguments *proc_args* as an `Array of Class`.\r","summary":"<p>Wraps the constructor of a Crystal class into mruby.</p>","abstract":false,"args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":""},{"name":"proc_args","doc":null,"default_value":"[] of Class","external_name":"proc_args","restriction":""}],"args_string":"(mrb_state, crystal_class, proc_args = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">Class</span>)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbWrap.cr#L63","def":{"name":"wrap_constructor","args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":""},{"name":"proc_args","doc":null,"default_value":"[] of Class","external_name":"proc_args","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    MrbMacro.wrap_constructor_function_with_args(\n{{ mrb_state }}\n, \n{{ crystal_class }}\n, \n{{ crystal_class }}\n.new, \n{{ proc_args }}\n)\r\n  \n"}},{"id":"wrap_constructor_with_keywords(mrb_state,crystal_class,keyword_args,regular_args=[]ofClass)-macro","html_id":"wrap_constructor_with_keywords(mrb_state,crystal_class,keyword_args,regular_args=[]ofClass)-macro","name":"wrap_constructor_with_keywords","doc":"Wraps the constructor of a Crystal class into mruby, using keyword arguments.\r\n\r\nThe constructor for the Crystal class *crystal_class* will be integrated into the `MrbState` *mrb_state*,\r\nwith the arguments *regular_args* as an `Array of Class` and *keyword_args* as a `Hash of Symbol => Class`.\r\nAlternatively, a `Tuple` with the `Class` and a default value for the `Class` can be used instead of the `Class`.\r","summary":"<p>Wraps the constructor of a Crystal class into mruby, using keyword arguments.</p>","abstract":false,"args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":""},{"name":"keyword_args","doc":null,"default_value":"","external_name":"keyword_args","restriction":""},{"name":"regular_args","doc":null,"default_value":"[] of Class","external_name":"regular_args","restriction":""}],"args_string":"(mrb_state, crystal_class, keyword_args, regular_args = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">Class</span>)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbWrap.cr#L72","def":{"name":"wrap_constructor_with_keywords","args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":""},{"name":"keyword_args","doc":null,"default_value":"","external_name":"keyword_args","restriction":""},{"name":"regular_args","doc":null,"default_value":"[] of Class","external_name":"regular_args","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    MrbMacro.wrap_constructor_function_with_keyword_args(\n{{ mrb_state }}\n, \n{{ crystal_class }}\n, \n{{ crystal_class }}\n.new, \n{{ keyword_args }}\n, \n{{ regular_args }}\n)\r\n  \n"}},{"id":"wrap_getter(mrb_state,crystal_class,name,proc)-macro","html_id":"wrap_getter(mrb_state,crystal_class,name,proc)-macro","name":"wrap_getter","doc":"Wraps a getter into mruby.  \r\n\r\nThe getter *proc* of the Crystal class *crystal_class* will be integrated into the `MrbState` *mrb_state*.\r\n\r\nIts new name will be *name*.\r","summary":"<p>Wraps a getter into mruby.</p>","abstract":false,"args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""}],"args_string":"(mrb_state, crystal_class, name, proc)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbWrap.cr#L154","def":{"name":"wrap_getter","args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    MrbMacro.wrap_instance_function_with_args(\n{{ mrb_state }}\n, \n{{ crystal_class }}\n, \n{{ name }}\n, \n{{ proc }}\n)\r\n  \n"}},{"id":"wrap_instance_method(mrb_state,crystal_class,name,proc,proc_args=[]ofClass)-macro","html_id":"wrap_instance_method(mrb_state,crystal_class,name,proc,proc_args=[]ofClass)-macro","name":"wrap_instance_method","doc":"Wraps an instance method into mruby.\r\n\r\nThe instance method *proc* of the Crystal class *crystal_class* will be integrated into the `MrbState` *mrb_state*,\r\nwith the arguments *proc_args* as an `Array of Class`.\r\n\r\nIts new name will be *name*.\r","summary":"<p>Wraps an instance method into mruby.</p>","abstract":false,"args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"proc_args","doc":null,"default_value":"[] of Class","external_name":"proc_args","restriction":""}],"args_string":"(mrb_state, crystal_class, name, proc, proc_args = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">Class</span>)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbWrap.cr#L124","def":{"name":"wrap_instance_method","args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"proc_args","doc":null,"default_value":"[] of Class","external_name":"proc_args","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    MrbMacro.wrap_instance_function_with_args(\n{{ mrb_state }}\n, \n{{ crystal_class }}\n, \n{{ name }}\n, \n{{ proc }}\n, \n{{ proc_args }}\n)\r\n  \n"}},{"id":"wrap_instance_method_with_keywords(mrb_state,crystal_class,name,proc,keyword_args,regular_args=[]ofClass)-macro","html_id":"wrap_instance_method_with_keywords(mrb_state,crystal_class,name,proc,keyword_args,regular_args=[]ofClass)-macro","name":"wrap_instance_method_with_keywords","doc":"Wraps an instance method into mruby, using keyword arguments.\r\n\r\nThe instance method *proc* of the Crystal class *crystal_class* will be integrated into the `MrbState` *mrb_state*,\r\nwith the arguments *regular_args* as an `Array of Class` and *keyword_args* as a `Hash of Symbol => Class`.\r\nAlternatively, a `Tuple` with the `Class` and a default value for the `Class` can be used instead of the `Class`.\r\n\r\nIts new name will be *name*.\r","summary":"<p>Wraps an instance method into mruby, using keyword arguments.</p>","abstract":false,"args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"keyword_args","doc":null,"default_value":"","external_name":"keyword_args","restriction":""},{"name":"regular_args","doc":null,"default_value":"[] of Class","external_name":"regular_args","restriction":""}],"args_string":"(mrb_state, crystal_class, name, proc, keyword_args, regular_args = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">Class</span>)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbWrap.cr#L135","def":{"name":"wrap_instance_method_with_keywords","args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"keyword_args","doc":null,"default_value":"","external_name":"keyword_args","restriction":""},{"name":"regular_args","doc":null,"default_value":"[] of Class","external_name":"regular_args","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    MrbMacro.wrap_instance_function_with_keyword_args(\n{{ mrb_state }}\n, \n{{ crystal_class }}\n, \n{{ name }}\n, \n{{ proc }}\n, \n{{ keyword_args }}\n, \n{{ regular_args }}\n)\r\n  \n"}},{"id":"wrap_module(mrb_state,crystal_module,name,under=nil)-macro","html_id":"wrap_module(mrb_state,crystal_module,name,under=nil)-macro","name":"wrap_module","doc":"Wraps a Crystal module into an mruby module.\r\n\r\nThe module *crystal_module* will be integrated into the `MrbState` *mrb_state*,\r\nwith *name* as its new designation, returning an `MrbModule`.\r\n\r\nThe parent module can be specified with the `MrbModule` argument *under*.\r","summary":"<p>Wraps a Crystal module into an mruby module.</p>","abstract":false,"args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"crystal_module","doc":null,"default_value":"","external_name":"crystal_module","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"under","doc":null,"default_value":"nil","external_name":"under","restriction":""}],"args_string":"(mrb_state, crystal_module, name, under = <span class=\"n\">nil</span>)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbWrap.cr#L53","def":{"name":"wrap_module","args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"crystal_module","doc":null,"default_value":"","external_name":"crystal_module","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"under","doc":null,"default_value":"nil","external_name":"under","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    new_module = MrbModule.new(\n{{ mrb_state }}\n, \n{{ name }}\n, under: \n{{ under }}\n)\r\n    MrbModuleCache.register(\n{{ crystal_module }}\n, new_module)\r\n    MrbModuleCache.get(\n{{ crystal_module }}\n)\r\n  \n"}},{"id":"wrap_module_function(mrb_state,under_module,name,proc,proc_args=[]ofClass)-macro","html_id":"wrap_module_function(mrb_state,under_module,name,proc,proc_args=[]ofClass)-macro","name":"wrap_module_function","doc":"Wraps a module function into mruby.\r\n\r\nThe function *proc* under the `MrbModule` *under_module* will be integrated into the `MrbState` *mrb_state*,\r\nwith the arguments *proc_args* as an `Array of Class`.\r\n\r\nIts new name will be *name*.\r","summary":"<p>Wraps a module function into mruby.</p>","abstract":false,"args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"under_module","doc":null,"default_value":"","external_name":"under_module","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"proc_args","doc":null,"default_value":"[] of Class","external_name":"proc_args","restriction":""}],"args_string":"(mrb_state, under_module, name, proc, proc_args = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">Class</span>)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbWrap.cr#L82","def":{"name":"wrap_module_function","args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"under_module","doc":null,"default_value":"","external_name":"under_module","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"proc_args","doc":null,"default_value":"[] of Class","external_name":"proc_args","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    MrbMacro.wrap_module_function_with_args(\n{{ mrb_state }}\n, \n{{ under_module }}\n, \n{{ name }}\n, \n{{ proc }}\n, \n{{ proc_args }}\n)\r\n  \n"}},{"id":"wrap_module_function_with_keywords(mrb_state,under_module,name,proc,keyword_args,regular_args=[]ofClass)-macro","html_id":"wrap_module_function_with_keywords(mrb_state,under_module,name,proc,keyword_args,regular_args=[]ofClass)-macro","name":"wrap_module_function_with_keywords","doc":"Wraps a module function into mruby, using keyword arguments.\r\n\r\nThe function *proc* under the `MrbModule` *under_module* will be integrated into the `MrbState` *mrb_state*,\r\nwith the arguments *regular_args* as an `Array of Class` and *keyword_args* as a `Hash of Symbol => Class`.\r\nAlternatively, a `Tuple` with the `Class` and a default value for the `Class` can be used instead of the `Class`.\r\n\r\nIts new name will be *name*.\r","summary":"<p>Wraps a module function into mruby, using keyword arguments.</p>","abstract":false,"args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"under_module","doc":null,"default_value":"","external_name":"under_module","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"keyword_args","doc":null,"default_value":"","external_name":"keyword_args","restriction":""},{"name":"regular_args","doc":null,"default_value":"[] of Class","external_name":"regular_args","restriction":""}],"args_string":"(mrb_state, under_module, name, proc, keyword_args, regular_args = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">Class</span>)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbWrap.cr#L93","def":{"name":"wrap_module_function_with_keywords","args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"under_module","doc":null,"default_value":"","external_name":"under_module","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"keyword_args","doc":null,"default_value":"","external_name":"keyword_args","restriction":""},{"name":"regular_args","doc":null,"default_value":"[] of Class","external_name":"regular_args","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    MrbMacro.wrap_module_function_with_keyword_args(\n{{ mrb_state }}\n, \n{{ under_module }}\n, \n{{ name }}\n, \n{{ proc }}\n, \n{{ keyword_args }}\n, \n{{ regular_args }}\n)\r\n  \n"}},{"id":"wrap_property(mrb_state,crystal_class,name,proc,proc_arg)-macro","html_id":"wrap_property(mrb_state,crystal_class,name,proc,proc_arg)-macro","name":"wrap_property","doc":"Wraps a property into mruby.  \r\n\r\nThe property *proc* of the Crystal class *crystal_class* will be integrated into the `MrbState` *mrb_state*,\r\nwith the argument *proc_arg* as its respective `Class`.\r\n\r\nIts new name will be *name*.\r","summary":"<p>Wraps a property into mruby.</p>","abstract":false,"args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"proc_arg","doc":null,"default_value":"","external_name":"proc_arg","restriction":""}],"args_string":"(mrb_state, crystal_class, name, proc, proc_arg)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbWrap.cr#L164","def":{"name":"wrap_property","args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"proc_arg","doc":null,"default_value":"","external_name":"proc_arg","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    MrbWrap.wrap_getter(\n{{ mrb_state }}\n, \n{{ crystal_class }}\n, \n{{ name }}\n, \n{{ proc }}\n)\r\n    MrbWrap.wrap_setter(\n{{ mrb_state }}\n, \n{{ crystal_class }}\n, \n{{ name }}\n, \n{{ proc }}\n, \n{{ proc_arg }}\n)\r\n  \n"}},{"id":"wrap_setter(mrb_state,crystal_class,name,proc,proc_arg)-macro","html_id":"wrap_setter(mrb_state,crystal_class,name,proc,proc_arg)-macro","name":"wrap_setter","doc":"Wraps a setter into mruby.  \r\n\r\nThe setter *proc* (without the `=`) of the Crystal class *crystal_class* will be integrated into the `MrbState` *mrb_state*,\r\nwith the argument *proc_arg* as its respective `Class`.\r\n\r\nIts new name will be *name*.\r","summary":"<p>Wraps a setter into mruby.</p>","abstract":false,"args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"proc_arg","doc":null,"default_value":"","external_name":"proc_arg","restriction":""}],"args_string":"(mrb_state, crystal_class, name, proc, proc_arg)","source_link":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbWrap.cr#L145","def":{"name":"wrap_setter","args":[{"name":"mrb_state","doc":null,"default_value":"","external_name":"mrb_state","restriction":""},{"name":"crystal_class","doc":null,"default_value":"","external_name":"crystal_class","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":""},{"name":"proc_arg","doc":null,"default_value":"","external_name":"proc_arg","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    MrbMacro.wrap_instance_function_with_args(\n{{ mrb_state }}\n, \n{{ crystal_class }}\n, \n{{ name }}\n, \n{{ proc }}\n, \n{{ proc_arg }}\n, \"=\")\r\n  \n"}}],"types":[{"html_id":"anyolite/MrbWrap/Interpreted","path":"MrbWrap/Interpreted.html","kind":"alias","full_name":"MrbWrap::Interpreted","name":"Interpreted","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"src/MrbWrap.cr","line_number":20,"url":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbWrap.cr#L20"}],"repository_name":"anyolite","program":false,"enum":false,"alias":true,"aliased":"(Bool | Float32 | Int64 | MrbWrap::Undefined | String | Nil)","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"anyolite/MrbWrap","kind":"module","full_name":"MrbWrap","name":"MrbWrap"},"doc":"Alias for all possible mruby return types\r","summary":"<p>Alias for all possible mruby return types\r</p>","class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"anyolite/MrbWrap/Undefined","path":"MrbWrap/Undefined.html","kind":"struct","full_name":"MrbWrap::Undefined","name":"Undefined","abstract":false,"superclass":{"html_id":"anyolite/Struct","kind":"struct","full_name":"Struct","name":"Struct"},"ancestors":[{"html_id":"anyolite/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"anyolite/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"anyolite/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/MrbWrap.cr","line_number":23,"url":"https://github.com/Anyolite/anyolite/blob/v0.2.0/src/MrbWrap.cr#L23"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"anyolite/MrbWrap","kind":"module","full_name":"MrbWrap","name":"MrbWrap"},"doc":"Special struct representing undefined values in mruby\r","summary":"<p>Special struct representing undefined values in mruby\r</p>","class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]}]}]}}