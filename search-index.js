crystal_doc_search_index_callback({"repository_name":"anyolite","body":"# Anyolite\n\nAnyolite is a Crystal shard which adds a fully functional mruby (or even regular Ruby) interpreter to Crystal.\n\n![Test](https://github.com/Anyolite/anyolite/workflows/Test/badge.svg)\n\n![Release](https://img.shields.io/github/v/release/Anyolite/anyolite)\n![ReleaseDate](https://img.shields.io/github/release-date/Anyolite/anyolite)\n\n![License](https://img.shields.io/github/license/Anyolite/anyolite)\n\n# Description\n\nAnyolite allows for wrapping Crystal classes and functions into Ruby with little effort.\nThis way, Ruby can be used as a scripting language to Crystal projects, with the major advantage of a similar syntax.\n\nUseful links for an overview:\n* Demo project: https://github.com/Anyolite/ScapoLite\n* Wiki: https://github.com/Anyolite/anyolite/wiki\n* Documentation: https://anyolite.github.io/anyolite\n\n# Features\n\n* Bindings to an mruby interpreter\n* Near complete support to regular Ruby as alternative implementation (also known as MRI or CRuby)\n* Wrapping of nearly arbitrary Crystal classes and methods to Ruby\n* Easy syntax without unnecessary boilerplate code\n* Simple system to prevent garbage collector conflicts\n* Support for keyword arguments and default values\n* Objects, arrays, hashes, structs, enums and unions as function arguments and return values are completely valid\n* Ruby methods can be called at runtime as long as all their possible return value types are known\n* Ruby closures can be handled as regular variables\n* Methods and constants can be excluded, modified or renamed with annotations\n* Options to compile scripts directly into the executable\n\n# Prerequisites\n\nYou need to have the following programs installed (and in your PATH variable, if you are on Windows):\n* Ruby (for building mruby)\n* Rake (for building the whole project)\n* Git (for downloading mruby)\n* GCC or Microsoft Visual Studio 19 (for building the object files required for Anyolite, depending on your OS)\n\n## Using regular Ruby instead of mruby\n\nIt is possible to use Anyolite with regular Ruby (MRI) instead of mruby. An instruction to install MRI can be found at [Using Ruby instead of mruby](https://github.com/Anyolite/anyolite/wiki/Using-Ruby-instead-of-mruby) in the wiki.\n\n# Installing\n\nPut this shard as a requirement into your shard.yml project file and then call\n```bash\nshards install\n```\nfrom a terminal or the MSVC Developer Console (on Windows).\n\nAlternatively, you can clone this repository into the lib folder of your project and run\n```bash\nrake build_shard\n```\nmanually to install the shard without using the crystal shards program.\n\nIf you want to use other options for Anyolite, visit [Changing build configurations](https://github.com/Anyolite/anyolite/wiki/Changing-build-configurations) in the wiki.\n\n# How to use\n\nImagine a Crystal class for a really bad RPG:\n\n```crystal\nmodule RPGTest\n  class Entity\n    property hp : Int32\n\n    def initialize(@hp : Int32)\n    end\n\n    def damage(diff : Int32)\n      @hp -= diff\n    end\n\n    def yell(sound : String, loud : Bool = false)\n      if loud\n        puts \"Entity yelled: #{sound.upcase}\"\n      else\n        puts \"Entity yelled: #{sound}\"\n      end\n    end\n\n    def absorb_hp_from(other : Entity)\n      @hp += other.hp\n      other.hp = 0\n    end\n  end\nend\n```\n\nNow, you want to wrap this class in Ruby. All you need to do is to execute the following code in Crystal (current commit; see documentation page for the version of the latest release):\n\n```crystal\nrequire \"anyolite\"\n\nAnyolite::RbInterpreter.create do |rb|\n  Anyolite.wrap(rb, RPGTest)\n\n  rb.load_script_from_file(\"examples/hp_example.rb\")\nend\n```\n\nWell, that's it already. \nThe last line in the block calls the following example script:\n\n```ruby\na = RPGTest::Entity.new(hp: 20)\na.damage(diff: 13)\nputs a.hp\n\nb = RPGTest::Entity.new(hp: 10)\na.absorb_hp_from(other: b)\nputs a.hp\nputs b.hp\nb.yell(sound: 'Ouch, you stole my HP!', loud: true)\na.yell(sound: 'Well, take better care of your public attributes!')\n```\n\nThe example above gives a good overview over the things you can already do with Anyolite.\nMore features will be added in the future.\n\n# Limitations\n\nSee [Limitations and solutions](https://github.com/Anyolite/anyolite/wiki/Limitations-and-solutions) in the Wiki section for a detailed list.\n\n# Why this name?\n\nhttps://en.wikipedia.org/wiki/Anyolite\n\nIn short, it is a rare variant of the crystalline mineral called zoisite, with ruby and other crystal shards (of pargasite) embedded.\n\nThe term 'anyoli' means 'green' in the Maasai language, thus naming 'anyolite'.\n\n# Roadmap\n\n## Upcoming releases\n\nCurrently none\n\n### Later releases\n\n* [ ] Automated generation of Ruby documentations for wrapped functions\n* [ ] MRI support on Windows (does currently not work for some reason)\n* [ ] Mac support and continuous integration\n\n### Wishlist, entries might not be possible to implement\n\n* [ ] Splat argument and/or arbitrary keyword passing\n* [ ] Support for slices and bytes\n* [ ] Classes as argument type\n* [ ] Resolve context even in generic type union arguments\n* [ ] General improvement of type resolution\n* [ ] Bignum support\n","program":{"html_id":"anyolite/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"locations":[],"repository_name":"anyolite","program":true,"enum":false,"alias":false,"const":false,"types":[{"html_id":"anyolite/Anyolite","path":"Anyolite.html","kind":"module","full_name":"Anyolite","name":"Anyolite","abstract":false,"locations":[{"filename":"src/Macro.cr","line_number":1,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Macro.cr#L1"},{"filename":"src/Main.cr","line_number":15,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L15"},{"filename":"src/Preloader.cr","line_number":1,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Preloader.cr#L1"},{"filename":"src/RbArgCache.cr","line_number":1,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbArgCache.cr#L1"},{"filename":"src/RbCast.cr","line_number":1,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbCast.cr#L1"},{"filename":"src/RbClass.cr","line_number":1,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbClass.cr#L1"},{"filename":"src/RbClassCache.cr","line_number":1,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbClassCache.cr#L1"},{"filename":"src/RbInterpreter.cr","line_number":1,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbInterpreter.cr#L1"},{"filename":"src/RbModule.cr","line_number":1,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbModule.cr#L1"},{"filename":"src/RbRefTable.cr","line_number":1,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbRefTable.cr#L1"},{"filename":"src/RbTypeCache.cr","line_number":1,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbTypeCache.cr#L1"},{"filename":"src/helper_classes/AnyolitePointer.cr","line_number":1,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/helper_classes/AnyolitePointer.cr#L1"},{"filename":"src/helper_classes/HelperClasses.cr","line_number":3,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/helper_classes/HelperClasses.cr#L3"},{"filename":"src/implementations/mruby/FormatString.cr","line_number":1,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/implementations/mruby/FormatString.cr#L1"},{"filename":"src/implementations/mruby/Implementation.cr","line_number":5,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/implementations/mruby/Implementation.cr#L5"},{"filename":"src/implementations/mruby/KeywordArgStruct.cr","line_number":1,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/implementations/mruby/KeywordArgStruct.cr#L1"},{"filename":"src/implementations/mruby/RbCore.cr","line_number":1,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/implementations/mruby/RbCore.cr#L1"},{"filename":"src/macros/ArgConversions.cr","line_number":1,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/ArgConversions.cr#L1"},{"filename":"src/macros/ArgTuples.cr","line_number":1,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/ArgTuples.cr#L1"},{"filename":"src/macros/FunctionCalls.cr","line_number":1,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/FunctionCalls.cr#L1"},{"filename":"src/macros/FunctionGenerators.cr","line_number":1,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/FunctionGenerators.cr#L1"},{"filename":"src/macros/ObjectAllocations.cr","line_number":1,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/ObjectAllocations.cr#L1"},{"filename":"src/macros/RubyConversions.cr","line_number":1,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/RubyConversions.cr#L1"},{"filename":"src/macros/RubyTypes.cr","line_number":1,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/RubyTypes.cr#L1"},{"filename":"src/macros/UnionCasts.cr","line_number":1,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/UnionCasts.cr#L1"},{"filename":"src/macros/WrapAll.cr","line_number":1,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/WrapAll.cr#L1"},{"filename":"src/macros/WrapMethodIndex.cr","line_number":1,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/WrapMethodIndex.cr#L1"},{"filename":"src/macros/Wrappers.cr","line_number":1,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/Wrappers.cr#L1"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"Undef","name":"Undef","value":"Undefined.new","doc":"Undefined mruby value.","summary":"<p>Undefined mruby value.</p>"}],"doc":"Main wrapper module, which should be covering most of the use cases.","summary":"<p>Main wrapper module, which should be covering most of the use cases.</p>","macros":[{"html_id":"call_rb_block(block_value,args=nil,cast_to=nil,context=nil)-macro","name":"call_rb_block","doc":"Calls the Ruby block *block_value*, given as a `RbRef`, with the arguments *args*\nas an `Array` of castable Crystal values (`nil` for none).\n\nIf *cast_to* is set to a `Class` or similar, it will automatically cast\nthe result to a Crystal value of that class, otherwise, it will return\na `RbRef` value containing the result.\n\nIf needed, *context* can be set to a `Path` in order to specify *cast_to*.","summary":"<p>Calls the Ruby block <em>block_value</em>, given as a <code><a href=\"Anyolite/RbRef.html\">RbRef</a></code>, with the arguments <em>args</em> as an <code>Array</code> of castable Crystal values (<code>nil</code> for none).</p>","abstract":false,"args":[{"name":"block_value","external_name":"block_value","restriction":""},{"name":"args","default_value":"nil","external_name":"args","restriction":""},{"name":"cast_to","default_value":"nil","external_name":"cast_to","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""}],"args_string":"(block_value, args = nil, cast_to = nil, context = nil)","args_html":"(block_value, args = <span class=\"n\">nil</span>, cast_to = <span class=\"n\">nil</span>, context = <span class=\"n\">nil</span>)","location":{"filename":"src/Main.cr","line_number":181,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L181"},"def":{"name":"call_rb_block","args":[{"name":"block_value","external_name":"block_value","restriction":""},{"name":"args","default_value":"nil","external_name":"args","restriction":""},{"name":"cast_to","default_value":"nil","external_name":"cast_to","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""}],"visibility":"Public","body":"    \n%rb\n = Anyolite::RbRefTable.get_current_interpreter\n    \n{% options = {:context => context} %}\n\n\n    if \n%rb_block\n = \n{{ block_value }}\n\n      \n{% if args %}\n        %argc = {{ args }}.size\n        %argv = Pointer(Anyolite::RbCore::RbValue).malloc(size: %argc) do |i|\n          Anyolite::RbCast.return_value(%rb.to_unsafe, {{ args }}[i])\n        end\n\n        %block_return_value = Anyolite::RbCore.rb_call_block_with_args(%rb, %rb_block.value, %argc, %argv)\n      {% else %}\n        %block_return_value = Anyolite::RbCore.rb_call_block(%rb, %rb_block.value, Anyolite::RbCast.return_nil)\n      {% end %}\n\n\n      \n{% if cast_to %}\n        Anyolite::Macro.convert_from_ruby_to_crystal(%rb.to_unsafe, %block_return_value, {{ cast_to }}, options: {{ options }})\n      {% else %}\n        Anyolite::RbRef.new(%block_return_value)\n      {% end %}\n\n    \nelse\n      raise \"Empty block argument.\"\n    \nend\n  \n"}},{"html_id":"call_rb_class_method(name,args=nil,cast_to=nil,context=nil)-macro","name":"call_rb_class_method","doc":"Calls the Ruby method with `String` or `Symbol` *name* for `self.class` and the\narguments *args* as an `Array` of castable Crystal values (`nil` for none).\n\nIf *cast_to* is set to a `Class` or similar, it will automatically cast\nthe result to a Crystal value of that class, otherwise, it will return\na `RbRef` value containing the result.\n\nIf needed, *context* can be set to a `Path` in order to specify *cast_to*.","summary":"<p>Calls the Ruby method with <code>String</code> or <code>Symbol</code> <em>name</em> for <code>self.class</code> and the arguments <em>args</em> as an <code>Array</code> of castable Crystal values (<code>nil</code> for none).</p>","abstract":false,"args":[{"name":"name","external_name":"name","restriction":""},{"name":"args","default_value":"nil","external_name":"args","restriction":""},{"name":"cast_to","default_value":"nil","external_name":"cast_to","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""}],"args_string":"(name, args = nil, cast_to = nil, context = nil)","args_html":"(name, args = <span class=\"n\">nil</span>, cast_to = <span class=\"n\">nil</span>, context = <span class=\"n\">nil</span>)","location":{"filename":"src/Main.cr","line_number":359,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L359"},"def":{"name":"call_rb_class_method","args":[{"name":"name","external_name":"name","restriction":""},{"name":"args","default_value":"nil","external_name":"args","restriction":""},{"name":"cast_to","default_value":"nil","external_name":"cast_to","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""}],"visibility":"Public","body":"    Anyolite.call_rb_method_of_class(self.class, \n{{ name }}\n, \n{{ args }}\n, cast_to: \n{{ cast_to }}\n, context: \n{{ context }}\n)\n  \n"}},{"html_id":"call_rb_method(name,args=nil,cast_to=nil,context=nil)-macro","name":"call_rb_method","doc":"Calls the Ruby method with `String` or `Symbol` *name* for `self` and the\narguments *args* as an `Array` of castable Crystal values (`nil` for none).\n\nIf *cast_to* is set to a `Class` or similar, it will automatically cast\nthe result to a Crystal value of that class, otherwise, it will return\na `RbRef` value containing the result.\n\nIf needed, *context* can be set to a `Path` in order to specify *cast_to*.","summary":"<p>Calls the Ruby method with <code>String</code> or <code>Symbol</code> <em>name</em> for <code>self</code> and the arguments <em>args</em> as an <code>Array</code> of castable Crystal values (<code>nil</code> for none).</p>","abstract":false,"args":[{"name":"name","external_name":"name","restriction":""},{"name":"args","default_value":"nil","external_name":"args","restriction":""},{"name":"cast_to","default_value":"nil","external_name":"cast_to","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""}],"args_string":"(name, args = nil, cast_to = nil, context = nil)","args_html":"(name, args = <span class=\"n\">nil</span>, cast_to = <span class=\"n\">nil</span>, context = <span class=\"n\">nil</span>)","location":{"filename":"src/Main.cr","line_number":347,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L347"},"def":{"name":"call_rb_method","args":[{"name":"name","external_name":"name","restriction":""},{"name":"args","default_value":"nil","external_name":"args","restriction":""},{"name":"cast_to","default_value":"nil","external_name":"cast_to","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""}],"visibility":"Public","body":"    Anyolite.call_rb_method_of_object(self, \n{{ name }}\n, \n{{ args }}\n, cast_to: \n{{ cast_to }}\n, context: \n{{ context }}\n)\n  \n"}},{"html_id":"call_rb_method_of_class(crystal_class,name,args=nil,cast_to=nil,context=nil)-macro","name":"call_rb_method_of_class","doc":"Calls the Ruby method with `String` or `Symbol` *name*\nfor the Crystal `Class` or `Module` *crystal_class* and the\narguments *args* as an `Array` of castable Crystal values (`nil` for none).\n\nIf *cast_to* is set to a `Class` or similar, it will automatically cast\nthe result to a Crystal value of that class, otherwise, it will return\na `RbRef` value containing the result.\n\nIf needed, *context* can be set to a `Path` in order to specify *cast_to*.","summary":"<p>Calls the Ruby method with <code>String</code> or <code>Symbol</code> <em>name</em> for the Crystal <code>Class</code> or <code>Module</code> <em>crystal_class</em> and the arguments <em>args</em> as an <code>Array</code> of castable Crystal values (<code>nil</code> for none).</p>","abstract":false,"args":[{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"args","default_value":"nil","external_name":"args","restriction":""},{"name":"cast_to","default_value":"nil","external_name":"cast_to","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""}],"args_string":"(crystal_class, name, args = nil, cast_to = nil, context = nil)","args_html":"(crystal_class, name, args = <span class=\"n\">nil</span>, cast_to = <span class=\"n\">nil</span>, context = <span class=\"n\">nil</span>)","location":{"filename":"src/Main.cr","line_number":372,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L372"},"def":{"name":"call_rb_method_of_class","args":[{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"args","default_value":"nil","external_name":"args","restriction":""},{"name":"cast_to","default_value":"nil","external_name":"cast_to","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""}],"visibility":"Public","body":"    \n%rb_class\n = Anyolite.get_rb_class_obj_of(\n{{ crystal_class }}\n)\n    Anyolite.call_rb_method_of_object(\n%rb_class\n, \n{{ name }}\n, \n{{ args }}\n, cast_to: \n{{ cast_to }}\n, context: \n{{ context }}\n)\n  \n"}},{"html_id":"call_rb_method_of_object(value,name,args,cast_to=nil,context=nil)-macro","name":"call_rb_method_of_object","doc":"Calls the Ruby method with `String` or `Symbol` *name* for the Crystal object *value* and the\narguments *args* as an `Array` of castable Crystal values (`nil` for none).\n\nIf *cast_to* is set to a `Class` or similar, it will automatically cast\nthe result to a Crystal value of that class, otherwise, it will return\na `RbRef` value containing the result.\n\nIf needed, *context* can be set to a `Path` in order to specify *cast_to*.","summary":"<p>Calls the Ruby method with <code>String</code> or <code>Symbol</code> <em>name</em> for the Crystal object <em>value</em> and the arguments <em>args</em> as an <code>Array</code> of castable Crystal values (<code>nil</code> for none).</p>","abstract":false,"args":[{"name":"value","external_name":"value","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"args","external_name":"args","restriction":""},{"name":"cast_to","default_value":"nil","external_name":"cast_to","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""}],"args_string":"(value, name, args, cast_to = nil, context = nil)","args_html":"(value, name, args, cast_to = <span class=\"n\">nil</span>, context = <span class=\"n\">nil</span>)","location":{"filename":"src/Main.cr","line_number":309,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L309"},"def":{"name":"call_rb_method_of_object","args":[{"name":"value","external_name":"value","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"args","external_name":"args","restriction":""},{"name":"cast_to","default_value":"nil","external_name":"cast_to","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""}],"visibility":"Public","body":"    if !\n{{ name }}\n.is_a?(Symbol) && !\n{{ name }}\n.is_a?(String)\n      raise \"Given name \n{{ name }}\n is neither a String nor a Symbol.\"\n    \nend\n    \n    \n%rb\n = Anyolite::RbRefTable.get_current_interpreter\n    \n%obj\n = \n{{ value }}\n.is_a?(Anyolite::RbCore::RbValue) || \n{{ value }}\n.is_a?(Anyolite::RbRef) ? \n{{ value }}\n : Anyolite::RbCast.return_value(\n%rb\n.to_unsafe, \n{{ value }}\n)\n    \n%name\n = Anyolite::RbCore.convert_to_rb_sym(\n%rb\n, \n{{ name }}\n.to_s)\n\n    \n{% options = {:context => context} %}\n\n\n    \n{% if args %}\n      %argc = {{ args }}.size\n      %argv = Pointer(Anyolite::RbCore::RbValue).malloc(size: %argc) do |i|\n        Anyolite::RbCast.return_value(%rb.to_unsafe, {{ args }}[i])\n      end\n    {% else %}\n      %argc = 0\n      %argv = [] of Anyolite::RbCore::RbValue\n    {% end %}\n\n\n    \n%call_result\n = Anyolite::RbCore.rb_funcall_argv(\n%rb\n, \n%obj\n, \n%name\n, \n%argc\n, \n%argv\n)\n    \n    \n{% if cast_to %}\n      Anyolite::Macro.convert_from_ruby_to_crystal(%rb.to_unsafe, %call_result, {{ cast_to }}, options: {{ options }})\n    {% else %}\n      Anyolite::RbRef.new(%call_result)\n    {% end %}\n\n  \n"}},{"html_id":"cast_to_crystal(rbref,cast_type,context=nil)-macro","name":"cast_to_crystal","doc":"Casts the `RbRef` *rbref* to the Crystal `Class` *cast_type*.\n\nIf needed, *context* can be set to a `Path` in order to specify *cast_to*.","summary":"<p>Casts the <code><a href=\"Anyolite/RbRef.html\">RbRef</a></code> <em>rbref</em> to the Crystal <code>Class</code> <em>cast_type</em>.</p>","abstract":false,"args":[{"name":"rbref","external_name":"rbref","restriction":""},{"name":"cast_type","external_name":"cast_type","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""}],"args_string":"(rbref, cast_type, context = nil)","args_html":"(rbref, cast_type, context = <span class=\"n\">nil</span>)","location":{"filename":"src/Main.cr","line_number":210,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L210"},"def":{"name":"cast_to_crystal","args":[{"name":"rbref","external_name":"rbref","restriction":""},{"name":"cast_type","external_name":"cast_type","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""}],"visibility":"Public","body":"    \n%rb\n = Anyolite::RbRefTable.get_current_interpreter\n    \n{% options = {:context => context} %}\n\n\n    Anyolite::Macro.convert_from_ruby_to_crystal(\n%rb\n.to_unsafe, \n{{ rbref }}\n.value, \n{{ cast_type }}\n, options: \n{{ options }}\n)\n  \n"}},{"html_id":"does_class_respond_to(crystal_class,name)-macro","name":"does_class_respond_to","doc":"Checks whether the Ruby function *name* (`String` or `Symbol`) is defined\nfor the Crystal `Class` or `Module` *crystal_class*.","summary":"<p>Checks whether the Ruby function <em>name</em> (<code>String</code> or <code>Symbol</code>) is defined for the Crystal <code>Class</code> or <code>Module</code> <em>crystal_class</em>.</p>","abstract":false,"args":[{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"name","external_name":"name","restriction":""}],"args_string":"(crystal_class, name)","args_html":"(crystal_class, name)","location":{"filename":"src/Main.cr","line_number":287,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L287"},"def":{"name":"does_class_respond_to","args":[{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"name","external_name":"name","restriction":""}],"visibility":"Public","body":"    if !\n{{ name }}\n.is_a?(Symbol) && !\n{{ name }}\n.is_a?(String)\n      raise \"Given name \n{{ name }}\n is neither a String nor a Symbol.\"\n    \nend\n\n    \n%rb\n = Anyolite::RbRefTable.get_current_interpreter\n    \n%rb_class\n = Anyolite.get_rb_class_obj_of(\n{{ crystal_class }}\n)\n    \n%name\n = Anyolite::RbCore.convert_to_rb_sym(\n%rb\n, \n{{ name }}\n.to_s)\n\n    Anyolite::RbCore.rb_respond_to(\n%rb\n, \n%rb_class\n, \n%name\n) == 0 ? false : true\n  \n"}},{"html_id":"does_obj_respond_to(value,name)-macro","name":"does_obj_respond_to","doc":"Checks whether the Ruby function *name* (`String` or `Symbol`) is defined\nfor the Crystal object *value*.","summary":"<p>Checks whether the Ruby function <em>name</em> (<code>String</code> or <code>Symbol</code>) is defined for the Crystal object <em>value</em>.</p>","abstract":false,"args":[{"name":"value","external_name":"value","restriction":""},{"name":"name","external_name":"name","restriction":""}],"args_string":"(value, name)","args_html":"(value, name)","location":{"filename":"src/Main.cr","line_number":273,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L273"},"def":{"name":"does_obj_respond_to","args":[{"name":"value","external_name":"value","restriction":""},{"name":"name","external_name":"name","restriction":""}],"visibility":"Public","body":"    if !\n{{ name }}\n.is_a?(Symbol) && !\n{{ name }}\n.is_a?(String)\n      raise \"Given name \n{{ name }}\n is neither a String nor a Symbol.\"\n    \nend\n\n    \n%rb\n = Anyolite::RbRefTable.get_current_interpreter\n    \n%obj\n = \n{{ value }}\n.is_a?(Anyolite::RbCore::RbValue) || \n{{ value }}\n.is_a?(Anyolite::RbRef) ? \n{{ value }}\n : Anyolite::RbCast.return_value(\n%rb\n.to_unsafe, \n{{ value }}\n)\n    \n%name\n = Anyolite::RbCore.convert_to_rb_sym(\n%rb\n, \n{{ name }}\n.to_s)\n\n    Anyolite::RbCore.rb_respond_to(\n%rb\n, \n%obj\n, \n%name\n) == 0 ? false : true\n  \n"}},{"html_id":"eval(str,cast_to=nil,context=nil)-macro","name":"eval","doc":"Calls the Ruby expression *str*.\n\nIf *cast_to* is set to a `Class` or similar, it will automatically cast\nthe result to a Crystal value of that class, otherwise, it will return\na `RbRef` value containing the result.\n\nIf needed, *context* can be set to a `Path` in order to specify *cast_to*.","summary":"<p>Calls the Ruby expression <em>str</em>.</p>","abstract":false,"args":[{"name":"str","external_name":"str","restriction":""},{"name":"cast_to","default_value":"nil","external_name":"cast_to","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""}],"args_string":"(str, cast_to = nil, context = nil)","args_html":"(str, cast_to = <span class=\"n\">nil</span>, context = <span class=\"n\">nil</span>)","location":{"filename":"src/Main.cr","line_number":384,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L384"},"def":{"name":"eval","args":[{"name":"str","external_name":"str","restriction":""},{"name":"cast_to","default_value":"nil","external_name":"cast_to","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""}],"visibility":"Public","body":"    \n%rb\n = Anyolite::RbRefTable.get_current_interpreter\n    \n{% options = {:context => context} %}\n\n\n    \n%call_result\n = \n%rb\n.execute_script_line(\n{{ str }}\n)\n    \n    \n{% if cast_to %}\n      Anyolite::Macro.convert_from_ruby_to_crystal(%rb.to_unsafe, %call_result, {{ cast_to }}, options: {{ options }})\n    {% else %}\n      Anyolite::RbRef.new(%call_result)\n    {% end %}\n\n  \n"}},{"html_id":"get_cv(crystal_class,name,cast_to=nil,context=nil)-macro","name":"get_cv","doc":"Gets the Ruby class variable with `String` or `Symbol` *name* for the Crystal `Class` or `Module` *crystal_class*.\n\nIf *cast_to* is set to a `Class` or similar, it will automatically cast\nthe result to a Crystal value of that class, otherwise, it will return\na `RbRef` value containing the result.\n\nIf needed, *context* can be set to a `Path` in order to specify *cast_to*.","summary":"<p>Gets the Ruby class variable with <code>String</code> or <code>Symbol</code> <em>name</em> for the Crystal <code>Class</code> or <code>Module</code> <em>crystal_class</em>.</p>","abstract":false,"args":[{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"cast_to","default_value":"nil","external_name":"cast_to","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""}],"args_string":"(crystal_class, name, cast_to = nil, context = nil)","args_html":"(crystal_class, name, cast_to = <span class=\"n\">nil</span>, context = <span class=\"n\">nil</span>)","location":{"filename":"src/Main.cr","line_number":450,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L450"},"def":{"name":"get_cv","args":[{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"cast_to","default_value":"nil","external_name":"cast_to","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""}],"visibility":"Public","body":"    \n%rb\n = Anyolite::RbRefTable.get_current_interpreter\n    \n%rb_class\n = Anyolite.get_rb_class_obj_of(\n{{ crystal_class }}\n)\n    \n%name\n = Anyolite::RbCore.convert_to_rb_sym(\n%rb\n, \n{{ name }}\n.to_s)\n\n    \n{% options = {:context => context} %}\n\n\n    \n%result\n = Anyolite::RbCore.rb_cv_get(\n%rb\n, \n%rb_class\n, \n%name\n)\n\n    \n{% if cast_to %}\n      Anyolite::Macro.convert_from_ruby_to_crystal(%rb.to_unsafe, %result, {{ cast_to }}, options: {{ options }})\n    {% else %}\n      Anyolite::RbRef.new(%result)\n    {% end %}\n\n  \n"}},{"html_id":"get_gv(name,cast_to=nil,context=nil)-macro","name":"get_gv","doc":"Gets the Ruby global variable with `String` or `Symbol` *name*.\n\nIf *cast_to* is set to a `Class` or similar, it will automatically cast\nthe result to a Crystal value of that class, otherwise, it will return\na `RbRef` value containing the result.\n\nIf needed, *context* can be set to a `Path` in order to specify *cast_to*.","summary":"<p>Gets the Ruby global variable with <code>String</code> or <code>Symbol</code> <em>name</em>.</p>","abstract":false,"args":[{"name":"name","external_name":"name","restriction":""},{"name":"cast_to","default_value":"nil","external_name":"cast_to","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""}],"args_string":"(name, cast_to = nil, context = nil)","args_html":"(name, cast_to = <span class=\"n\">nil</span>, context = <span class=\"n\">nil</span>)","location":{"filename":"src/Main.cr","line_number":490,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L490"},"def":{"name":"get_gv","args":[{"name":"name","external_name":"name","restriction":""},{"name":"cast_to","default_value":"nil","external_name":"cast_to","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""}],"visibility":"Public","body":"    \n%rb\n = Anyolite::RbRefTable.get_current_interpreter\n    \n{% options = {:context => context} %}\n\n\n    \n%result\n = Anyolite::RbCore.rb_gv_get(\n%rb\n, \n{{ name }}\n.to_s)\n\n    \n{% if cast_to %}\n      Anyolite::Macro.convert_from_ruby_to_crystal(%rb.to_unsafe, %result, {{ cast_to }}, options: {{ options }})\n    {% else %}\n      Anyolite::RbRef.new(%result)\n    {% end %}\n\n  \n"}},{"html_id":"get_iv(object,name,cast_to=nil,context=nil)-macro","name":"get_iv","doc":"Gets the Ruby instance variable with `String` or `Symbol` *name* for the Crystal object *object*.\n\nIf *cast_to* is set to a `Class` or similar, it will automatically cast\nthe result to a Crystal value of that class, otherwise, it will return\na `RbRef` value containing the result.\n\nIf needed, *context* can be set to a `Path` in order to specify *cast_to*.","summary":"<p>Gets the Ruby instance variable with <code>String</code> or <code>Symbol</code> <em>name</em> for the Crystal object <em>object</em>.</p>","abstract":false,"args":[{"name":"object","external_name":"object","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"cast_to","default_value":"nil","external_name":"cast_to","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""}],"args_string":"(object, name, cast_to = nil, context = nil)","args_html":"(object, name, cast_to = <span class=\"n\">nil</span>, context = <span class=\"n\">nil</span>)","location":{"filename":"src/Main.cr","line_number":410,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L410"},"def":{"name":"get_iv","args":[{"name":"object","external_name":"object","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"cast_to","default_value":"nil","external_name":"cast_to","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""}],"visibility":"Public","body":"    \n%rb\n = Anyolite::RbRefTable.get_current_interpreter\n    \n%obj\n = \n{{ object }}\n.is_a?(Anyolite::RbCore::RbValue) || \n{{ object }}\n.is_a?(Anyolite::RbRef) ? \n{{ object }}\n : Anyolite::RbCast.return_value(\n%rb\n.to_unsafe, \n{{ object }}\n)\n    \n%name\n = Anyolite::RbCore.convert_to_rb_sym(\n%rb\n, \n{{ name }}\n.to_s)\n\n    \n{% options = {:context => context} %}\n\n\n    \n%result\n = Anyolite::RbCore.rb_iv_get(\n%rb\n, \n%obj\n, \n%name\n)\n\n    \n{% if cast_to %}\n      Anyolite::Macro.convert_from_ruby_to_crystal(%rb.to_unsafe, %result, {{ cast_to }}, options: {{ options }})\n    {% else %}\n      Anyolite::RbRef.new(%result)\n    {% end %}\n\n  \n"}},{"html_id":"get_rb_class_obj_of(crystal_class)-macro","name":"get_rb_class_obj_of","doc":"Returns the `RbValue` of the `Class` or `Module` *crystal_class*.","summary":"<p>Returns the <code>RbValue</code> of the <code>Class</code> or <code>Module</code> <em>crystal_class</em>.</p>","abstract":false,"args":[{"name":"crystal_class","external_name":"crystal_class","restriction":""}],"args_string":"(crystal_class)","args_html":"(crystal_class)","location":{"filename":"src/Main.cr","line_number":152,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L152"},"def":{"name":"get_rb_class_obj_of","args":[{"name":"crystal_class","external_name":"crystal_class","restriction":""}],"visibility":"Public","body":"    Anyolite::RbCore.get_rb_obj_value(Anyolite::RbClassCache.get(\n{{ crystal_class }}\n))\n  \n"}},{"html_id":"implementation-macro","name":"implementation","doc":"Returns the current implementation (either `:mruby` or `:mri`) as a `Symbol`.","summary":"<p>Returns the current implementation (either <code>:mruby</code> or <code>:mri</code>) as a <code>Symbol</code>.</p>","abstract":false,"location":{"filename":"src/Main.cr","line_number":138,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L138"},"def":{"name":"implementation","visibility":"Public","body":"    \n{% if flag?(:anyolite_implementation_ruby_3) %}\n      :mri\n    {% else %}\n      :mruby\n    {% end %}\n\n  \n"}},{"html_id":"link_libraries-macro","name":"link_libraries","abstract":false,"location":{"filename":"src/implementations/mruby/RbCore.cr","line_number":2,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/implementations/mruby/RbCore.cr#L2"},"def":{"name":"link_libraries","visibility":"Public","body":"    \n{% build_path = env(\"ANYOLITE_BUILD_PATH\") ? env(\"ANYOLITE_BUILD_PATH\") : \"build\" %}\n\r\n    \r\n    \n{% if flag?(:win32) %}\r\n      @[Link(ldflags: \"#{__DIR__}/../../../{{ build_path.id }}/mruby/lib/libmruby.lib -DMRB_INT64 msvcrt.lib Ws2_32.lib\")]\r\n      @[Link(ldflags: \"#{__DIR__}/../../../{{ build_path.id }}/glue/mruby/return_functions.obj -DMRB_INT64\")]\r\n      @[Link(ldflags: \"#{__DIR__}/../../../{{ build_path.id }}/glue/mruby/data_helper.obj -DMRB_INT64\")]\r\n      @[Link(ldflags: \"#{__DIR__}/../../../{{ build_path.id }}/glue/mruby/script_helper.obj -DMRB_INT64\")]\r\n      @[Link(ldflags: \"#{__DIR__}/../../../{{ build_path.id }}/glue/mruby/error_helper.obj -DMRB_INT64\")]\r\n    {% else %}\r\n      @[Link(ldflags: \"#{__DIR__}/../../../{{ build_path.id }}/mruby/lib/libmruby.a -DMRB_INT64\")]\r\n      @[Link(ldflags: \"#{__DIR__}/../../../{{ build_path.id }}/glue/mruby/return_functions.o -DMRB_INT64\")]\r\n      @[Link(ldflags: \"#{__DIR__}/../../../{{ build_path.id }}/glue/mruby/data_helper.o -DMRB_INT64\")]\r\n      @[Link(ldflags: \"#{__DIR__}/../../../{{ build_path.id }}/glue/mruby/script_helper.o -DMRB_INT64\")]\r\n      @[Link(ldflags: \"#{__DIR__}/../../../{{ build_path.id }}/glue/mruby/error_helper.o -DMRB_INT64\")]\r\n    {% end %}\n\r\n  \n"}},{"html_id":"obtain_given_rb_block-macro","name":"obtain_given_rb_block","doc":"Returns a cached block argument (or `nil`, if none given) in form of a `RbRef`, if enabled.\nOtherwise, an error will be triggered.","summary":"<p>Returns a cached block argument (or <code>nil</code>, if none given) in form of a <code><a href=\"Anyolite/RbRef.html\">RbRef</a></code>, if enabled.</p>","abstract":false,"location":{"filename":"src/Main.cr","line_number":158,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L158"},"def":{"name":"obtain_given_rb_block","visibility":"Public","body":"    \n%rb\n = Anyolite::RbRefTable.get_current_interpreter\n\n    if \n%bc\n = Anyolite::RbArgCache.get_block_cache\n      if Anyolite::RbCast.check_for_nil(\n%bc\n.value)\n        nil\n      \nelse\n        \n%bc_ref\n = Anyolite::RbRef.new(\n%bc\n.value)\n        \n%bc_ref\n\n      \nend\n    \nelse\n      raise \"This method does not accept block arguments.\"\n    \nend\n  \n"}},{"html_id":"raise_argument_error(message)-macro","name":"raise_argument_error","doc":"Raises a Ruby argument error with `String` *message*.","summary":"<p>Raises a Ruby argument error with <code>String</code> <em>message</em>.</p>","abstract":false,"args":[{"name":"message","external_name":"message","restriction":""}],"args_string":"(message)","args_html":"(message)","location":{"filename":"src/Main.cr","line_number":230,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L230"},"def":{"name":"raise_argument_error","args":[{"name":"message","external_name":"message","restriction":""}],"visibility":"Public","body":"    \n%rb\n = Anyolite::RbRefTable.get_current_interpreter\n    Anyolite::RbCore.rb_raise_argument_error(\n%rb\n.to_unsafe, \n{{ message }}\n.to_unsafe)\n  \n"}},{"html_id":"raise_index_error(message)-macro","name":"raise_index_error","doc":"Raises a Ruby index error with `String` *message*.","summary":"<p>Raises a Ruby index error with <code>String</code> <em>message</em>.</p>","abstract":false,"args":[{"name":"message","external_name":"message","restriction":""}],"args_string":"(message)","args_html":"(message)","location":{"filename":"src/Main.cr","line_number":236,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L236"},"def":{"name":"raise_index_error","args":[{"name":"message","external_name":"message","restriction":""}],"visibility":"Public","body":"    \n%rb\n = Anyolite::RbRefTable.get_current_interpreter\n    Anyolite::RbCore.rb_raise_index_error(\n%rb\n.to_unsafe, \n{{ message }}\n.to_unsafe)\n  \n"}},{"html_id":"raise_key_error(message)-macro","name":"raise_key_error","doc":"Raises a Ruby key error with `String` *message*.","summary":"<p>Raises a Ruby key error with <code>String</code> <em>message</em>.</p>","abstract":false,"args":[{"name":"message","external_name":"message","restriction":""}],"args_string":"(message)","args_html":"(message)","location":{"filename":"src/Main.cr","line_number":266,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L266"},"def":{"name":"raise_key_error","args":[{"name":"message","external_name":"message","restriction":""}],"visibility":"Public","body":"    \n%rb\n = Anyolite::RbRefTable.get_current_interpreter\n    Anyolite::RbCore.rb_raise_key_error(\n%rb\n.to_unsafe, \n{{ message }}\n.to_unsafe)\n  \n"}},{"html_id":"raise_name_error(message)-macro","name":"raise_name_error","doc":"Raises a Ruby name error with `String` *message*.","summary":"<p>Raises a Ruby name error with <code>String</code> <em>message</em>.</p>","abstract":false,"args":[{"name":"message","external_name":"message","restriction":""}],"args_string":"(message)","args_html":"(message)","location":{"filename":"src/Main.cr","line_number":248,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L248"},"def":{"name":"raise_name_error","args":[{"name":"message","external_name":"message","restriction":""}],"visibility":"Public","body":"    \n%rb\n = Anyolite::RbRefTable.get_current_interpreter\n    Anyolite::RbCore.rb_raise_name_error(\n%rb\n.to_unsafe, \n{{ message }}\n.to_unsafe)\n  \n"}},{"html_id":"raise_not_implemented_error(message)-macro","name":"raise_not_implemented_error","doc":"Raises a Ruby non-implementation error with `String` *message*.","summary":"<p>Raises a Ruby non-implementation error with <code>String</code> <em>message</em>.</p>","abstract":false,"args":[{"name":"message","external_name":"message","restriction":""}],"args_string":"(message)","args_html":"(message)","location":{"filename":"src/Main.cr","line_number":260,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L260"},"def":{"name":"raise_not_implemented_error","args":[{"name":"message","external_name":"message","restriction":""}],"visibility":"Public","body":"    \n%rb\n = Anyolite::RbRefTable.get_current_interpreter\n    Anyolite::RbCore.rb_raise_not_implemented_error(\n%rb\n.to_unsafe, \n{{ message }}\n.to_unsafe)\n  \n"}},{"html_id":"raise_range_error(message)-macro","name":"raise_range_error","doc":"Raises a Ruby range error with `String` *message*.","summary":"<p>Raises a Ruby range error with <code>String</code> <em>message</em>.</p>","abstract":false,"args":[{"name":"message","external_name":"message","restriction":""}],"args_string":"(message)","args_html":"(message)","location":{"filename":"src/Main.cr","line_number":242,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L242"},"def":{"name":"raise_range_error","args":[{"name":"message","external_name":"message","restriction":""}],"visibility":"Public","body":"    \n%rb\n = Anyolite::RbRefTable.get_current_interpreter\n    Anyolite::RbCore.rb_raise_range_error(\n%rb\n.to_unsafe, \n{{ message }}\n.to_unsafe)\n  \n"}},{"html_id":"raise_runtime_error(message)-macro","name":"raise_runtime_error","doc":"Raises a Ruby runtime error with `String` *message*.","summary":"<p>Raises a Ruby runtime error with <code>String</code> <em>message</em>.</p>","abstract":false,"args":[{"name":"message","external_name":"message","restriction":""}],"args_string":"(message)","args_html":"(message)","location":{"filename":"src/Main.cr","line_number":218,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L218"},"def":{"name":"raise_runtime_error","args":[{"name":"message","external_name":"message","restriction":""}],"visibility":"Public","body":"    \n%rb\n = Anyolite::RbRefTable.get_current_interpreter\n    Anyolite::RbCore.rb_raise_runtime_error(\n%rb\n.to_unsafe, \n{{ message }}\n.to_unsafe)\n  \n"}},{"html_id":"raise_script_error(message)-macro","name":"raise_script_error","doc":"Raises a Ruby script error with `String` *message*.","summary":"<p>Raises a Ruby script error with <code>String</code> <em>message</em>.</p>","abstract":false,"args":[{"name":"message","external_name":"message","restriction":""}],"args_string":"(message)","args_html":"(message)","location":{"filename":"src/Main.cr","line_number":254,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L254"},"def":{"name":"raise_script_error","args":[{"name":"message","external_name":"message","restriction":""}],"visibility":"Public","body":"    \n%rb\n = Anyolite::RbRefTable.get_current_interpreter\n    Anyolite::RbCore.rb_raise_script_error(\n%rb\n.to_unsafe, \n{{ message }}\n.to_unsafe)\n  \n"}},{"html_id":"raise_type_error(message)-macro","name":"raise_type_error","doc":"Raises a Ruby type error with `String` *message*.","summary":"<p>Raises a Ruby type error with <code>String</code> <em>message</em>.</p>","abstract":false,"args":[{"name":"message","external_name":"message","restriction":""}],"args_string":"(message)","args_html":"(message)","location":{"filename":"src/Main.cr","line_number":224,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L224"},"def":{"name":"raise_type_error","args":[{"name":"message","external_name":"message","restriction":""}],"visibility":"Public","body":"    \n%rb\n = Anyolite::RbRefTable.get_current_interpreter\n    Anyolite::RbCore.rb_raise_type_error(\n%rb\n.to_unsafe, \n{{ message }}\n.to_unsafe)\n  \n"}},{"html_id":"referenced_in_ruby?(value)-macro","name":"referenced_in_ruby?","doc":"Checks whether *value* is referenced in the current reference table.","summary":"<p>Checks whether <em>value</em> is referenced in the current reference table.</p>","abstract":false,"args":[{"name":"value","external_name":"value","restriction":""}],"args_string":"(value)","args_html":"(value)","location":{"filename":"src/Main.cr","line_number":147,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L147"},"def":{"name":"referenced_in_ruby?","args":[{"name":"value","external_name":"value","restriction":""}],"visibility":"Public","body":"    !!Anyolite::RbRefTable.is_registered?(Anyolite::RbRefTable.get_object_id(\n{{ value }}\n))\n  \n"}},{"html_id":"self_in_rb-macro","name":"self_in_rb","doc":"Returns current object as a `RbRef`","summary":"<p>Returns current object as a <code><a href=\"Anyolite/RbRef.html\">RbRef</a></code></p>","abstract":false,"location":{"filename":"src/Main.cr","line_number":398,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L398"},"def":{"name":"self_in_rb","visibility":"Public","body":"    \n%rb\n = Anyolite::RbRefTable.get_current_interpreter\n    Anyolite::RbRef.new(Anyolite::RbCast.return_value(\n%rb\n.to_unsafe, self))\n  \n"}},{"html_id":"set_cv(crystal_class,name,value)-macro","name":"set_cv","doc":"Sets the Ruby class variable with `String` or `Symbol` *name* for the Crystal `Class` or `Module` *crystal_class*\nto the value *value*.\n\nIf *cast_to* is set to a `Class` or similar, it will automatically cast\nthe result to a Crystal value of that class, otherwise, it will return\na `RbRef` value containing the result.\n\nIf needed, *context* can be set to a `Path` in order to specify *cast_to*.","summary":"<p>Sets the Ruby class variable with <code>String</code> or <code>Symbol</code> <em>name</em> for the Crystal <code>Class</code> or <code>Module</code> <em>crystal_class</em> to the value <em>value</em>.</p>","abstract":false,"args":[{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"value","external_name":"value","restriction":""}],"args_string":"(crystal_class, name, value)","args_html":"(crystal_class, name, value)","location":{"filename":"src/Main.cr","line_number":474,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L474"},"def":{"name":"set_cv","args":[{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"value","external_name":"value","restriction":""}],"visibility":"Public","body":"    \n%rb\n = Anyolite::RbRefTable.get_current_interpreter\n    \n%rb_class\n = Anyolite.get_rb_class_obj_of(\n{{ crystal_class }}\n)\n    \n%name\n = Anyolite::RbCore.convert_to_rb_sym(\n%rb\n, \n{{ name }}\n.to_s)\n    \n%value\n = Anyolite::RbCast.return_value(\n%rb\n.to_unsafe, \n{{ value }}\n)\n\n    Anyolite::RbCore.rb_cv_set(\n%rb\n, \n%rb_class\n, \n%name\n, \n%value\n)\n  \n"}},{"html_id":"set_gv(name,value)-macro","name":"set_gv","doc":"Sets the Ruby global variable with `String` or `Symbol` *name*\nto the Crystal value *value*.\n\nIf *cast_to* is set to a `Class` or similar, it will automatically cast\nthe result to a Crystal value of that class, otherwise, it will return\na `RbRef` value containing the result.\n\nIf needed, *context* can be set to a `Path` in order to specify *cast_to*.","summary":"<p>Sets the Ruby global variable with <code>String</code> or <code>Symbol</code> <em>name</em> to the Crystal value <em>value</em>.</p>","abstract":false,"args":[{"name":"name","external_name":"name","restriction":""},{"name":"value","external_name":"value","restriction":""}],"args_string":"(name, value)","args_html":"(name, value)","location":{"filename":"src/Main.cr","line_number":511,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L511"},"def":{"name":"set_gv","args":[{"name":"name","external_name":"name","restriction":""},{"name":"value","external_name":"value","restriction":""}],"visibility":"Public","body":"    \n%rb\n = Anyolite::RbRefTable.get_current_interpreter\n    \n%value\n = Anyolite::RbCast.return_value(\n%rb\n.to_unsafe, \n{{ value }}\n)\n\n    Anyolite::RbCore.rb_gv_set(\n%rb\n, \n{{ name }}\n.to_s, \n%value\n)\n  \n"}},{"html_id":"set_iv(object,name,value)-macro","name":"set_iv","doc":"Sets the Ruby instance variable with `String` or `Symbol` *name* for the Crystal object *object*\nto the Crystal value *value*.\n\nIf *cast_to* is set to a `Class` or similar, it will automatically cast\nthe result to a Crystal value of that class, otherwise, it will return\na `RbRef` value containing the result.\n\nIf needed, *context* can be set to a `Path` in order to specify *cast_to*.","summary":"<p>Sets the Ruby instance variable with <code>String</code> or <code>Symbol</code> <em>name</em> for the Crystal object <em>object</em> to the Crystal value <em>value</em>.</p>","abstract":false,"args":[{"name":"object","external_name":"object","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"value","external_name":"value","restriction":""}],"args_string":"(object, name, value)","args_html":"(object, name, value)","location":{"filename":"src/Main.cr","line_number":434,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L434"},"def":{"name":"set_iv","args":[{"name":"object","external_name":"object","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"value","external_name":"value","restriction":""}],"visibility":"Public","body":"    \n%rb\n = Anyolite::RbRefTable.get_current_interpreter\n    \n%obj\n = \n{{ object }}\n.is_a?(Anyolite::RbCore::RbValue) || \n{{ object }}\n.is_a?(Anyolite::RbRef) ? \n{{ object }}\n : Anyolite::RbCast.return_value(\n%rb\n.to_unsafe, \n{{ object }}\n)\n    \n%name\n = Anyolite::RbCore.convert_to_rb_sym(\n%rb\n, \n{{ name }}\n.to_s)\n    \n%value\n = Anyolite::RbCast.return_value(\n%rb\n.to_unsafe, \n{{ value }}\n)\n\n    Anyolite::RbCore.rb_iv_set(\n%rb\n, \n%obj\n, \n%name\n, \n%value\n)\n  \n"}},{"html_id":"wrap(rb_interpreter,crystal_module_or_class,under=nil,instance_method_exclusions=[]ofString|Symbol,class_method_exclusions=[]ofString|Symbol,constant_exclusions=[]ofString|Symbol,connect_to_superclass=false,include_ancestor_methods=true,use_enum_methods=false,wrap_equality_method=false,overwrite=false,verbose=false)-macro","name":"wrap","doc":"Wraps a whole class or module structure under a module into mruby.\n\nThe class or module *crystal_module_or_class* will be integrated\ninto the `RbInterpreter` *rb_interpreter*,\nwith the optional parent module *under*.\nMethods or constants to be excluded can be specified as\n`Symbol` or `String` in the `Array`\n*class_method_exclusions* (for class methods) or\n*constant_exclusions* (for constants).\n\nIf *wrap_equality_method* is set, the `==` method will be wrapped\nautomatically.\nSetting *connect_to_superclass* to `false` will force the algorithm\nto ignore any superclass.\nSetting *include_ancestor_methods* will include any methods\nfrom nontrivial ancestor classes.\nThe option *overwrite* will iterate through all functions and\nconstants again if set to `true`.\nIf *verbose* is set, wrapping information will be displayed.","summary":"<p>Wraps a whole class or module structure under a module into mruby.</p>","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_module_or_class","external_name":"crystal_module_or_class","restriction":""},{"name":"under","default_value":"nil","external_name":"under","restriction":""},{"name":"instance_method_exclusions","default_value":"[] of String | Symbol","external_name":"instance_method_exclusions","restriction":""},{"name":"class_method_exclusions","default_value":"[] of String | Symbol","external_name":"class_method_exclusions","restriction":""},{"name":"constant_exclusions","default_value":"[] of String | Symbol","external_name":"constant_exclusions","restriction":""},{"name":"connect_to_superclass","default_value":"false","external_name":"connect_to_superclass","restriction":""},{"name":"include_ancestor_methods","default_value":"true","external_name":"include_ancestor_methods","restriction":""},{"name":"use_enum_methods","default_value":"false","external_name":"use_enum_methods","restriction":""},{"name":"wrap_equality_method","default_value":"false","external_name":"wrap_equality_method","restriction":""},{"name":"overwrite","default_value":"false","external_name":"overwrite","restriction":""},{"name":"verbose","default_value":"false","external_name":"verbose","restriction":""}],"args_string":"(rb_interpreter, crystal_module_or_class, under = nil, instance_method_exclusions = [] of String | Symbol, class_method_exclusions = [] of String | Symbol, constant_exclusions = [] of String | Symbol, connect_to_superclass = false, include_ancestor_methods = true, use_enum_methods = false, wrap_equality_method = false, overwrite = false, verbose = false)","args_html":"(rb_interpreter, crystal_module_or_class, under = <span class=\"n\">nil</span>, instance_method_exclusions = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">String</span> <span class=\"o\">|</span> <span class=\"t\">Symbol</span>, class_method_exclusions = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">String</span> <span class=\"o\">|</span> <span class=\"t\">Symbol</span>, constant_exclusions = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">String</span> <span class=\"o\">|</span> <span class=\"t\">Symbol</span>, connect_to_superclass = <span class=\"n\">false</span>, include_ancestor_methods = <span class=\"n\">true</span>, use_enum_methods = <span class=\"n\">false</span>, wrap_equality_method = <span class=\"n\">false</span>, overwrite = <span class=\"n\">false</span>, verbose = <span class=\"n\">false</span>)","location":{"filename":"src/Main.cr","line_number":1106,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L1106"},"def":{"name":"wrap","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_module_or_class","external_name":"crystal_module_or_class","restriction":""},{"name":"under","default_value":"nil","external_name":"under","restriction":""},{"name":"instance_method_exclusions","default_value":"[] of String | Symbol","external_name":"instance_method_exclusions","restriction":""},{"name":"class_method_exclusions","default_value":"[] of String | Symbol","external_name":"class_method_exclusions","restriction":""},{"name":"constant_exclusions","default_value":"[] of String | Symbol","external_name":"constant_exclusions","restriction":""},{"name":"connect_to_superclass","default_value":"false","external_name":"connect_to_superclass","restriction":""},{"name":"include_ancestor_methods","default_value":"true","external_name":"include_ancestor_methods","restriction":""},{"name":"use_enum_methods","default_value":"false","external_name":"use_enum_methods","restriction":""},{"name":"wrap_equality_method","default_value":"false","external_name":"wrap_equality_method","restriction":""},{"name":"overwrite","default_value":"false","external_name":"overwrite","restriction":""},{"name":"verbose","default_value":"false","external_name":"verbose","restriction":""}],"visibility":"Public","body":"    _needs_more_iterations = [] of String\n    \n%previous_iterations\n = [] of String\n    \n%first_run\n = true\n\n    while \n%first_run\n || !_needs_more_iterations.empty?\n      \n%previous_iterations\n = _needs_more_iterations\n      _needs_more_iterations = [] of String\n\n      \n{% if !crystal_module_or_class.is_a?(Path) %}\n        {% puts(\"\\e[31m> WARNING: Object #{crystal_module_or_class} of #{crystal_module_or_class.class_name.id} is neither a class nor module, so it will be skipped\\e[0m\") %}\n      {% else %}{% if crystal_module_or_class.resolve.module? %}\n        Anyolite.wrap_module_with_methods({{ rb_interpreter }}, {{ crystal_module_or_class }}, under: {{ under }},\n          class_method_exclusions: {{ class_method_exclusions }},\n          constant_exclusions: {{ constant_exclusions }},\n          overwrite: {{ overwrite }},\n          verbose: {{ verbose }}\n        )\n      {% else %}{% if crystal_module_or_class.resolve.class? || crystal_module_or_class.resolve.struct? %}\n        Anyolite.wrap_class_with_methods({{ rb_interpreter }}, {{ crystal_module_or_class }}, under: {{ under }},\n          instance_method_exclusions: {{ instance_method_exclusions }},\n          class_method_exclusions: {{ class_method_exclusions }},\n          constant_exclusions: {{ constant_exclusions }},\n          use_enum_methods: {{ use_enum_methods }},\n          wrap_equality_method: {{ wrap_equality_method || crystal_module_or_class.resolve.struct? }},\n          connect_to_superclass: {{ connect_to_superclass }},\n          include_ancestor_methods: {{ include_ancestor_methods }},\n          overwrite: {{ overwrite }},\n          verbose: {{ verbose }}\n        )\n      {% else %}{% if crystal_module_or_class.resolve.union? %}\n        {% puts(\"\\e[31m> WARNING: Wrapping of unions not supported, thus skipping #{crystal_module_or_class}\\e[0m\") %}\n      {% else %}{% if crystal_module_or_class.resolve < Enum %}\n        Anyolite.wrap_class_with_methods({{ rb_interpreter }}, {{ crystal_module_or_class }}, under: {{ under }},\n          instance_method_exclusions: {{ instance_method_exclusions }},\n          class_method_exclusions: {{ class_method_exclusions }},\n          constant_exclusions: {{ constant_exclusions }},\n          use_enum_methods: true,\n          wrap_equality_method: true,\n          connect_to_superclass: {{ connect_to_superclass }},\n          include_ancestor_methods: {{ include_ancestor_methods }},\n          overwrite: {{ overwrite }},\n          verbose: {{ verbose }}\n        )\n      {% else %}{% if crystal_module_or_class.resolve.is_a?(TypeNode) %}\n        Anyolite.wrap_class_with_methods({{ rb_interpreter }}, {{ crystal_module_or_class }}, under: {{ under }},\n          instance_method_exclusions: {{ instance_method_exclusions }},\n          class_method_exclusions: {{ class_method_exclusions }},\n          constant_exclusions: {{ constant_exclusions }},\n          use_enum_methods: {{ use_enum_methods }},\n          wrap_equality_method: {{ wrap_equality_method }},\n          connect_to_superclass: {{ connect_to_superclass }},\n          include_ancestor_methods: {{ include_ancestor_methods }},\n          overwrite: {{ overwrite }},\n          verbose: {{ verbose }}\n        )\n      {% else %}\n        {% puts(\"\\e[31m> WARNING: Could not resolve #{crystal_module_or_class}, so it will be skipped\\e[0m\") %}\n      {% end %}{% end %}{% end %}{% end %}{% end %}{% end %}\n\n\n      \n%first_run\n = false\n\n      if !_needs_more_iterations.empty? && _needs_more_iterations == \n%previous_iterations\n\n        raise \"Could not wrap the following classes: #{_needs_more_iterations.inspect}\"\n      \nend\n    \nend\n  \n"}},{"html_id":"wrap_class(rb_interpreter,crystal_class,name,under=nil,superclass=nil)-macro","name":"wrap_class","doc":"Wraps a Crystal class directly into an mruby class.\n\nThe Crystal `Class` *crystal_class* will be integrated into the `RbInterpreter` *rb_interpreter*,\nwith *name* as its new designation, returning an `Anyolite::RbClass`.\n\nTo inherit from another mruby class, specify an `Anyolite::RbClass` as a *superclass*.\n\nEach class can be defined in a specifiy module by setting *under* to a `Anyolite::RbModule`.","summary":"<p>Wraps a Crystal class directly into an mruby class.</p>","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"under","default_value":"nil","external_name":"under","restriction":""},{"name":"superclass","default_value":"nil","external_name":"superclass","restriction":""}],"args_string":"(rb_interpreter, crystal_class, name, under = nil, superclass = nil)","args_html":"(rb_interpreter, crystal_class, name, under = <span class=\"n\">nil</span>, superclass = <span class=\"n\">nil</span>)","location":{"filename":"src/Main.cr","line_number":526,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L526"},"def":{"name":"wrap_class","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"under","default_value":"nil","external_name":"under","restriction":""},{"name":"superclass","default_value":"nil","external_name":"superclass","restriction":""}],"visibility":"Public","body":"    \n%new_class\n = Anyolite::RbClass.new(\n{{ rb_interpreter }}\n, \n{{ name }}\n, under: Anyolite::RbClassCache.get(\n{{ under }}\n), superclass: Anyolite::RbClassCache.get(\n{{ superclass }}\n))\n    Anyolite::RbCore.set_instance_tt_as_data(\n%new_class\n)\n    Anyolite::RbClassCache.register(\n{{ crystal_class }}\n, \n%new_class\n)\n    Anyolite::RbClassCache.get(\n{{ crystal_class }}\n)\n  \n"}},{"html_id":"wrap_class_method(rb_interpreter,crystal_class,name,proc,proc_args=nil,operator=\"\",context=nil,return_nil=false,block_arg_number=nil,block_return_type=nil,store_block_arg=false)-macro","name":"wrap_class_method","doc":"Wraps a class method into mruby.\n\nThe class method *proc* of the Crystal `Class` *crystal_class* will be integrated into the `RbInterpreter` *rb_interpreter*,\nwith the arguments *proc_args* as an `Array of Class`.\n\nIts new name will be *name*.\n\nThe value *operator* will append the specified `String`\nto the final name and *context* can give the function a `Path` for resolving types correctly.\nThe value *return_nil* will override any returned value with `nil`.\n\nThe arguments *block_arg_number* and *block_return_type* can be set to an `Int` and a `Class`,\nrespectively, in order to require a block argument. If *store_block_arg* is set to `true`,\nany block argument given will be stored in a cache.","summary":"<p>Wraps a class method into mruby.</p>","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"proc_args","default_value":"nil","external_name":"proc_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""},{"name":"return_nil","default_value":"false","external_name":"return_nil","restriction":""},{"name":"block_arg_number","default_value":"nil","external_name":"block_arg_number","restriction":""},{"name":"block_return_type","default_value":"nil","external_name":"block_return_type","restriction":""},{"name":"store_block_arg","default_value":"false","external_name":"store_block_arg","restriction":""}],"args_string":"(rb_interpreter, crystal_class, name, proc, proc_args = nil, operator = \"\", context = nil, return_nil = false, block_arg_number = nil, block_return_type = nil, store_block_arg = false)","args_html":"(rb_interpreter, crystal_class, name, proc, proc_args = <span class=\"n\">nil</span>, operator = <span class=\"s\">&quot;&quot;</span>, context = <span class=\"n\">nil</span>, return_nil = <span class=\"n\">false</span>, block_arg_number = <span class=\"n\">nil</span>, block_return_type = <span class=\"n\">nil</span>, store_block_arg = <span class=\"n\">false</span>)","location":{"filename":"src/Main.cr","line_number":659,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L659"},"def":{"name":"wrap_class_method","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"proc_args","default_value":"nil","external_name":"proc_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""},{"name":"return_nil","default_value":"false","external_name":"return_nil","restriction":""},{"name":"block_arg_number","default_value":"nil","external_name":"block_arg_number","restriction":""},{"name":"block_return_type","default_value":"nil","external_name":"block_return_type","restriction":""},{"name":"store_block_arg","default_value":"false","external_name":"store_block_arg","restriction":""}],"visibility":"Public","body":"    \n{% options = {:context => context, :return_nil => return_nil, :block_arg_number => block_arg_number, :block_return_type => block_return_type, :store_block_arg => store_block_arg} %}\n\n    Anyolite::Macro.wrap_class_method_with_args(\n{{ rb_interpreter }}\n, \n{{ crystal_class }}\n, \n{{ name }}\n, \n{{ proc }}\n, \n{{ proc_args }}\n, operator: \n{{ operator }}\n, options: \n{{ options }}\n)\n  \n"}},{"html_id":"wrap_class_method_with_keywords(rb_interpreter,crystal_class,name,proc,keyword_args,regular_args=nil,operator=\"\",context=nil,return_nil=false,block_arg_number=nil,block_return_type=nil,store_block_arg=false)-macro","name":"wrap_class_method_with_keywords","doc":"Wraps a class method into mruby, using keyword arguments.\n\nThe class method *proc* of the Crystal `Class` *crystal_class* will be integrated into the `RbInterpreter` *rb_interpreter*,\nwith the arguments *regular_args* as an `Array of Class` and *keyword_args* as an `Array of TypeDeclaration`.\n\nIts new name will be *name*.\n\nThe value *operator* will append the specified `String`\nto the final name and *context* can give the function a `Path` for resolving types correctly.\nThe value *return_nil* will override any returned value with `nil`.\n\nThe arguments *block_arg_number* and *block_return_type* can be set to an `Int` and a `Class`,\nrespectively, in order to require a block argument. If *store_block_arg* is set to `true`,\nany block argument given will be stored in a cache.","summary":"<p>Wraps a class method into mruby, using keyword arguments.</p>","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"keyword_args","external_name":"keyword_args","restriction":""},{"name":"regular_args","default_value":"nil","external_name":"regular_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""},{"name":"return_nil","default_value":"false","external_name":"return_nil","restriction":""},{"name":"block_arg_number","default_value":"nil","external_name":"block_arg_number","restriction":""},{"name":"block_return_type","default_value":"nil","external_name":"block_return_type","restriction":""},{"name":"store_block_arg","default_value":"false","external_name":"store_block_arg","restriction":""}],"args_string":"(rb_interpreter, crystal_class, name, proc, keyword_args, regular_args = nil, operator = \"\", context = nil, return_nil = false, block_arg_number = nil, block_return_type = nil, store_block_arg = false)","args_html":"(rb_interpreter, crystal_class, name, proc, keyword_args, regular_args = <span class=\"n\">nil</span>, operator = <span class=\"s\">&quot;&quot;</span>, context = <span class=\"n\">nil</span>, return_nil = <span class=\"n\">false</span>, block_arg_number = <span class=\"n\">nil</span>, block_return_type = <span class=\"n\">nil</span>, store_block_arg = <span class=\"n\">false</span>)","location":{"filename":"src/Main.cr","line_number":686,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L686"},"def":{"name":"wrap_class_method_with_keywords","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"keyword_args","external_name":"keyword_args","restriction":""},{"name":"regular_args","default_value":"nil","external_name":"regular_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""},{"name":"return_nil","default_value":"false","external_name":"return_nil","restriction":""},{"name":"block_arg_number","default_value":"nil","external_name":"block_arg_number","restriction":""},{"name":"block_return_type","default_value":"nil","external_name":"block_return_type","restriction":""},{"name":"store_block_arg","default_value":"false","external_name":"store_block_arg","restriction":""}],"visibility":"Public","body":"    \n{% options = {:context => context, :return_nil => return_nil, :block_arg_number => block_arg_number, :block_return_type => block_return_type, :store_block_arg => store_block_arg} %}\n\n    Anyolite::Macro.wrap_class_method_with_keyword_args(\n{{ rb_interpreter }}\n, \n{{ crystal_class }}\n, \n{{ name }}\n, \n{{ proc }}\n, \n{{ keyword_args }}\n, \n{{ regular_args }}\n, operator: \n{{ operator }}\n, options: \n{{ options }}\n)\n  \n"}},{"html_id":"wrap_class_with_methods(rb_interpreter,crystal_class,under=nil,instance_method_exclusions=[]ofString|Symbol,class_method_exclusions=[]ofString|Symbol,constant_exclusions=[]ofString|Symbol,use_enum_methods=false,wrap_equality_method=false,connect_to_superclass=true,include_ancestor_methods=true,overwrite=false,verbose=false)-macro","name":"wrap_class_with_methods","doc":"Wraps a whole class structure under a module into mruby.\n\nThe `Class` *crystal_class* will be integrated into the `RbInterpreter` *rb_interpreter*,\nwith the optional parent module *under*.\nMethods or constants to be excluded can be specified as\n`Symbol` or `String` in the `Array`\n*instance_method_exclusions* (for instance methods),\n*class_method_exclusions* (for class methods) or\n*constant_exclusions* (for constants).\n\nEnum classes can be wrapped by setting *use_enum_methods*.\nIf *wrap_equality_method* is set, the `==` method will be wrapped\nautomatically.\nSetting *connect_to_superclass* to `false` will force the algorithm\nto ignore any superclass.\nSetting *include_ancestor_methods* will include any methods\nfrom nontrivial ancestor classes.\nThe option *overwrite* will iterate through all functions and\nconstants again if set to `true`.\nIf *verbose* is set, wrapping information will be displayed.","summary":"<p>Wraps a whole class structure under a module into mruby.</p>","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"under","default_value":"nil","external_name":"under","restriction":""},{"name":"instance_method_exclusions","default_value":"[] of String | Symbol","external_name":"instance_method_exclusions","restriction":""},{"name":"class_method_exclusions","default_value":"[] of String | Symbol","external_name":"class_method_exclusions","restriction":""},{"name":"constant_exclusions","default_value":"[] of String | Symbol","external_name":"constant_exclusions","restriction":""},{"name":"use_enum_methods","default_value":"false","external_name":"use_enum_methods","restriction":""},{"name":"wrap_equality_method","default_value":"false","external_name":"wrap_equality_method","restriction":""},{"name":"connect_to_superclass","default_value":"true","external_name":"connect_to_superclass","restriction":""},{"name":"include_ancestor_methods","default_value":"true","external_name":"include_ancestor_methods","restriction":""},{"name":"overwrite","default_value":"false","external_name":"overwrite","restriction":""},{"name":"verbose","default_value":"false","external_name":"verbose","restriction":""}],"args_string":"(rb_interpreter, crystal_class, under = nil, instance_method_exclusions = [] of String | Symbol, class_method_exclusions = [] of String | Symbol, constant_exclusions = [] of String | Symbol, use_enum_methods = false, wrap_equality_method = false, connect_to_superclass = true, include_ancestor_methods = true, overwrite = false, verbose = false)","args_html":"(rb_interpreter, crystal_class, under = <span class=\"n\">nil</span>, instance_method_exclusions = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">String</span> <span class=\"o\">|</span> <span class=\"t\">Symbol</span>, class_method_exclusions = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">String</span> <span class=\"o\">|</span> <span class=\"t\">Symbol</span>, constant_exclusions = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">String</span> <span class=\"o\">|</span> <span class=\"t\">Symbol</span>, use_enum_methods = <span class=\"n\">false</span>, wrap_equality_method = <span class=\"n\">false</span>, connect_to_superclass = <span class=\"n\">true</span>, include_ancestor_methods = <span class=\"n\">true</span>, overwrite = <span class=\"n\">false</span>, verbose = <span class=\"n\">false</span>)","location":{"filename":"src/Main.cr","line_number":972,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L972"},"def":{"name":"wrap_class_with_methods","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"under","default_value":"nil","external_name":"under","restriction":""},{"name":"instance_method_exclusions","default_value":"[] of String | Symbol","external_name":"instance_method_exclusions","restriction":""},{"name":"class_method_exclusions","default_value":"[] of String | Symbol","external_name":"class_method_exclusions","restriction":""},{"name":"constant_exclusions","default_value":"[] of String | Symbol","external_name":"constant_exclusions","restriction":""},{"name":"use_enum_methods","default_value":"false","external_name":"use_enum_methods","restriction":""},{"name":"wrap_equality_method","default_value":"false","external_name":"wrap_equality_method","restriction":""},{"name":"connect_to_superclass","default_value":"true","external_name":"connect_to_superclass","restriction":""},{"name":"include_ancestor_methods","default_value":"true","external_name":"include_ancestor_methods","restriction":""},{"name":"overwrite","default_value":"false","external_name":"overwrite","restriction":""},{"name":"verbose","default_value":"false","external_name":"verbose","restriction":""}],"visibility":"Public","body":"    \n{% if verbose %}\n      {% puts(\">>> Going into class #{crystal_class} under #{under}\\n\\n\") %}\n    {% end %}\n\n\n    \n{% if crystal_class.is_a?(Generic) %}\n      {% if verbose\n  puts(\"> Wrapping of generics not supported, thus skipping #{crystal_class}\\e[0m\\n\\n\")\nend %}\n    {% else %}\n      {% resolved_class = crystal_class.resolve %}\n\n      {% new_context = crystal_class %}\n\n      {% if resolved_class.annotation(Anyolite::RenameClass) %}\n        {% actual_name = (resolved_class.annotation(Anyolite::RenameClass))[0] %}\n      {% else %}\n        {% actual_name = crystal_class.names.last.stringify %}\n      {% end %}\n\n      {% if connect_to_superclass %}\n        {% superclass = [Reference, Object, Struct, Enum, Value, Comparable(Enum), Enumerable].includes?(resolved_class.superclass) ? nil : resolved_class.superclass %}\n      {% else %}\n        {% superclass = nil %}\n      {% end %}\n\n      {% if superclass %}\n        if !Anyolite::RbClassCache.check({{ superclass.resolve }})\n          puts \"Note: Superclass {{ superclass }} to {{ resolved_class }} was not wrapped before. Trying to find it...\"\n          _needs_more_iterations.push(\"{{ superclass }}\") if _needs_more_iterations\n        else\n      {% else %}\n        if false\n\n        else\n      {% end %}\n        if {{ overwrite }} || !Anyolite::RbClassCache.check({{ resolved_class }}) \n          Anyolite.wrap_class({{ rb_interpreter }}, {{ resolved_class }}, {{ actual_name }}, under: {{ under }}, superclass: {{ superclass }})\n\n          {% if include_ancestor_methods %}\n            {% reversed_ancestors = [] of TypeNode %}\n            {% for ancestor in resolved_class.ancestors.reject do |ancestor|\n  [Object, Reference, Struct, Enum, Value, Comparable(Enum), Enumerable].includes?(ancestor)\nend %}\n              {% reversed_ancestors = [ancestor] + reversed_ancestors %}\n            {% end %}\n\n            {% if (!reversed_ancestors.empty?) && verbose\n  puts(\"> Ancestors for #{resolved_class}: #{reversed_ancestors}\")\nend %}\n\n            {% if resolved_class.annotation(Anyolite::IgnoreAncestorMethods) %}\n              {% if (!reversed_ancestors.empty?) && verbose\n  puts(\"> Ignoring ancestors due to annotation.\")\nend %}\n            {% else %}\n              {% for ancestor, ancestor_index in reversed_ancestors %}\n                {% if verbose\n  puts(\"> Going into ancestor #{ancestor} for #{resolved_class}...\")\nend %}\n                {% later_ancestors = reversed_ancestors[(ancestor_index + 1)..-1] %}\n\n                Anyolite::Macro.wrap_all_instance_methods({{ rb_interpreter }}, {{ crystal_class }}, {{ instance_method_exclusions }}, \n                  verbose: {{ verbose }}, context: {{ new_context }}, use_enum_methods: {{ use_enum_methods }}, wrap_equality_method: {{ wrap_equality_method }}, \n                  other_source: {{ ancestor }}, later_ancestors: {{ later_ancestors.empty? ? nil : later_ancestors }})\n              {% end %}\n            {% end %}\n          {% end %}\n\n          Anyolite::Macro.wrap_all_instance_methods({{ rb_interpreter }}, {{ crystal_class }}, {{ instance_method_exclusions }}, \n            verbose: {{ verbose }}, context: {{ new_context }}, use_enum_methods: {{ use_enum_methods }}, wrap_equality_method: {{ wrap_equality_method }})\n          Anyolite::Macro.wrap_all_class_methods({{ rb_interpreter }}, {{ crystal_class }}, {{ class_method_exclusions }}, verbose: {{ verbose }}, context: {{ new_context }})\n          Anyolite::Macro.wrap_all_constants({{ rb_interpreter }}, {{ crystal_class }}, {{ constant_exclusions }}, verbose: {{ verbose }}, context: {{ new_context }})\n        end\n      end\n    {% end %}\n\n  \n"}},{"html_id":"wrap_constant(rb_interpreter,under_module,name,crystal_value)-macro","name":"wrap_constant","doc":"Wraps a constant value under a module into mruby.\n\nThe value *crystal_value* will be integrated into the `RbInterpreter` *rb_interpreter*,\nwith the name *name* and the parent module *under_module*.","summary":"<p>Wraps a constant value under a module into mruby.</p>","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"under_module","external_name":"under_module","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"crystal_value","external_name":"crystal_value","restriction":""}],"args_string":"(rb_interpreter, under_module, name, crystal_value)","args_html":"(rb_interpreter, under_module, name, crystal_value)","location":{"filename":"src/Main.cr","line_number":798,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L798"},"def":{"name":"wrap_constant","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"under_module","external_name":"under_module","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"crystal_value","external_name":"crystal_value","restriction":""}],"visibility":"Public","body":"    Anyolite::RbCore.rb_define_const(\n{{ rb_interpreter }}\n, Anyolite::RbClassCache.get(\n{{ under_module }}\n), \n{{ name }}\n, Anyolite::RbCast.return_value(\n{{ rb_interpreter }}\n.to_unsafe, \n{{ crystal_value }}\n))\n  \n"}},{"html_id":"wrap_constant_under_class(rb_interpreter,under_class,name,crystal_value)-macro","name":"wrap_constant_under_class","doc":"Wraps a constant value under a class into mruby.\n\nThe value *crystal_value* will be integrated into the `RbInterpreter` *rb_interpreter*,\nwith the name *name* and the parent `Class` *under_class*.","summary":"<p>Wraps a constant value under a class into mruby.</p>","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"under_class","external_name":"under_class","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"crystal_value","external_name":"crystal_value","restriction":""}],"args_string":"(rb_interpreter, under_class, name, crystal_value)","args_html":"(rb_interpreter, under_class, name, crystal_value)","location":{"filename":"src/Main.cr","line_number":806,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L806"},"def":{"name":"wrap_constant_under_class","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"under_class","external_name":"under_class","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"crystal_value","external_name":"crystal_value","restriction":""}],"visibility":"Public","body":"    Anyolite::RbCore.rb_define_const(\n{{ rb_interpreter }}\n, Anyolite::RbClassCache.get(\n{{ under_class }}\n), \n{{ name }}\n, Anyolite::RbCast.return_value(\n{{ rb_interpreter }}\n.to_unsafe, \n{{ crystal_value }}\n))\n  \n"}},{"html_id":"wrap_constructor(rb_interpreter,crystal_class,proc_args=nil,operator=\"\",context=nil,block_arg_number=nil,block_return_type=nil,store_block_arg=false)-macro","name":"wrap_constructor","doc":"Wraps the constructor of a Crystal class into mruby.\n\nThe constructor for the Crystal `Class` *crystal_class* will be integrated into the `RbInterpreter` *rb_interpreter*,\nwith the arguments *proc_args* as an `Array of Class`.\n\nThe value *operator* will append the specified `String`\nto the final name and *context* can give the function a `Path` for resolving types correctly.\n\nThe arguments *block_arg_number* and *block_return_type* can be set to an `Int` and a `Class`,\nrespectively, in order to require a block argument. If *store_block_arg* is set to `true`,\nany block argument given will be stored in a cache.","summary":"<p>Wraps the constructor of a Crystal class into mruby.</p>","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"proc_args","default_value":"nil","external_name":"proc_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""},{"name":"block_arg_number","default_value":"nil","external_name":"block_arg_number","restriction":""},{"name":"block_return_type","default_value":"nil","external_name":"block_return_type","restriction":""},{"name":"store_block_arg","default_value":"false","external_name":"store_block_arg","restriction":""}],"args_string":"(rb_interpreter, crystal_class, proc_args = nil, operator = \"\", context = nil, block_arg_number = nil, block_return_type = nil, store_block_arg = false)","args_html":"(rb_interpreter, crystal_class, proc_args = <span class=\"n\">nil</span>, operator = <span class=\"s\">&quot;&quot;</span>, context = <span class=\"n\">nil</span>, block_arg_number = <span class=\"n\">nil</span>, block_return_type = <span class=\"n\">nil</span>, store_block_arg = <span class=\"n\">false</span>)","location":{"filename":"src/Main.cr","line_number":556,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L556"},"def":{"name":"wrap_constructor","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"proc_args","default_value":"nil","external_name":"proc_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""},{"name":"block_arg_number","default_value":"nil","external_name":"block_arg_number","restriction":""},{"name":"block_return_type","default_value":"nil","external_name":"block_return_type","restriction":""},{"name":"store_block_arg","default_value":"false","external_name":"store_block_arg","restriction":""}],"visibility":"Public","body":"    \n{% options = {:context => context, :block_arg_number => block_arg_number, :block_return_type => block_return_type, :store_block_arg => store_block_arg} %}\n\n    Anyolite::Macro.wrap_constructor_function_with_args(\n{{ rb_interpreter }}\n, \n{{ crystal_class }}\n, \n{{ crystal_class }}\n.new, \n{{ proc_args }}\n, operator: \n{{ operator }}\n, options: \n{{ options }}\n)\n  \n"}},{"html_id":"wrap_constructor_with_keywords(rb_interpreter,crystal_class,keyword_args,regular_args=nil,operator=\"\",context=nil,block_arg_number=nil,block_return_type=nil,store_block_arg=false)-macro","name":"wrap_constructor_with_keywords","doc":"Wraps the constructor of a Crystal class into mruby, using keyword arguments.\n\nThe constructor for the Crystal `Class` *crystal_class* will be integrated into the `RbInterpreter` *rb_interpreter*,\nwith the arguments *regular_args* as an `Array of Class` and *keyword_args* as an `Array of TypeDeclaration`.\n\nThe value *operator* will append the specified `String`\nto the final name and *context* can give the function a `Path` for resolving types correctly.\n\nThe arguments *block_arg_number* and *block_return_type* can be set to an `Int` and a `Class`,\nrespectively, in order to require a block argument. If *store_block_arg* is set to `true`,\nany block argument given will be stored in a cache.","summary":"<p>Wraps the constructor of a Crystal class into mruby, using keyword arguments.</p>","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"keyword_args","external_name":"keyword_args","restriction":""},{"name":"regular_args","default_value":"nil","external_name":"regular_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""},{"name":"block_arg_number","default_value":"nil","external_name":"block_arg_number","restriction":""},{"name":"block_return_type","default_value":"nil","external_name":"block_return_type","restriction":""},{"name":"store_block_arg","default_value":"false","external_name":"store_block_arg","restriction":""}],"args_string":"(rb_interpreter, crystal_class, keyword_args, regular_args = nil, operator = \"\", context = nil, block_arg_number = nil, block_return_type = nil, store_block_arg = false)","args_html":"(rb_interpreter, crystal_class, keyword_args, regular_args = <span class=\"n\">nil</span>, operator = <span class=\"s\">&quot;&quot;</span>, context = <span class=\"n\">nil</span>, block_arg_number = <span class=\"n\">nil</span>, block_return_type = <span class=\"n\">nil</span>, store_block_arg = <span class=\"n\">false</span>)","location":{"filename":"src/Main.cr","line_number":579,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L579"},"def":{"name":"wrap_constructor_with_keywords","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"keyword_args","external_name":"keyword_args","restriction":""},{"name":"regular_args","default_value":"nil","external_name":"regular_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""},{"name":"block_arg_number","default_value":"nil","external_name":"block_arg_number","restriction":""},{"name":"block_return_type","default_value":"nil","external_name":"block_return_type","restriction":""},{"name":"store_block_arg","default_value":"false","external_name":"store_block_arg","restriction":""}],"visibility":"Public","body":"    \n{% options = {:context => context, :block_arg_number => block_arg_number, :block_return_type => block_return_type, :store_block_arg => store_block_arg} %}\n\n    Anyolite::Macro.wrap_constructor_function_with_keyword_args(\n{{ rb_interpreter }}\n, \n{{ crystal_class }}\n, \n{{ crystal_class }}\n.new, \n{{ keyword_args }}\n, \n{{ regular_args }}\n, operator: \n{{ operator }}\n, options: \n{{ options }}\n)\n  \n"}},{"html_id":"wrap_getter(rb_interpreter,crystal_class,name,proc,operator=\"\",context=nil)-macro","name":"wrap_getter","doc":"Wraps a getter into mruby.\n\nThe getter *proc* of the Crystal `Class` *crystal_class* will be integrated into the `RbInterpreter` *rb_interpreter*.\n\nIts new name will be *name*.\n\nThe value *operator* will append the specified `String`\nto the final name and *context* can give the function a `Path` for resolving types correctly.","summary":"<p>Wraps a getter into mruby.</p>","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""}],"args_string":"(rb_interpreter, crystal_class, name, proc, operator = \"\", context = nil)","args_html":"(rb_interpreter, crystal_class, name, proc, operator = <span class=\"s\">&quot;&quot;</span>, context = <span class=\"n\">nil</span>)","location":{"filename":"src/Main.cr","line_number":775,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L775"},"def":{"name":"wrap_getter","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""}],"visibility":"Public","body":"    \n{% options = {:context => context} %}\n\n    Anyolite::Macro.wrap_instance_function_with_args(\n{{ rb_interpreter }}\n, \n{{ crystal_class }}\n, \n{{ name }}\n, \n{{ proc }}\n, operator: \n{{ operator }}\n, options: \n{{ options }}\n)\n  \n"}},{"html_id":"wrap_instance_method(rb_interpreter,crystal_class,name,proc,proc_args=nil,operator=\"\",context=nil,return_nil=false,block_arg_number=nil,block_return_type=nil,store_block_arg=false)-macro","name":"wrap_instance_method","doc":"Wraps an instance method into mruby.\n\nThe instance method *proc* of the Crystal `Class` *crystal_class* will be integrated into the `RbInterpreter` *rb_interpreter*,\nwith the arguments *proc_args* as an `Array of Class`.\n\nIts new name will be *name*.\n\nThe value *operator* will append the specified `String`\nto the final name and *context* can give the function a `Path` for resolving types correctly.\nThe value *return_nil* will override any returned value with `nil`.\n\nThe arguments *block_arg_number* and *block_return_type* can be set to an `Int` and a `Class`,\nrespectively, in order to require a block argument. If *store_block_arg* is set to `true`,\nany block argument given will be stored in a cache.","summary":"<p>Wraps an instance method into mruby.</p>","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"proc_args","default_value":"nil","external_name":"proc_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""},{"name":"return_nil","default_value":"false","external_name":"return_nil","restriction":""},{"name":"block_arg_number","default_value":"nil","external_name":"block_arg_number","restriction":""},{"name":"block_return_type","default_value":"nil","external_name":"block_return_type","restriction":""},{"name":"store_block_arg","default_value":"false","external_name":"store_block_arg","restriction":""}],"args_string":"(rb_interpreter, crystal_class, name, proc, proc_args = nil, operator = \"\", context = nil, return_nil = false, block_arg_number = nil, block_return_type = nil, store_block_arg = false)","args_html":"(rb_interpreter, crystal_class, name, proc, proc_args = <span class=\"n\">nil</span>, operator = <span class=\"s\">&quot;&quot;</span>, context = <span class=\"n\">nil</span>, return_nil = <span class=\"n\">false</span>, block_arg_number = <span class=\"n\">nil</span>, block_return_type = <span class=\"n\">nil</span>, store_block_arg = <span class=\"n\">false</span>)","location":{"filename":"src/Main.cr","line_number":713,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L713"},"def":{"name":"wrap_instance_method","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"proc_args","default_value":"nil","external_name":"proc_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""},{"name":"return_nil","default_value":"false","external_name":"return_nil","restriction":""},{"name":"block_arg_number","default_value":"nil","external_name":"block_arg_number","restriction":""},{"name":"block_return_type","default_value":"nil","external_name":"block_return_type","restriction":""},{"name":"store_block_arg","default_value":"false","external_name":"store_block_arg","restriction":""}],"visibility":"Public","body":"    \n{% options = {:context => context, :return_nil => return_nil, :block_arg_number => block_arg_number, :block_return_type => block_return_type, :store_block_arg => store_block_arg} %}\n\n    Anyolite::Macro.wrap_instance_function_with_args(\n{{ rb_interpreter }}\n, \n{{ crystal_class }}\n, \n{{ name }}\n, \n{{ proc }}\n, \n{{ proc_args }}\n, operator: \n{{ operator }}\n, options: \n{{ options }}\n)\n  \n"}},{"html_id":"wrap_instance_method_with_keywords(rb_interpreter,crystal_class,name,proc,keyword_args,regular_args=nil,operator=\"\",context=nil,return_nil=false,block_arg_number=nil,block_return_type=nil,store_block_arg=false)-macro","name":"wrap_instance_method_with_keywords","doc":"Wraps an instance method into mruby, using keyword arguments.\n\nThe instance method *proc* of the Crystal `Class` *crystal_class* will be integrated into the `RbInterpreter` *rb_interpreter*,\nwith the arguments *regular_args* as an `Array of Class` and *keyword_args* as an `Array of TypeDeclaration`.\n\nIts new name will be *name*.\n\nThe value *operator* will append the specified `String`\nto the final name and *context* can give the function a `Path` for resolving types correctly.\nThe value *return_nil* will override any returned value with `nil`.\n\nThe arguments *block_arg_number* and *block_return_type* can be set to an `Int` and a `Class`,\nrespectively, in order to require a block argument. If *store_block_arg* is set to `true`,\nany block argument given will be stored in a cache.","summary":"<p>Wraps an instance method into mruby, using keyword arguments.</p>","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"keyword_args","external_name":"keyword_args","restriction":""},{"name":"regular_args","default_value":"nil","external_name":"regular_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""},{"name":"return_nil","default_value":"false","external_name":"return_nil","restriction":""},{"name":"block_arg_number","default_value":"nil","external_name":"block_arg_number","restriction":""},{"name":"block_return_type","default_value":"nil","external_name":"block_return_type","restriction":""},{"name":"store_block_arg","default_value":"false","external_name":"store_block_arg","restriction":""}],"args_string":"(rb_interpreter, crystal_class, name, proc, keyword_args, regular_args = nil, operator = \"\", context = nil, return_nil = false, block_arg_number = nil, block_return_type = nil, store_block_arg = false)","args_html":"(rb_interpreter, crystal_class, name, proc, keyword_args, regular_args = <span class=\"n\">nil</span>, operator = <span class=\"s\">&quot;&quot;</span>, context = <span class=\"n\">nil</span>, return_nil = <span class=\"n\">false</span>, block_arg_number = <span class=\"n\">nil</span>, block_return_type = <span class=\"n\">nil</span>, store_block_arg = <span class=\"n\">false</span>)","location":{"filename":"src/Main.cr","line_number":740,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L740"},"def":{"name":"wrap_instance_method_with_keywords","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"keyword_args","external_name":"keyword_args","restriction":""},{"name":"regular_args","default_value":"nil","external_name":"regular_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""},{"name":"return_nil","default_value":"false","external_name":"return_nil","restriction":""},{"name":"block_arg_number","default_value":"nil","external_name":"block_arg_number","restriction":""},{"name":"block_return_type","default_value":"nil","external_name":"block_return_type","restriction":""},{"name":"store_block_arg","default_value":"false","external_name":"store_block_arg","restriction":""}],"visibility":"Public","body":"    \n{% options = {:context => context, :return_nil => return_nil, :block_arg_number => block_arg_number, :block_return_type => block_return_type, :store_block_arg => store_block_arg} %}\n\n    Anyolite::Macro.wrap_instance_function_with_keyword_args(\n{{ rb_interpreter }}\n, \n{{ crystal_class }}\n, \n{{ name }}\n, \n{{ proc }}\n, \n{{ keyword_args }}\n, \n{{ regular_args }}\n, operator: \n{{ operator }}\n, options: \n{{ options }}\n)\n  \n"}},{"html_id":"wrap_module(rb_interpreter,crystal_module,name,under=nil)-macro","name":"wrap_module","doc":"Wraps a Crystal module into an mruby module.\n\nThe module *crystal_module* will be integrated into the `RbInterpreter` *rb_interpreter*,\nwith *name* as its new designation, returning an `Anyolite::RbModule`.\n\nThe parent module can be specified with the module argument *under*.","summary":"<p>Wraps a Crystal module into an mruby module.</p>","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_module","external_name":"crystal_module","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"under","default_value":"nil","external_name":"under","restriction":""}],"args_string":"(rb_interpreter, crystal_module, name, under = nil)","args_html":"(rb_interpreter, crystal_module, name, under = <span class=\"n\">nil</span>)","location":{"filename":"src/Main.cr","line_number":539,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L539"},"def":{"name":"wrap_module","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_module","external_name":"crystal_module","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"under","default_value":"nil","external_name":"under","restriction":""}],"visibility":"Public","body":"    \n%new_module\n = Anyolite::RbModule.new(\n{{ rb_interpreter }}\n, \n{{ name }}\n, under: Anyolite::RbClassCache.get(\n{{ under }}\n))\n    Anyolite::RbClassCache.register(\n{{ crystal_module }}\n, \n%new_module\n)\n    Anyolite::RbClassCache.get(\n{{ crystal_module }}\n)\n  \n"}},{"html_id":"wrap_module_function(rb_interpreter,under_module,name,proc,proc_args=nil,operator=\"\",context=nil,return_nil=false,block_arg_number=nil,block_return_type=nil,store_block_arg=false)-macro","name":"wrap_module_function","doc":"Wraps a module function into mruby.\n\nThe function *proc* under the module *under_module* will be integrated into the `RbInterpreter` *rb_interpreter*,\nwith the arguments *proc_args* as an `Array of Class`.\n\nIts new name will be *name*.\n\nThe value *operator* will append the specified `String`\nto the final name and *context* can give the function a `Path` for resolving types correctly.\nThe value *return_nil* will override any returned value with `nil`.\n\nThe arguments *block_arg_number* and *block_return_type* can be set to an `Int` and a `Class`,\nrespectively, in order to require a block argument. If *store_block_arg* is set to `true`,\nany block argument given will be stored in a cache.","summary":"<p>Wraps a module function into mruby.</p>","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"under_module","external_name":"under_module","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"proc_args","default_value":"nil","external_name":"proc_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""},{"name":"return_nil","default_value":"false","external_name":"return_nil","restriction":""},{"name":"block_arg_number","default_value":"nil","external_name":"block_arg_number","restriction":""},{"name":"block_return_type","default_value":"nil","external_name":"block_return_type","restriction":""},{"name":"store_block_arg","default_value":"false","external_name":"store_block_arg","restriction":""}],"args_string":"(rb_interpreter, under_module, name, proc, proc_args = nil, operator = \"\", context = nil, return_nil = false, block_arg_number = nil, block_return_type = nil, store_block_arg = false)","args_html":"(rb_interpreter, under_module, name, proc, proc_args = <span class=\"n\">nil</span>, operator = <span class=\"s\">&quot;&quot;</span>, context = <span class=\"n\">nil</span>, return_nil = <span class=\"n\">false</span>, block_arg_number = <span class=\"n\">nil</span>, block_return_type = <span class=\"n\">nil</span>, store_block_arg = <span class=\"n\">false</span>)","location":{"filename":"src/Main.cr","line_number":605,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L605"},"def":{"name":"wrap_module_function","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"under_module","external_name":"under_module","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"proc_args","default_value":"nil","external_name":"proc_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""},{"name":"return_nil","default_value":"false","external_name":"return_nil","restriction":""},{"name":"block_arg_number","default_value":"nil","external_name":"block_arg_number","restriction":""},{"name":"block_return_type","default_value":"nil","external_name":"block_return_type","restriction":""},{"name":"store_block_arg","default_value":"false","external_name":"store_block_arg","restriction":""}],"visibility":"Public","body":"    \n{% options = {:context => context, :return_nil => return_nil, :block_arg_number => block_arg_number, :block_return_type => block_return_type, :store_block_arg => store_block_arg} %}\n\n    Anyolite::Macro.wrap_module_function_with_args(\n{{ rb_interpreter }}\n, \n{{ under_module }}\n, \n{{ name }}\n, \n{{ proc }}\n, \n{{ proc_args }}\n, options: \n{{ options }}\n)\n  \n"}},{"html_id":"wrap_module_function_with_keywords(rb_interpreter,under_module,name,proc,keyword_args,regular_args=nil,operator=\"\",context=nil,return_nil=false,block_arg_number=nil,block_return_type=nil,store_block_arg=false)-macro","name":"wrap_module_function_with_keywords","doc":"Wraps a module function into mruby, using keyword arguments.\n\nThe function *proc* under the module *under_module* will be integrated into the `RbInterpreter` *rb_interpreter*,\nwith the arguments *regular_args* as an `Array of Class` and *keyword_args* as an `Array of TypeDeclaration`.\n\nIts new name will be *name*.\n\nThe value *operator* will append the specified `String`\nto the final name and *context* can give the function a `Path` for resolving types correctly.\nThe value *return_nil* will override any returned value with `nil`.\n\nThe arguments *block_arg_number* and *block_return_type* can be set to an `Int` and a `Class`,\nrespectively, in order to require a block argument. If *store_block_arg* is set to `true`,\nany block argument given will be stored in a cache.","summary":"<p>Wraps a module function into mruby, using keyword arguments.</p>","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"under_module","external_name":"under_module","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"keyword_args","external_name":"keyword_args","restriction":""},{"name":"regular_args","default_value":"nil","external_name":"regular_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""},{"name":"return_nil","default_value":"false","external_name":"return_nil","restriction":""},{"name":"block_arg_number","default_value":"nil","external_name":"block_arg_number","restriction":""},{"name":"block_return_type","default_value":"nil","external_name":"block_return_type","restriction":""},{"name":"store_block_arg","default_value":"false","external_name":"store_block_arg","restriction":""}],"args_string":"(rb_interpreter, under_module, name, proc, keyword_args, regular_args = nil, operator = \"\", context = nil, return_nil = false, block_arg_number = nil, block_return_type = nil, store_block_arg = false)","args_html":"(rb_interpreter, under_module, name, proc, keyword_args, regular_args = <span class=\"n\">nil</span>, operator = <span class=\"s\">&quot;&quot;</span>, context = <span class=\"n\">nil</span>, return_nil = <span class=\"n\">false</span>, block_arg_number = <span class=\"n\">nil</span>, block_return_type = <span class=\"n\">nil</span>, store_block_arg = <span class=\"n\">false</span>)","location":{"filename":"src/Main.cr","line_number":632,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L632"},"def":{"name":"wrap_module_function_with_keywords","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"under_module","external_name":"under_module","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"keyword_args","external_name":"keyword_args","restriction":""},{"name":"regular_args","default_value":"nil","external_name":"regular_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""},{"name":"return_nil","default_value":"false","external_name":"return_nil","restriction":""},{"name":"block_arg_number","default_value":"nil","external_name":"block_arg_number","restriction":""},{"name":"block_return_type","default_value":"nil","external_name":"block_return_type","restriction":""},{"name":"store_block_arg","default_value":"false","external_name":"store_block_arg","restriction":""}],"visibility":"Public","body":"    \n{% options = {:context => context, :return_nil => return_nil, :block_arg_number => block_arg_number, :block_return_type => block_return_type, :store_block_arg => store_block_arg} %}\n\n    Anyolite::Macro.wrap_module_function_with_keyword_args(\n{{ rb_interpreter }}\n, \n{{ under_module }}\n, \n{{ name }}\n, \n{{ proc }}\n, \n{{ keyword_args }}\n, \n{{ regular_args }}\n, operator: \n{{ operator }}\n, options: \n{{ options }}\n)\n  \n"}},{"html_id":"wrap_module_with_methods(rb_interpreter,crystal_module,under=nil,class_method_exclusions=[]ofString|Symbol,constant_exclusions=[]ofString|Symbol,overwrite=false,verbose=false)-macro","name":"wrap_module_with_methods","doc":"Wraps a whole module structure under a module into mruby.\n\nThe module *crystal_module* will be integrated into the `RbInterpreter` *rb_interpreter*,\nwith the optional parent module *under*.\nMethods or constants to be excluded can be specified as\n`Symbol` or `String` in the `Array`\n*class_method_exclusions* (for class methods) or\n*constant_exclusions* (for constants).\nThe option *overwrite* will iterate through all functions and\nconstants again if set to `true`.\nIf *verbose* is set, wrapping information will be displayed.","summary":"<p>Wraps a whole module structure under a module into mruby.</p>","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_module","external_name":"crystal_module","restriction":""},{"name":"under","default_value":"nil","external_name":"under","restriction":""},{"name":"class_method_exclusions","default_value":"[] of String | Symbol","external_name":"class_method_exclusions","restriction":""},{"name":"constant_exclusions","default_value":"[] of String | Symbol","external_name":"constant_exclusions","restriction":""},{"name":"overwrite","default_value":"false","external_name":"overwrite","restriction":""},{"name":"verbose","default_value":"false","external_name":"verbose","restriction":""}],"args_string":"(rb_interpreter, crystal_module, under = nil, class_method_exclusions = [] of String | Symbol, constant_exclusions = [] of String | Symbol, overwrite = false, verbose = false)","args_html":"(rb_interpreter, crystal_module, under = <span class=\"n\">nil</span>, class_method_exclusions = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">String</span> <span class=\"o\">|</span> <span class=\"t\">Symbol</span>, constant_exclusions = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">String</span> <span class=\"o\">|</span> <span class=\"t\">Symbol</span>, overwrite = <span class=\"n\">false</span>, verbose = <span class=\"n\">false</span>)","location":{"filename":"src/Main.cr","line_number":1061,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L1061"},"def":{"name":"wrap_module_with_methods","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_module","external_name":"crystal_module","restriction":""},{"name":"under","default_value":"nil","external_name":"under","restriction":""},{"name":"class_method_exclusions","default_value":"[] of String | Symbol","external_name":"class_method_exclusions","restriction":""},{"name":"constant_exclusions","default_value":"[] of String | Symbol","external_name":"constant_exclusions","restriction":""},{"name":"overwrite","default_value":"false","external_name":"overwrite","restriction":""},{"name":"verbose","default_value":"false","external_name":"verbose","restriction":""}],"visibility":"Public","body":"    \n{% if verbose %}\n      {% puts(\">>> Going into module #{crystal_module} under #{under}\\n\\n\") %}\n    {% end %}\n\n\n    \n{% new_context = crystal_module %}\n\n\n    \n{% if crystal_module.resolve.annotation(Anyolite::RenameModule) %}\n      {% actual_name = (crystal_module.resolve.annotation(Anyolite::RenameModule))[0] %}\n    {% else %}\n      {% actual_name = crystal_module.names.last.stringify %}\n    {% end %}\n\n\n    if \n{{ overwrite }}\n || !Anyolite::RbClassCache.check(\n{{ crystal_module.resolve }}\n) \n      Anyolite.wrap_module(\n{{ rb_interpreter }}\n, \n{{ crystal_module.resolve }}\n, \n{{ actual_name }}\n, under: \n{{ under }}\n)\n\n      Anyolite::Macro.wrap_all_class_methods(\n{{ rb_interpreter }}\n, \n{{ crystal_module }}\n, \n{{ class_method_exclusions }}\n, verbose: \n{{ verbose }}\n, context: \n{{ new_context }}\n)\n      Anyolite::Macro.wrap_all_constants(\n{{ rb_interpreter }}\n, \n{{ crystal_module }}\n, \n{{ constant_exclusions }}\n, verbose: \n{{ verbose }}\n, overwrite: \n{{ overwrite }}\n, context: \n{{ new_context }}\n)\n    \nend\n  \n"}},{"html_id":"wrap_property(rb_interpreter,crystal_class,name,proc,proc_arg,operator_getter=\"\",operator_setter=\"=\",context=nil)-macro","name":"wrap_property","doc":"Wraps a property into mruby.\n\nThe property *proc* of the Crystal `Class` *crystal_class* will be integrated into the `RbInterpreter` *rb_interpreter*,\nwith the argument *proc_arg* as its respective `Class`.\n\nIts new name will be *name*.\n\nThe values *operator_getter* and *operator_setter* will append the specified `String`\nto the final names and *context* can give the function a `Path` for resolving types correctly.","summary":"<p>Wraps a property into mruby.</p>","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"proc_arg","external_name":"proc_arg","restriction":""},{"name":"operator_getter","default_value":"\"\"","external_name":"operator_getter","restriction":""},{"name":"operator_setter","default_value":"\"=\"","external_name":"operator_setter","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""}],"args_string":"(rb_interpreter, crystal_class, name, proc, proc_arg, operator_getter = \"\", operator_setter = \"=\", context = nil)","args_html":"(rb_interpreter, crystal_class, name, proc, proc_arg, operator_getter = <span class=\"s\">&quot;&quot;</span>, operator_setter = <span class=\"s\">&quot;=&quot;</span>, context = <span class=\"n\">nil</span>)","location":{"filename":"src/Main.cr","line_number":789,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L789"},"def":{"name":"wrap_property","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"proc_arg","external_name":"proc_arg","restriction":""},{"name":"operator_getter","default_value":"\"\"","external_name":"operator_getter","restriction":""},{"name":"operator_setter","default_value":"\"=\"","external_name":"operator_setter","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""}],"visibility":"Public","body":"    Anyolite.wrap_getter(\n{{ rb_interpreter }}\n, \n{{ crystal_class }}\n, \n{{ name }}\n, \n{{ proc }}\n, operator: \n{{ operator_getter }}\n, context: \n{{ context }}\n)\n    Anyolite.wrap_setter(\n{{ rb_interpreter }}\n, \n{{ crystal_class }}\n, \n{{ name + \"=\" }}\n, \n{{ proc }}\n, \n{{ proc_arg }}\n, operator: \n{{ operator_setter }}\n, context: \n{{ context }}\n)\n  \n"}},{"html_id":"wrap_setter(rb_interpreter,crystal_class,name,proc,proc_arg,operator=\"=\",context=nil)-macro","name":"wrap_setter","doc":"Wraps a setter into mruby.\n\nThe setter *proc* (without the `=`) of the Crystal `Class` *crystal_class* will be integrated into the `RbInterpreter` *rb_interpreter*,\nwith the argument *proc_arg* as its respective `Class`.\n\nIts new name will be *name*.\n\nThe value *operator* will append the specified `String`\nto the final name and *context* can give the function a `Path` for resolving types correctly.","summary":"<p>Wraps a setter into mruby.</p>","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"proc_arg","external_name":"proc_arg","restriction":""},{"name":"operator","default_value":"\"=\"","external_name":"operator","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""}],"args_string":"(rb_interpreter, crystal_class, name, proc, proc_arg, operator = \"=\", context = nil)","args_html":"(rb_interpreter, crystal_class, name, proc, proc_arg, operator = <span class=\"s\">&quot;=&quot;</span>, context = <span class=\"n\">nil</span>)","location":{"filename":"src/Main.cr","line_number":762,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L762"},"def":{"name":"wrap_setter","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"proc_arg","external_name":"proc_arg","restriction":""},{"name":"operator","default_value":"\"=\"","external_name":"operator","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""}],"visibility":"Public","body":"    \n{% options = {:context => context} %}\n\n    Anyolite::Macro.wrap_instance_function_with_args(\n{{ rb_interpreter }}\n, \n{{ crystal_class }}\n, \n{{ name }}\n, \n{{ proc }}\n, \n{{ proc_arg }}\n, operator: \n{{ operator }}\n, options: \n{{ options }}\n)\n  \n"}}],"types":[{"html_id":"anyolite/Anyolite/AddBlockArg","path":"Anyolite/AddBlockArg.html","kind":"annotation","full_name":"Anyolite::AddBlockArg","name":"AddBlockArg","abstract":false,"locations":[{"filename":"src/Main.cr","line_number":901,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L901"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Specifies the method to require a block argument with the first argument\nbeing the number of values yielded and the second argument the return\ntype of the block.","summary":"<p>Specifies the method to require a block argument with the first argument being the number of values yielded and the second argument the return type of the block.</p>"},{"html_id":"anyolite/Anyolite/AddBlockArgClassMethod","path":"Anyolite/AddBlockArgClassMethod.html","kind":"annotation","full_name":"Anyolite::AddBlockArgClassMethod","name":"AddBlockArgClassMethod","abstract":false,"locations":[{"filename":"src/Main.cr","line_number":913,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L913"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Specifies the class method given as the first argument\nto require a block argument with the second argument\nbeing the number of values yielded and the third argument the return\ntype of the block.","summary":"<p>Specifies the class method given as the first argument to require a block argument with the second argument being the number of values yielded and the third argument the return type of the block.</p>"},{"html_id":"anyolite/Anyolite/AddBlockArgInstanceMethod","path":"Anyolite/AddBlockArgInstanceMethod.html","kind":"annotation","full_name":"Anyolite::AddBlockArgInstanceMethod","name":"AddBlockArgInstanceMethod","abstract":false,"locations":[{"filename":"src/Main.cr","line_number":907,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L907"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Specifies the instance method given as the first argument\nto require a block argument with the second argument\nbeing the number of values yielded and the third argument the return\ntype of the block.","summary":"<p>Specifies the instance method given as the first argument to require a block argument with the second argument being the number of values yielded and the third argument the return type of the block.</p>"},{"html_id":"anyolite/Anyolite/DefaultOptionalArgsToKeywordArgs","path":"Anyolite/DefaultOptionalArgsToKeywordArgs.html","kind":"annotation","full_name":"Anyolite::DefaultOptionalArgsToKeywordArgs","name":"DefaultOptionalArgsToKeywordArgs","abstract":false,"locations":[{"filename":"src/Main.cr","line_number":946,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L946"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"All methods of the respective class have their required arguments\nwrapped as regular arguments and their optional arguments wrapped\nas keyword arguments.\n\nThe annotation can be overwritten with the respective\n`WrapWithoutKeywords` annotations for specific methods.","summary":"<p>All methods of the respective class have their required arguments wrapped as regular arguments and their optional arguments wrapped as keyword arguments.</p>"},{"html_id":"anyolite/Anyolite/Empty","path":"Anyolite/Empty.html","kind":"struct","full_name":"Anyolite::Empty","name":"Empty","abstract":false,"superclass":{"html_id":"anyolite/Struct","kind":"struct","full_name":"Struct","name":"Struct"},"ancestors":[{"html_id":"anyolite/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"anyolite/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"anyolite/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/Main.cr","line_number":24,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L24"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Use this special constant in case of a function to wrap, which has only an operator as a name.","summary":"<p>Use this special constant in case of a function to wrap, which has only an operator as a name.</p>"},{"html_id":"anyolite/Anyolite/Exclude","path":"Anyolite/Exclude.html","kind":"annotation","full_name":"Anyolite::Exclude","name":"Exclude","abstract":false,"locations":[{"filename":"src/Main.cr","line_number":814,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L814"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Excludes the function from wrapping.","summary":"<p>Excludes the function from wrapping.</p>"},{"html_id":"anyolite/Anyolite/ExcludeClassMethod","path":"Anyolite/ExcludeClassMethod.html","kind":"annotation","full_name":"Anyolite::ExcludeClassMethod","name":"ExcludeClassMethod","abstract":false,"locations":[{"filename":"src/Main.cr","line_number":821,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L821"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Excludes the class method given as the first argument from wrapping.","summary":"<p>Excludes the class method given as the first argument from wrapping.</p>"},{"html_id":"anyolite/Anyolite/ExcludeConstant","path":"Anyolite/ExcludeConstant.html","kind":"annotation","full_name":"Anyolite::ExcludeConstant","name":"ExcludeConstant","abstract":false,"locations":[{"filename":"src/Main.cr","line_number":824,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L824"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Excludes the constant given as the first argument from wrapping.","summary":"<p>Excludes the constant given as the first argument from wrapping.</p>"},{"html_id":"anyolite/Anyolite/ExcludeInstanceMethod","path":"Anyolite/ExcludeInstanceMethod.html","kind":"annotation","full_name":"Anyolite::ExcludeInstanceMethod","name":"ExcludeInstanceMethod","abstract":false,"locations":[{"filename":"src/Main.cr","line_number":818,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L818"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Excludes the instance method given as the first argument from wrapping.\nUse it on `Object` to exclude the named method from all classes.","summary":"<p>Excludes the instance method given as the first argument from wrapping.</p>"},{"html_id":"anyolite/Anyolite/ForceKeywordArg","path":"Anyolite/ForceKeywordArg.html","kind":"annotation","full_name":"Anyolite::ForceKeywordArg","name":"ForceKeywordArg","abstract":false,"locations":[{"filename":"src/Main.cr","line_number":925,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L925"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Forces the method to use keyword arguments (especially for operator methods) if given.","summary":"<p>Forces the method to use keyword arguments (especially for operator methods) if given.</p>"},{"html_id":"anyolite/Anyolite/ForceKeywordArgClassMethod","path":"Anyolite/ForceKeywordArgClassMethod.html","kind":"annotation","full_name":"Anyolite::ForceKeywordArgClassMethod","name":"ForceKeywordArgClassMethod","abstract":false,"locations":[{"filename":"src/Main.cr","line_number":933,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L933"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Forces the class method given as the first argument to use\nkeyword arguments (especially for operator methods) if given.","summary":"<p>Forces the class method given as the first argument to use keyword arguments (especially for operator methods) if given.</p>"},{"html_id":"anyolite/Anyolite/ForceKeywordArgInstanceMethod","path":"Anyolite/ForceKeywordArgInstanceMethod.html","kind":"annotation","full_name":"Anyolite::ForceKeywordArgInstanceMethod","name":"ForceKeywordArgInstanceMethod","abstract":false,"locations":[{"filename":"src/Main.cr","line_number":929,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L929"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Forces the instance method given as the first argument to use\nkeyword arguments (especially for operator methods) if given.","summary":"<p>Forces the instance method given as the first argument to use keyword arguments (especially for operator methods) if given.</p>"},{"html_id":"anyolite/Anyolite/HelperClasses","path":"Anyolite/HelperClasses.html","kind":"module","full_name":"Anyolite::HelperClasses","name":"HelperClasses","abstract":false,"locations":[{"filename":"src/helper_classes/AnyolitePointer.cr","line_number":2,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/helper_classes/AnyolitePointer.cr#L2"},{"filename":"src/helper_classes/HelperClasses.cr","line_number":4,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/helper_classes/HelperClasses.cr#L4"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"class_methods":[{"html_id":"load_all(rb)-class-method","name":"load_all","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":""}],"args_string":"(rb)","args_html":"(rb)","location":{"filename":"src/helper_classes/HelperClasses.cr","line_number":9,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/helper_classes/HelperClasses.cr#L9"},"def":{"name":"load_all","args":[{"name":"rb","external_name":"rb","restriction":""}],"visibility":"Public","body":"load_helper_class(rb, AnyolitePointer)"}}],"macros":[{"html_id":"load_helper_class(rb,helper_class)-macro","name":"load_helper_class","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"helper_class","external_name":"helper_class","restriction":""}],"args_string":"(rb, helper_class)","args_html":"(rb, helper_class)","location":{"filename":"src/helper_classes/HelperClasses.cr","line_number":5,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/helper_classes/HelperClasses.cr#L5"},"def":{"name":"load_helper_class","args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"helper_class","external_name":"helper_class","restriction":""}],"visibility":"Public","body":"      Anyolite.wrap(\n{{ rb }}\n, Anyolite::HelperClasses::\n{{ helper_class }}\n)\r\n    \n"}}],"types":[{"html_id":"anyolite/Anyolite/HelperClasses/AnyolitePointer","path":"Anyolite/HelperClasses/AnyolitePointer.html","kind":"class","full_name":"Anyolite::HelperClasses::AnyolitePointer","name":"AnyolitePointer","abstract":false,"superclass":{"html_id":"anyolite/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"anyolite/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"anyolite/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/helper_classes/AnyolitePointer.cr","line_number":3,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/helper_classes/AnyolitePointer.cr#L3"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite/HelperClasses","kind":"module","full_name":"Anyolite::HelperClasses","name":"HelperClasses"},"constructors":[{"html_id":"new(obj)-class-method","name":"new","abstract":false,"args":[{"name":"obj","external_name":"obj","restriction":""}],"args_string":"(obj)","args_html":"(obj)","location":{"filename":"src/helper_classes/AnyolitePointer.cr","line_number":11,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/helper_classes/AnyolitePointer.cr#L11"},"def":{"name":"new","args":[{"name":"obj","external_name":"obj","restriction":""}],"visibility":"Public","body":"_ = allocate\n_.initialize(obj)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"html_id":"new-class-method","name":"new","abstract":false,"location":{"filename":"src/helper_classes/AnyolitePointer.cr","line_number":7,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/helper_classes/AnyolitePointer.cr#L7"},"def":{"name":"new","visibility":"Public","body":"_ = allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"ptr:Pointer(Void)-instance-method","name":"ptr","abstract":false,"location":{"filename":"src/helper_classes/AnyolitePointer.cr","line_number":4,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/helper_classes/AnyolitePointer.cr#L4"},"def":{"name":"ptr","return_type":"::Pointer(Void)","visibility":"Public","body":"@ptr"}},{"html_id":"ptr=(ptr:Pointer(Void))-instance-method","name":"ptr=","abstract":false,"args":[{"name":"ptr","external_name":"ptr","restriction":"::Pointer(Void)"}],"args_string":"(ptr : Pointer(Void))","args_html":"(ptr : Pointer(Void))","location":{"filename":"src/helper_classes/AnyolitePointer.cr","line_number":4,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/helper_classes/AnyolitePointer.cr#L4"},"def":{"name":"ptr=","args":[{"name":"ptr","external_name":"ptr","restriction":"::Pointer(Void)"}],"visibility":"Public","body":"@ptr = ptr"}},{"html_id":"retrieve_ptr-instance-method","name":"retrieve_ptr","abstract":false,"location":{"filename":"src/helper_classes/AnyolitePointer.cr","line_number":20,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/helper_classes/AnyolitePointer.cr#L20"},"def":{"name":"retrieve_ptr","visibility":"Public","body":"if !@ptr\n  raise(\"Anyolite pointer was not initialized\")\nelse\n  @ptr\nend"}},{"html_id":"to_s-instance-method","name":"to_s","doc":"Returns a string representation of this object.\n\nDescendants must usually **not** override this method. Instead,\nthey must override `to_s(io)`, which must append to the given\nIO object.","summary":"<p>Returns a string representation of this object.</p>","abstract":false,"location":{"filename":"src/helper_classes/AnyolitePointer.cr","line_number":15,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/helper_classes/AnyolitePointer.cr#L15"},"def":{"name":"to_s","visibility":"Public","body":"@ptr.address.to_s"}}]}]},{"html_id":"anyolite/Anyolite/IgnoreAncestorMethods","path":"Anyolite/IgnoreAncestorMethods.html","kind":"annotation","full_name":"Anyolite::IgnoreAncestorMethods","name":"IgnoreAncestorMethods","abstract":false,"locations":[{"filename":"src/Main.cr","line_number":950,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L950"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Specifies that only the directly defined methods of the respective\nclass are wrapped, and no inherited methods.","summary":"<p>Specifies that only the directly defined methods of the respective class are wrapped, and no inherited methods.</p>"},{"html_id":"anyolite/Anyolite/Include","path":"Anyolite/Include.html","kind":"annotation","full_name":"Anyolite::Include","name":"Include","abstract":false,"locations":[{"filename":"src/Main.cr","line_number":827,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L827"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Overrides `ExcludeInstanceMethod` on `Object`.","summary":"<p>Overrides <code><a href=\"../Anyolite/ExcludeInstanceMethod.html\">ExcludeInstanceMethod</a></code> on <code>Object</code>.</p>"},{"html_id":"anyolite/Anyolite/IncludeInstanceMethod","path":"Anyolite/IncludeInstanceMethod.html","kind":"annotation","full_name":"Anyolite::IncludeInstanceMethod","name":"IncludeInstanceMethod","abstract":false,"locations":[{"filename":"src/Main.cr","line_number":831,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L831"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Overrides `ExcludeInstanceMethod` on `Object`\nthe instance method given as the first argument.","summary":"<p>Overrides <code><a href=\"../Anyolite/ExcludeInstanceMethod.html\">ExcludeInstanceMethod</a></code> on <code>Object</code> the instance method given as the first argument.</p>"},{"html_id":"anyolite/Anyolite/Macro","path":"Anyolite/Macro.html","kind":"module","full_name":"Anyolite::Macro","name":"Macro","abstract":false,"locations":[{"filename":"src/Macro.cr","line_number":3,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Macro.cr#L3"},{"filename":"src/implementations/mruby/FormatString.cr","line_number":2,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/implementations/mruby/FormatString.cr#L2"},{"filename":"src/implementations/mruby/Implementation.cr","line_number":6,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/implementations/mruby/Implementation.cr#L6"},{"filename":"src/implementations/mruby/KeywordArgStruct.cr","line_number":2,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/implementations/mruby/KeywordArgStruct.cr#L2"},{"filename":"src/macros/ArgConversions.cr","line_number":2,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/ArgConversions.cr#L2"},{"filename":"src/macros/ArgTuples.cr","line_number":2,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/ArgTuples.cr#L2"},{"filename":"src/macros/FunctionCalls.cr","line_number":2,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/FunctionCalls.cr#L2"},{"filename":"src/macros/FunctionGenerators.cr","line_number":2,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/FunctionGenerators.cr#L2"},{"filename":"src/macros/ObjectAllocations.cr","line_number":2,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/ObjectAllocations.cr#L2"},{"filename":"src/macros/RubyConversions.cr","line_number":2,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/RubyConversions.cr#L2"},{"filename":"src/macros/RubyTypes.cr","line_number":2,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/RubyTypes.cr#L2"},{"filename":"src/macros/UnionCasts.cr","line_number":2,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/UnionCasts.cr#L2"},{"filename":"src/macros/WrapAll.cr","line_number":2,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/WrapAll.cr#L2"},{"filename":"src/macros/WrapMethodIndex.cr","line_number":2,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/WrapMethodIndex.cr#L2"},{"filename":"src/macros/Wrappers.cr","line_number":2,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/Wrappers.cr#L2"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Helper methods which should not be used for trivial cases in the final version","summary":"<p>Helper methods which should not be used for trivial cases in the final version</p>","macros":[{"html_id":"add_copy_constructor(rb_interpreter,crystal_class,context,verbose)-macro","name":"add_copy_constructor","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"context","external_name":"context","restriction":""},{"name":"verbose","external_name":"verbose","restriction":""}],"args_string":"(rb_interpreter, crystal_class, context, verbose)","args_html":"(rb_interpreter, crystal_class, context, verbose)","location":{"filename":"src/macros/FunctionGenerators.cr","line_number":29,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/FunctionGenerators.cr#L29"},"def":{"name":"add_copy_constructor","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"context","external_name":"context","restriction":""},{"name":"verbose","external_name":"verbose","restriction":""}],"visibility":"Public","body":"      \n{% if verbose\n  puts(\"> Adding copy constructor for #{crystal_class}\\n\\n\")\nend %}\n\n      \n{% options = {:context => context} %}\n\n\n      \n%copy_proc\n = Anyolite::Macro.new_rb_func do\n        \n%converted_args\n = Anyolite::Macro.get_converted_args(_rb, [other : \n{{ crystal_class }}\n], options: \n{{ options }}\n)\n        \n%new_obj\n = \n%converted_args\n[0].dup\n        Anyolite::Macro.allocate_constructed_object(_rb, \n{{ crystal_class }}\n, _obj, \n%new_obj\n)\n        _obj\n      \nend\n\n      \n{{ rb_interpreter }}\n.define_method(\"initialize_copy\", Anyolite::RbClassCache.get(\n{{ crystal_class }}\n), \n%copy_proc\n)\n    \n"}},{"html_id":"add_default_constructor(rb_interpreter,crystal_class,verbose)-macro","name":"add_default_constructor","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"verbose","external_name":"verbose","restriction":""}],"args_string":"(rb_interpreter, crystal_class, verbose)","args_html":"(rb_interpreter, crystal_class, verbose)","location":{"filename":"src/macros/FunctionGenerators.cr","line_number":3,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/FunctionGenerators.cr#L3"},"def":{"name":"add_default_constructor","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"verbose","external_name":"verbose","restriction":""}],"visibility":"Public","body":"      \n{% if verbose\n  puts(\"> Adding constructor for #{crystal_class}\\n\\n\")\nend %}\n\n      Anyolite.wrap_constructor(\n{{ rb_interpreter }}\n, \n{{ crystal_class }}\n)\n    \n"}},{"html_id":"add_enum_constructor(rb_interpreter,crystal_class,verbose)-macro","name":"add_enum_constructor","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"verbose","external_name":"verbose","restriction":""}],"args_string":"(rb_interpreter, crystal_class, verbose)","args_html":"(rb_interpreter, crystal_class, verbose)","location":{"filename":"src/macros/FunctionGenerators.cr","line_number":8,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/FunctionGenerators.cr#L8"},"def":{"name":"add_enum_constructor","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"verbose","external_name":"verbose","restriction":""}],"visibility":"Public","body":"      \n{% if verbose\n  puts(\"> Adding enum constructor for #{crystal_class}\\n\\n\")\nend %}\n\n      Anyolite.wrap_constructor(\n{{ rb_interpreter }}\n, \n{{ crystal_class }}\n, [Int32])\n    \n"}},{"html_id":"add_enum_inspect(rb_interpreter,crystal_class,verbose)-macro","name":"add_enum_inspect","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"verbose","external_name":"verbose","restriction":""}],"args_string":"(rb_interpreter, crystal_class, verbose)","args_html":"(rb_interpreter, crystal_class, verbose)","location":{"filename":"src/macros/FunctionGenerators.cr","line_number":13,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/FunctionGenerators.cr#L13"},"def":{"name":"add_enum_inspect","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"verbose","external_name":"verbose","restriction":""}],"visibility":"Public","body":"      \n{% if verbose\n  puts(\"> Adding enum inspect method for #{crystal_class}\\n\\n\")\nend %}\n\n      Anyolite.wrap_instance_method(\n{{ rb_interpreter }}\n, \n{{ crystal_class }}\n, \"inspect\", inspect)\n    \n"}},{"html_id":"add_enum_to_s(rb_interpreter,crystal_class,verbose)-macro","name":"add_enum_to_s","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"verbose","external_name":"verbose","restriction":""}],"args_string":"(rb_interpreter, crystal_class, verbose)","args_html":"(rb_interpreter, crystal_class, verbose)","location":{"filename":"src/macros/FunctionGenerators.cr","line_number":18,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/FunctionGenerators.cr#L18"},"def":{"name":"add_enum_to_s","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"verbose","external_name":"verbose","restriction":""}],"visibility":"Public","body":"      \n{% if verbose\n  puts(\"> Adding enum to_s method for #{crystal_class}\\n\\n\")\nend %}\n\n      Anyolite.wrap_instance_method(\n{{ rb_interpreter }}\n, \n{{ crystal_class }}\n, \"to_s\", to_s)\n    \n"}},{"html_id":"add_equality_method(rb_interpreter,crystal_class,context,verbose)-macro","name":"add_equality_method","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"context","external_name":"context","restriction":""},{"name":"verbose","external_name":"verbose","restriction":""}],"args_string":"(rb_interpreter, crystal_class, context, verbose)","args_html":"(rb_interpreter, crystal_class, context, verbose)","location":{"filename":"src/macros/FunctionGenerators.cr","line_number":23,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/FunctionGenerators.cr#L23"},"def":{"name":"add_equality_method","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"context","external_name":"context","restriction":""},{"name":"verbose","external_name":"verbose","restriction":""}],"visibility":"Public","body":"      \n{% if verbose\n  puts(\"> Adding equality method for #{crystal_class}\\n\\n\")\nend %}\n\n      \n{% options = {:context => context} %}\n\n      Anyolite::Macro.wrap_equality_function(\n{{ rb_interpreter }}\n, \n{{ crystal_class }}\n, \"==\", Anyolite::Empty, operator: \"==\", options: \n{{ options }}\n)\n    \n"}},{"html_id":"allocate_constructed_object(rb,crystal_class,obj,new_obj)-macro","name":"allocate_constructed_object","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"obj","external_name":"obj","restriction":""},{"name":"new_obj","external_name":"new_obj","restriction":""}],"args_string":"(rb, crystal_class, obj, new_obj)","args_html":"(rb, crystal_class, obj, new_obj)","location":{"filename":"src/macros/ObjectAllocations.cr","line_number":3,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/ObjectAllocations.cr#L3"},"def":{"name":"allocate_constructed_object","args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"obj","external_name":"obj","restriction":""},{"name":"new_obj","external_name":"new_obj","restriction":""}],"visibility":"Public","body":"      \n# Call initializer method if available\r\n\n      if \n{{ new_obj }}\n.responds_to?(:rb_initialize)\r\n        \n{{ new_obj }}\n.rb_initialize(\n{{ rb }}\n)\r\n      \nend\r\n\r\n      \n# Allocate memory so we do not lose this object\r\n\n      if \n{{ crystal_class }}\n <= Struct || \n{{ crystal_class }}\n <= Enum\r\n        \n%struct_wrapper\n = Anyolite::StructWrapper(\n{{ crystal_class }}\n).new(\n{{ new_obj }}\n)\r\n        \n%new_obj_ptr\n = Pointer(Anyolite::StructWrapper(\n{{ crystal_class }}\n)).malloc(size: 1, value: \n%struct_wrapper\n)\r\n        Anyolite::RbRefTable.add(Anyolite::RbRefTable.get_object_id(\n%new_obj_ptr\n.value), \n%new_obj_ptr\n.as(Void*), \n{{ obj }}\n)\r\n\r\n        puts \"> S: \n{{ crystal_class }}\n: #{\n%new_obj_ptr\n.value.inspect}\" if Anyolite::RbRefTable.option_active?(:logging)\r\n\r\n        \n%destructor\n = Anyolite::RbTypeCache.destructor_method(\n{{ crystal_class }}\n)\r\n        Anyolite::RbCore.set_data_ptr_and_type(\n{{ obj }}\n, \n%new_obj_ptr\n, Anyolite::RbTypeCache.register(\n{{ crystal_class }}\n, \n%destructor\n))\r\n      \nelse\r\n        \n%new_obj_ptr\n = Pointer(\n{{ crystal_class }}\n).malloc(size: 1, value: \n{{ new_obj }}\n)\r\n        Anyolite::RbRefTable.add(Anyolite::RbRefTable.get_object_id(\n%new_obj_ptr\n.value), \n%new_obj_ptr\n.as(Void*), \n{{ obj }}\n)\r\n\r\n        puts \"> C: \n{{ crystal_class }}\n: #{\n%new_obj_ptr\n.value.inspect}\" if Anyolite::RbRefTable.option_active?(:logging)\r\n\r\n        \n%destructor\n = Anyolite::RbTypeCache.destructor_method(\n{{ crystal_class }}\n)\r\n        Anyolite::RbCore.set_data_ptr_and_type(\n{{ obj }}\n, \n%new_obj_ptr\n, Anyolite::RbTypeCache.register(\n{{ crystal_class }}\n, \n%destructor\n))\r\n      \nend\r\n    \n"}},{"html_id":"call_and_return(rb,proc,regular_args,converted_args,operator=\"\",options={}ofSymbol=>NoReturn,block_ptr=nil)-macro","name":"call_and_return","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"regular_args","external_name":"regular_args","restriction":""},{"name":"converted_args","external_name":"converted_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""},{"name":"block_ptr","default_value":"nil","external_name":"block_ptr","restriction":""}],"args_string":"(rb, proc, regular_args, converted_args, operator = \"\", options = {} of Symbol => NoReturn, block_ptr = nil)","args_html":"(rb, proc, regular_args, converted_args, operator = <span class=\"s\">&quot;&quot;</span>, options = {} <span class=\"k\">of</span> <span class=\"t\">Symbol</span> =&gt; <span class=\"t\">NoReturn</span>, block_ptr = <span class=\"n\">nil</span>)","location":{"filename":"src/macros/FunctionCalls.cr","line_number":3,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/FunctionCalls.cr#L3"},"def":{"name":"call_and_return","args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"regular_args","external_name":"regular_args","restriction":""},{"name":"converted_args","external_name":"converted_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""},{"name":"block_ptr","default_value":"nil","external_name":"block_ptr","restriction":""}],"visibility":"Public","body":"      \n{% if !options[:block_arg_number] %}\r\n        {% proc_arg_string = \"\" %}\r\n      {% else %}{% if options[:block_arg_number] == 0 %}\r\n        {% proc_arg_string = \"do\" %}\r\n      {% else %}\r\n        {% proc_arg_string = (\"do |\" + ((0..(options[:block_arg_number] - 1)).map do |x|\n  \"block_arg_#{x}\"\nend.join(\", \"))) + \"|\" %}\r\n      {% end %}{% end %}\n\r\n\r\n      \n{% if proc.stringify == \"Anyolite::Empty\" %}\r\n        %return_value = {{ operator.id }}(*{{ converted_args }}) {{ proc_arg_string.id }}\r\n      {% else %}\r\n        %return_value = {{ proc }}{{ operator.id }}(*{{ converted_args }}) {{ proc_arg_string.id }}\r\n      {% end %}\n\r\n\r\n      \n{% if options[:block_arg_number] == 0 %}\r\n          %yield_value = Anyolite::RbCore.rb_yield({{ rb }}, {{ block_ptr }}.value, Anyolite::RbCast.return_nil)\r\n          Anyolite::Macro.convert_from_ruby_to_crystal({{ rb }}, %yield_value, {{ options[:block_return_type] }})\r\n        end\r\n      {% else %}{% if options[:block_arg_number] %}\r\n          %block_arg_array = [\r\n            {% for i in 0..(options[:block_arg_number] - 1) %}\r\n              Anyolite::RbCast.return_value({{ rb }}, {{ \"block_arg_#{i}\".id }}),\r\n            {% end %}\r\n          ]\r\n          %yield_value = Anyolite::RbCore.rb_yield_argv({{ rb }}, {{ block_ptr }}.value, {{ options[:block_arg_number] }}, %block_arg_array)\r\n          Anyolite::Macro.convert_from_ruby_to_crystal({{ rb }}, %yield_value, {{ options[:block_return_type] }})\r\n        end\r\n      {% end %}{% end %}\n\r\n\r\n      \n{% if options[:return_nil] %}\r\n        Anyolite::RbCast.return_nil\r\n      {% else %}\r\n        Anyolite::RbCast.return_value({{ rb }}, %return_value)\r\n      {% end %}\n\r\n    \n"}},{"html_id":"call_and_return_instance_method(rb,proc,converted_obj,converted_args,operator=\"\",options={}ofSymbol=>NoReturn,block_ptr=nil)-macro","name":"call_and_return_instance_method","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"converted_obj","external_name":"converted_obj","restriction":""},{"name":"converted_args","external_name":"converted_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""},{"name":"block_ptr","default_value":"nil","external_name":"block_ptr","restriction":""}],"args_string":"(rb, proc, converted_obj, converted_args, operator = \"\", options = {} of Symbol => NoReturn, block_ptr = nil)","args_html":"(rb, proc, converted_obj, converted_args, operator = <span class=\"s\">&quot;&quot;</span>, options = {} <span class=\"k\">of</span> <span class=\"t\">Symbol</span> =&gt; <span class=\"t\">NoReturn</span>, block_ptr = <span class=\"n\">nil</span>)","location":{"filename":"src/macros/FunctionCalls.cr","line_number":92,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/FunctionCalls.cr#L92"},"def":{"name":"call_and_return_instance_method","args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"converted_obj","external_name":"converted_obj","restriction":""},{"name":"converted_args","external_name":"converted_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""},{"name":"block_ptr","default_value":"nil","external_name":"block_ptr","restriction":""}],"visibility":"Public","body":"      \n{% if !options[:block_arg_number] %}\r\n        {% proc_arg_string = \"\" %}\r\n      {% else %}{% if options[:block_arg_number] == 0 %}\r\n        {% proc_arg_string = \"do\" %}\r\n      {% else %}\r\n        {% proc_arg_string = (\"do |\" + ((0..(options[:block_arg_number] - 1)).map do |x|\n  \"block_arg_#{x}\"\nend.join(\", \"))) + \"|\" %}\r\n      {% end %}{% end %}\n\r\n      \r\n      if \n{{ converted_obj }}\n.is_a?(Anyolite::StructWrapper)\r\n        \n%working_content\n = \n{{ converted_obj }}\n.content\r\n\r\n        \n{% if proc.stringify == \"Anyolite::Empty\" %}\r\n          %return_value = %working_content.{{ operator.id }}(*{{ converted_args }}) {{ proc_arg_string.id }}\r\n        {% else %}\r\n          %return_value = %working_content.{{ proc }}{{ operator.id }}(*{{ converted_args }}) {{ proc_arg_string.id }}\r\n        {% end %}\n\r\n\r\n        \n{% if options[:block_arg_number] == 0 %}\r\n            %yield_value = Anyolite::RbCore.rb_yield({{ rb }}, {{ block_ptr }}.value, Anyolite::RbCast.return_nil)\r\n            Anyolite::Macro.convert_from_ruby_to_crystal({{ rb }}, %yield_value, {{ options[:block_return_type] }})\r\n          end\r\n        {% else %}{% if options[:block_arg_number] %}\r\n            %block_arg_array = [\r\n              {% for i in 0..(options[:block_arg_number] - 1) %}\r\n                Anyolite::RbCast.return_value({{ rb }}, {{ \"block_arg_#{i}\".id }}),\r\n              {% end %}\r\n            ]\r\n            %yield_value = Anyolite::RbCore.rb_yield_argv({{ rb }}, {{ block_ptr }}.value, {{ options[:block_arg_number] }}, %block_arg_array)\r\n            Anyolite::Macro.convert_from_ruby_to_crystal({{ rb }}, %yield_value, {{ options[:block_return_type] }})\r\n          end\r\n        {% end %}{% end %}\n\r\n\r\n        \n{{ converted_obj }}\n.content = \n%working_content\n\r\n      \nelse\r\n        \n{% if proc.stringify == \"Anyolite::Empty\" %}\r\n          %return_value = {{ converted_obj }}.{{ operator.id }}(*{{ converted_args }}) {{ proc_arg_string.id }}\r\n        {% else %}\r\n          %return_value = {{ converted_obj }}.{{ proc }}{{ operator.id }}(*{{ converted_args }}) {{ proc_arg_string.id }}\r\n        {% end %}\n\r\n\r\n        \n{% if options[:block_arg_number] == 0 %}\r\n            %yield_value = Anyolite::RbCore.rb_yield({{ rb }}, {{ block_ptr }}.value, Anyolite::RbCast.return_nil)\r\n            Anyolite::Macro.convert_from_ruby_to_crystal({{ rb }}, %yield_value, {{ options[:block_return_type] }})\r\n          end\r\n        {% else %}{% if options[:block_arg_number] %}\r\n            %block_arg_array = [\r\n              {% for i in 0..(options[:block_arg_number] - 1) %}\r\n                Anyolite::RbCast.return_value({{ rb }}, {{ \"block_arg_#{i}\".id }}),\r\n              {% end %}\r\n            ]\r\n            %yield_value = Anyolite::RbCore.rb_yield_argv({{ rb }}, {{ block_ptr }}.value, {{ options[:block_arg_number] }}, %block_arg_array)\r\n            Anyolite::Macro.convert_from_ruby_to_crystal({{ rb }}, %yield_value, {{ options[:block_return_type] }})\r\n          end\r\n        {% end %}{% end %}\n\r\n      \nend\r\n\r\n      \n{% if options[:return_nil] %}\r\n        Anyolite::RbCast.return_nil\r\n      {% else %}\r\n        Anyolite::RbCast.return_value({{ rb }}, %return_value)\r\n      {% end %}\n\r\n    \n"}},{"html_id":"call_and_return_keyword_instance_method(rb,proc,converted_obj,converted_regular_args,keyword_args,kw_args,operator=\"\",options={}ofSymbol=>NoReturn,block_ptr=nil)-macro","name":"call_and_return_keyword_instance_method","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"converted_obj","external_name":"converted_obj","restriction":""},{"name":"converted_regular_args","external_name":"converted_regular_args","restriction":""},{"name":"keyword_args","external_name":"keyword_args","restriction":""},{"name":"kw_args","external_name":"kw_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""},{"name":"block_ptr","default_value":"nil","external_name":"block_ptr","restriction":""}],"args_string":"(rb, proc, converted_obj, converted_regular_args, keyword_args, kw_args, operator = \"\", options = {} of Symbol => NoReturn, block_ptr = nil)","args_html":"(rb, proc, converted_obj, converted_regular_args, keyword_args, kw_args, operator = <span class=\"s\">&quot;&quot;</span>, options = {} <span class=\"k\">of</span> <span class=\"t\">Symbol</span> =&gt; <span class=\"t\">NoReturn</span>, block_ptr = <span class=\"n\">nil</span>)","location":{"filename":"src/macros/FunctionCalls.cr","line_number":156,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/FunctionCalls.cr#L156"},"def":{"name":"call_and_return_keyword_instance_method","args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"converted_obj","external_name":"converted_obj","restriction":""},{"name":"converted_regular_args","external_name":"converted_regular_args","restriction":""},{"name":"keyword_args","external_name":"keyword_args","restriction":""},{"name":"kw_args","external_name":"kw_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""},{"name":"block_ptr","default_value":"nil","external_name":"block_ptr","restriction":""}],"visibility":"Public","body":"      \n{% if !options[:block_arg_number] %}\r\n        {% proc_arg_string = \"\" %}\r\n      {% else %}{% if options[:block_arg_number] == 0 %}\r\n        {% proc_arg_string = \"do\" %}\r\n      {% else %}\r\n        {% proc_arg_string = (\"do |\" + ((0..(options[:block_arg_number] - 1)).map do |x|\n  \"block_arg_#{x}\"\nend.join(\", \"))) + \"|\" %}\r\n      {% end %}{% end %}\n\r\n\r\n      if \n{{ converted_obj }}\n.is_a?(Anyolite::StructWrapper)\r\n        \n%working_content\n = \n{{ converted_obj }}\n.content\r\n\r\n        \n{% if proc.stringify == \"Anyolite::Empty\" %}\r\n          %return_value = %working_content.{{ operator.id }}(\r\n        {% else %}\r\n          %return_value = %working_content.{{ proc }}{{ operator.id }}(\r\n        {% end %}\n\r\n          \n{% if options[:empty_regular] %}\r\n            {% c = 0 %}\r\n            {% for keyword in keyword_args %}\r\n              {{ keyword.var.id }}: Anyolite::Macro.convert_from_ruby_to_crystal({{ rb }}, {{ kw_args }}.values[{{ c }}], {{ keyword }}, options: {{ options }}, debug_information: {{ (proc.stringify + \" - \") + keyword_args.stringify }}),\r\n              {% c += 1 %}\r\n            {% end %}\r\n          {% else %}\r\n            *{{ converted_regular_args }},\r\n            {% c = 0 %}\r\n            {% for keyword in keyword_args %}\r\n              {{ keyword.var.id }}: Anyolite::Macro.convert_from_ruby_to_crystal({{ rb }}, {{ kw_args }}.values[{{ c }}], {{ keyword }}, options: {{ options }}, debug_information: {{ (proc.stringify + \" - \") + keyword_args.stringify }}),\r\n              {% c += 1 %}\r\n            {% end %}\r\n          {% end %}\n\r\n        ) \n{{ proc_arg_string.id }}\n\r\n\r\n        \n{% if options[:block_arg_number] == 0 %}\r\n            %yield_value = Anyolite::RbCore.rb_yield({{ rb }}, {{ block_ptr }}.value, Anyolite::RbCast.return_nil)\r\n            Anyolite::Macro.convert_from_ruby_to_crystal({{ rb }}, %yield_value, {{ options[:block_return_type] }})\r\n          end\r\n        {% else %}{% if options[:block_arg_number] %}\r\n            %block_arg_array = [\r\n              {% for i in 0..(options[:block_arg_number] - 1) %}\r\n                Anyolite::RbCast.return_value({{ rb }}, {{ \"block_arg_#{i}\".id }}),\r\n              {% end %}\r\n            ]\r\n            %yield_value = Anyolite::RbCore.rb_yield_argv({{ rb }}, {{ block_ptr }}.value, {{ options[:block_arg_number] }}, %block_arg_array)\r\n            Anyolite::Macro.convert_from_ruby_to_crystal({{ rb }}, %yield_value, {{ options[:block_return_type] }})\r\n          end\r\n        {% end %}{% end %}\n\r\n\r\n        \n{{ converted_obj }}\n.content = \n%working_content\n\r\n      \nelse\r\n\r\n        \n{% if proc.stringify == \"Anyolite::Empty\" %}\r\n          %return_value = {{ converted_obj }}.{{ operator.id }}(\r\n        {% else %}\r\n          %return_value = {{ converted_obj }}.{{ proc }}{{ operator.id }}(\r\n        {% end %}\n\r\n          \n{% if options[:empty_regular] %}\r\n            {% c = 0 %}\r\n            {% for keyword in keyword_args %}\r\n              {{ keyword.var.id }}: Anyolite::Macro.convert_from_ruby_to_crystal({{ rb }}, {{ kw_args }}.values[{{ c }}], {{ keyword }}, options: {{ options }}, debug_information: {{ (proc.stringify + \" - \") + keyword_args.stringify }}),\r\n              {% c += 1 %}\r\n            {% end %}\r\n          {% else %}\r\n            *{{ converted_regular_args }},\r\n            {% c = 0 %}\r\n            {% for keyword in keyword_args %}\r\n              {{ keyword.var.id }}: Anyolite::Macro.convert_from_ruby_to_crystal({{ rb }}, {{ kw_args }}.values[{{ c }}], {{ keyword }}, options: {{ options }}, debug_information: {{ (proc.stringify + \" - \") + keyword_args.stringify }}),\r\n              {% c += 1 %}\r\n            {% end %}\r\n          {% end %}\n\r\n        ) \n{{ proc_arg_string.id }}\n\r\n\r\n        \n{% if options[:block_arg_number] == 0 %}\r\n            %yield_value = Anyolite::RbCore.rb_yield({{ rb }}, {{ block_ptr }}.value, Anyolite::RbCast.return_nil)\r\n            Anyolite::Macro.convert_from_ruby_to_crystal({{ rb }}, %yield_value, {{ options[:block_return_type] }})\r\n          end\r\n        {% else %}{% if options[:block_arg_number] %}\r\n            %block_arg_array = [\r\n              {% for i in 0..(options[:block_arg_number] - 1) %}\r\n                Anyolite::RbCast.return_value({{ rb }}, {{ \"block_arg_#{i}\".id }}),\r\n              {% end %}\r\n            ]\r\n            %yield_value = Anyolite::RbCore.rb_yield_argv({{ rb }}, {{ block_ptr }}.value, {{ options[:block_arg_number] }}, %block_arg_array)\r\n            Anyolite::Macro.convert_from_ruby_to_crystal({{ rb }}, %yield_value, {{ options[:block_return_type] }})\r\n          end\r\n        {% end %}{% end %}\n\r\n      \nend\r\n\r\n      \n{% if options[:return_nil] %}\r\n        Anyolite::RbCast.return_nil\r\n      {% else %}\r\n        Anyolite::RbCast.return_value({{ rb }}, %return_value)\r\n      {% end %}\n\r\n    \n"}},{"html_id":"call_and_return_keyword_method(rb,proc,converted_regular_args,keyword_args,kw_args,operator=\"\",options={}ofSymbol=>NoReturn,block_ptr=nil)-macro","name":"call_and_return_keyword_method","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"converted_regular_args","external_name":"converted_regular_args","restriction":""},{"name":"keyword_args","external_name":"keyword_args","restriction":""},{"name":"kw_args","external_name":"kw_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""},{"name":"block_ptr","default_value":"nil","external_name":"block_ptr","restriction":""}],"args_string":"(rb, proc, converted_regular_args, keyword_args, kw_args, operator = \"\", options = {} of Symbol => NoReturn, block_ptr = nil)","args_html":"(rb, proc, converted_regular_args, keyword_args, kw_args, operator = <span class=\"s\">&quot;&quot;</span>, options = {} <span class=\"k\">of</span> <span class=\"t\">Symbol</span> =&gt; <span class=\"t\">NoReturn</span>, block_ptr = <span class=\"n\">nil</span>)","location":{"filename":"src/macros/FunctionCalls.cr","line_number":40,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/FunctionCalls.cr#L40"},"def":{"name":"call_and_return_keyword_method","args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"converted_regular_args","external_name":"converted_regular_args","restriction":""},{"name":"keyword_args","external_name":"keyword_args","restriction":""},{"name":"kw_args","external_name":"kw_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""},{"name":"block_ptr","default_value":"nil","external_name":"block_ptr","restriction":""}],"visibility":"Public","body":"      \n{% if !options[:block_arg_number] %}\r\n        {% proc_arg_string = \"\" %}\r\n      {% else %}{% if options[:block_arg_number] == 0 %}\r\n        {% proc_arg_string = \"do\" %}\r\n      {% else %}\r\n        {% proc_arg_string = (\"do |\" + ((0..(options[:block_arg_number] - 1)).map do |x|\n  \"block_arg_#{x}\"\nend.join(\", \"))) + \"|\" %}\r\n      {% end %}{% end %}\n\r\n\r\n      \n{% if proc.stringify == \"Anyolite::Empty\" %}\r\n        %return_value = {{ operator.id }}(\r\n      {% else %}\r\n        %return_value = {{ proc }}{{ operator.id }}(\r\n      {% end %}\n\r\n        \n{% if options[:empty_regular] %}\r\n          {% c = 0 %}\r\n          {% for keyword in keyword_args %}\r\n            {{ keyword.var.id }}: Anyolite::Macro.convert_from_ruby_to_crystal({{ rb }}, {{ kw_args }}.values[{{ c }}], {{ keyword }}, options: {{ options }}, debug_information: {{ (proc.stringify + \" - \") + keyword_args.stringify }}),\r\n            {% c += 1 %}\r\n          {% end %}\r\n        {% else %}\r\n          *{{ converted_regular_args }},\r\n          {% c = 0 %}\r\n          {% for keyword in keyword_args %}\r\n            {{ keyword.var.id }}: Anyolite::Macro.convert_from_ruby_to_crystal({{ rb }}, {{ kw_args }}.values[{{ c }}], {{ keyword }}, options: {{ options }}, debug_information: {{ (proc.stringify + \" - \") + keyword_args.stringify }}),\r\n            {% c += 1 %}\r\n          {% end %}\r\n        {% end %}\n\r\n      ) \n{{ proc_arg_string.id }}\n\r\n\r\n      \n{% if options[:block_arg_number] == 0 %}\r\n          %yield_value = Anyolite::RbCore.rb_yield({{ rb }}, {{ block_ptr }}.value, Anyolite::RbCast.return_nil)\r\n          Anyolite::Macro.convert_from_ruby_to_crystal({{ rb }}, %yield_value, {{ options[:block_return_type] }})\r\n        end\r\n      {% else %}{% if options[:block_arg_number] %}\r\n          %block_arg_array = [\r\n            {% for i in 0..(options[:block_arg_number] - 1) %}\r\n              Anyolite::RbCast.return_value({{ rb }}, {{ \"block_arg_#{i}\".id }}),\r\n            {% end %}\r\n          ]\r\n          %yield_value = Anyolite::RbCore.rb_yield_argv({{ rb }}, {{ block_ptr }}.value, {{ options[:block_arg_number] }}, %block_arg_array)\r\n          Anyolite::Macro.convert_from_ruby_to_crystal({{ rb }}, %yield_value, {{ options[:block_return_type] }})\r\n        end\r\n      {% end %}{% end %}\n\r\n\r\n      \n{% if options[:return_nil] %}\r\n        Anyolite::RbCast.return_nil\r\n      {% else %}\r\n        Anyolite::RbCast.return_value({{ rb }}, %return_value)\r\n      {% end %}\n\r\n    \n"}},{"html_id":"cast_to_union_value(rb,value,types,options={}ofSymbol=>NoReturn,debug_information=nil)-macro","name":"cast_to_union_value","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"value","external_name":"value","restriction":""},{"name":"types","external_name":"types","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""},{"name":"debug_information","default_value":"nil","external_name":"debug_information","restriction":""}],"args_string":"(rb, value, types, options = {} of Symbol => NoReturn, debug_information = nil)","args_html":"(rb, value, types, options = {} <span class=\"k\">of</span> <span class=\"t\">Symbol</span> =&gt; <span class=\"t\">NoReturn</span>, debug_information = <span class=\"n\">nil</span>)","location":{"filename":"src/macros/UnionCasts.cr","line_number":3,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/UnionCasts.cr#L3"},"def":{"name":"cast_to_union_value","args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"value","external_name":"value","restriction":""},{"name":"types","external_name":"types","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""},{"name":"debug_information","default_value":"nil","external_name":"debug_information","restriction":""}],"visibility":"Public","body":"      _final_value = :invalid\r\n\r\n      \n{% for type in types %}\r\n        {% if type.resolve? %}\r\n          Anyolite::Macro.check_and_cast_union_type({{ rb }}, {{ value }}, {{ type }}, {{ type }}, options: {{ options }})\r\n        {% else %}{% if options[:context] %}\r\n          Anyolite::Macro.check_and_cast_union_type({{ rb }}, {{ value }}, {{ options[:context] }}::{{ type.stringify.starts_with?(\"::\") ? type.stringify[2..-1].id : type }}, {{ type }}, options: {{ options }})\r\n        {% else %}\r\n          {% raise(\"Could not resolve type #{type}, which is a #{type.class_name}, in context #{options[:context]} (#{debug_information.id})\") %}\r\n        {% end %}{% end %}\r\n      {% end %}\n\r\n      \r\n      if _final_value.is_a?(Symbol)\r\n        \n# TODO: Better value description\r\n\n        Anyolite::RbCast.casting_error(\n{{ rb }}\n, \n{{ value }}\n, \"\n{{ types }}\n\", nil)\r\n        \n#Anyolite.raise_argument_error(\"Could not determine any value for #\n{{ {value} }}\n with types \n{{ types }}\n in context \n{{ options[:context] }}\n\")\r\n\n        raise(\"Should not be reached\")\r\n      \nelse\r\n        _final_value\r\n      \nend\r\n    \n"}},{"html_id":"check_and_cast_resolved_union_type(rb,value,type,raw_type,options={}ofSymbol=>NoReturn,debug_information=nil)-macro","name":"check_and_cast_resolved_union_type","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"value","external_name":"value","restriction":""},{"name":"type","external_name":"type","restriction":""},{"name":"raw_type","external_name":"raw_type","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""},{"name":"debug_information","default_value":"nil","external_name":"debug_information","restriction":""}],"args_string":"(rb, value, type, raw_type, options = {} of Symbol => NoReturn, debug_information = nil)","args_html":"(rb, value, type, raw_type, options = {} <span class=\"k\">of</span> <span class=\"t\">Symbol</span> =&gt; <span class=\"t\">NoReturn</span>, debug_information = <span class=\"n\">nil</span>)","location":{"filename":"src/macros/UnionCasts.cr","line_number":44,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/UnionCasts.cr#L44"},"def":{"name":"check_and_cast_resolved_union_type","args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"value","external_name":"value","restriction":""},{"name":"type","external_name":"type","restriction":""},{"name":"raw_type","external_name":"raw_type","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""},{"name":"debug_information","default_value":"nil","external_name":"debug_information","restriction":""}],"visibility":"Public","body":"      \n{% if type.resolve <= Nil %}\r\n        if Anyolite::RbCast.check_for_nil({{ value }})\r\n          _final_value = Anyolite::RbCast.cast_to_nil({{ rb }}, {{ value }})\r\n        end\r\n      {% else %}{% if type.resolve <= Bool %}\r\n        if Anyolite::RbCast.check_for_bool({{ value }})\r\n          _final_value = Anyolite::RbCast.cast_to_bool({{ rb }}, {{ value }})\r\n        end\r\n      {% else %}{% if type.resolve == Number %}\r\n        if Anyolite::RbCast.check_for_float({{ value }})\r\n          begin\r\n            _final_value = Float64.new(Anyolite::RbCast.cast_to_float({{ rb }}, {{ value }}))\r\n          rescue OverflowError\r\n            Anyolite.raise_range_error(\"Overflow while casting #{Anyolite::RbCast.cast_to_float({{ rb }}, {{ value }})} to {{ type }}.\")\r\n            Float64.new(0.0)\r\n          end\r\n        end\r\n      {% else %}{% if type.resolve == Int %}\r\n        if Anyolite::RbCast.check_for_fixnum({{ value }})\r\n          begin\r\n            _final_value = Int64.new(Anyolite::RbCast.cast_to_int({{ rb }}, {{ value }}))\r\n          rescue OverflowError\r\n            Anyolite.raise_range_error(\"Overflow while casting #{Anyolite::RbCast.cast_to_int({{ rb }}, {{ value }})} to {{ type }}.\")\r\n            Int64.new(0)\r\n          end\r\n        end\r\n      {% else %}{% if type.resolve <= Int %}\r\n        if Anyolite::RbCast.check_for_fixnum({{ value }})\r\n          begin\r\n            _final_value = {{ type }}.new(Anyolite::RbCast.cast_to_int({{ rb }}, {{ value }}))\r\n          rescue OverflowError\r\n            Anyolite.raise_range_error(\"Overflow while casting #{Anyolite::RbCast.cast_to_int({{ rb }}, {{ value }})} to {{ type }}.\")\r\n            {{ type }}.new(0)\r\n          end\r\n        end\r\n      {% else %}{% if type.resolve == Float %}\r\n        if Anyolite::RbCast.check_for_float({{ value }}) || Anyolite::RbCast.check_for_fixnum({{ value }})\r\n          begin\r\n            _final_value = Float64.new(Anyolite::RbCast.cast_to_float({{ rb }}, {{ value }}))\r\n          rescue OverflowError\r\n            Anyolite.raise_range_error(\"Overflow while casting #{Anyolite::RbCast.cast_to_int({{ rb }}, {{ value }})} to {{ type }}.\")\r\n            Float64.new(0)\r\n          end\r\n        end\r\n      {% else %}{% if type.resolve <= Float %}\r\n        if Anyolite::RbCast.check_for_float({{ value }}) || Anyolite::RbCast.check_for_fixnum({{ value }})\r\n          begin\r\n            _final_value = {{ type }}.new(Anyolite::RbCast.cast_to_float({{ rb }}, {{ value }}))\r\n          rescue OverflowError\r\n            Anyolite.raise_range_error(\"Overflow while casting #{Anyolite::RbCast.cast_to_int({{ rb }}, {{ value }})} to {{ type }}.\")\r\n            {{ type }}.new(0)\r\n          end\r\n        end\r\n      {% else %}{% if type.resolve <= Char %}\r\n        if Anyolite::RbCast.check_for_string({{ value }})\r\n          _final_value = Anyolite::RbCast.cast_to_char({{ rb }}, {{ value }})\r\n        end\r\n      {% else %}{% if type.resolve <= String %}\r\n        if Anyolite::RbCast.check_for_string({{ value }}) || Anyolite::RbCast.check_for_symbol({{ value }})\r\n          _final_value = Anyolite::RbCast.cast_to_string({{ rb }}, {{ value }})\r\n        end\r\n      {% else %}{% if type.resolve <= Anyolite::RbRef %}\r\n        _final_value = {{ type }}.new({{ value }})\r\n      {% else %}{% if type.resolve <= Array %}\r\n        if Anyolite::RbCast.check_for_array({{ value }})\r\n          %array_size = Anyolite::RbCore.array_length({{ value }})\r\n          %converted_array = {{ type }}.new(size: %array_size) do |%index|\r\n            Anyolite::Macro.convert_from_ruby_to_crystal({{ rb }}, Anyolite::RbCore.rb_ary_entry({{ value }}, %index), {{ type.type_vars[0] }})\r\n          end\r\n          _final_value = %converted_array\r\n        end\r\n      {% else %}{% if type.resolve <= Hash %}\r\n        if Anyolite::RbCast.check_for_hash({{ value }})\r\n        %hash_size = Anyolite::RbCore.rb_hash_size({{ rb }}, {{ value }})\r\n\r\n          %all_rb_hash_keys = Anyolite::RbCore.rb_hash_keys({{ rb }}, {{ value }})\r\n          %all_converted_hash_keys = Anyolite::Macro.convert_from_ruby_to_crystal({{ rb }}, %all_rb_hash_keys, Array({{ type.type_vars[0] }}), options: {{ options }})\r\n\r\n          %converted_hash = {{ type }}.new(initial_capacity: %hash_size)\r\n          %all_converted_hash_keys.each_with_index do |%key, %index|\r\n            %rb_key = Anyolite::RbCore.rb_ary_entry(%all_rb_hash_keys, %index)\r\n            %rb_value = Anyolite::RbCore.rb_hash_get({{ rb }}, {{ value }}, %rb_key)\r\n            %converted_hash[%key] = Anyolite::Macro.convert_from_ruby_to_crystal({{ rb }}, %rb_value, {{ type.type_vars[1] }}, options: {{ options }})\r\n          end\r\n\r\n          _final_value = %converted_hash\r\n        end\r\n      {% else %}{% if type.resolve <= Pointer %}\r\n        if Anyolite::RbCast.check_for_data({{ value }}) && Anyolite::RbCast.check_custom_type({{ rb }}, {{ value }}, Anyolite::HelperClasses::AnyolitePointer)\r\n          %helper_ptr = Anyolite::Macro.convert_from_ruby_object({{ rb }}, {{ value }}, Anyolite::HelperClasses::AnyolitePointer).value\r\n          _final_value = Box({{ type }}).unbox(%helper_ptr.retrieve_ptr)\r\n        end\r\n      {% else %}{% if type.resolve <= Struct || type.resolve <= Enum %}\r\n        if Anyolite::RbCast.check_for_data({{ value }}) && Anyolite::RbCast.check_custom_type({{ rb }}, {{ value }}, {{ type }})\r\n          _final_value = Anyolite::Macro.convert_from_ruby_struct({{ rb }}, {{ value }}, {{ type }}).value.content\r\n        end\r\n      {% else %}{% if type.resolve? %}\r\n        if Anyolite::RbCast.check_for_data({{ value }}) && Anyolite::RbCast.check_custom_type({{ rb }}, {{ value }}, {{ type }})\r\n          _final_value = Anyolite::Macro.convert_from_ruby_object({{ rb }}, {{ value }}, {{ type }}).value\r\n        end\r\n      {% else %}\r\n        {% raise(\"Could not resolve type #{type}, which is a #{type.class_name} (#{debug_information.id})\") %}\r\n      {% end %}{% end %}{% end %}{% end %}{% end %}{% end %}{% end %}{% end %}{% end %}{% end %}{% end %}{% end %}{% end %}{% end %}{% end %}\n\r\n    \n"}},{"html_id":"check_and_cast_union_type(rb,value,type,raw_type,options={}ofSymbol=>NoReturn,debug_information=nil)-macro","name":"check_and_cast_union_type","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"value","external_name":"value","restriction":""},{"name":"type","external_name":"type","restriction":""},{"name":"raw_type","external_name":"raw_type","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""},{"name":"debug_information","default_value":"nil","external_name":"debug_information","restriction":""}],"args_string":"(rb, value, type, raw_type, options = {} of Symbol => NoReturn, debug_information = nil)","args_html":"(rb, value, type, raw_type, options = {} <span class=\"k\">of</span> <span class=\"t\">Symbol</span> =&gt; <span class=\"t\">NoReturn</span>, debug_information = <span class=\"n\">nil</span>)","location":{"filename":"src/macros/UnionCasts.cr","line_number":26,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/UnionCasts.cr#L26"},"def":{"name":"check_and_cast_union_type","args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"value","external_name":"value","restriction":""},{"name":"type","external_name":"type","restriction":""},{"name":"raw_type","external_name":"raw_type","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""},{"name":"debug_information","default_value":"nil","external_name":"debug_information","restriction":""}],"visibility":"Public","body":"      \n{% if type.resolve? %}\r\n        Anyolite::Macro.check_and_cast_resolved_union_type({{ rb }}, {{ value }}, {{ type }}, {{ type }})\r\n      {% else %}{% if options[:context] %}\r\n        {% if options[:context].names[0..-2].size > 0 %}\r\n          {% new_context = ((options[:context].names[0..-2].join(\"::\")).gsub(/(\\:\\:)+/, \"::\")).id %}\r\n          {% options[:context] = new_context %}\r\n          Anyolite::Macro.check_and_cast_union_type({{ rb }}, {{ value }}, {{ options[:context] }}::{{ raw_type.stringify.starts_with?(\"::\") ? raw_type[2..-1] : raw_type }}, {{ raw_type }}, options: {{ options }})\r\n        {% else %}\r\n          Anyolite::Macro.check_and_cast_union_type({{ rb }}, {{ value }}, {{ raw_type }}, {{ raw_type }})\r\n        {% end %}\r\n      {% else %}\r\n        {% raise(\"Could not resolve type #{type}, which is a #{type.class_name} (#{debug_information.id})\") %}\r\n      {% end %}{% end %}\n\r\n    \n"}},{"html_id":"convert_from_ruby_object(rb,obj,crystal_type)-macro","name":"convert_from_ruby_object","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"obj","external_name":"obj","restriction":""},{"name":"crystal_type","external_name":"crystal_type","restriction":""}],"args_string":"(rb, obj, crystal_type)","args_html":"(rb, obj, crystal_type)","location":{"filename":"src/macros/RubyConversions.cr","line_number":3,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/RubyConversions.cr#L3"},"def":{"name":"convert_from_ruby_object","args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"obj","external_name":"obj","restriction":""},{"name":"crystal_type","external_name":"crystal_type","restriction":""}],"visibility":"Public","body":"      if !Anyolite::RbCore.get_data_ptr(\n{{ obj }}\n)\r\n        \n%obj_class\n = Anyolite::RbCore.get_class_of_obj(\n{{ rb }}\n, \n{{ obj }}\n)\r\n\r\n        \n%rb_class_name\n = String.new(Anyolite::RbCore.rb_class_name(\n{{ rb }}\n, \n%obj_class\n))\r\n        Anyolite.raise_runtime_error \"Object of class #{\n%rb_class_name\n} has content incompatible to Crystal class #{\n{{ crystal_type.stringify }}\n}.\"\r\n      \nend\r\n\r\n      if !Anyolite::RbCast.check_custom_type(\n{{ rb }}\n, \n{{ obj }}\n, \n{{ crystal_type }}\n)\r\n        \n%obj_class\n = Anyolite::RbCore.get_class_of_obj(\n{{ rb }}\n, \n{{ obj }}\n)\r\n\r\n        \n%rb_class_name\n = String.new(Anyolite::RbCore.rb_class_name(\n{{ rb }}\n, \n%obj_class\n))\r\n        Anyolite.raise_argument_error(\"Invalid data type #{\n%rb_class_name\n} for object class #{\n{{ crystal_type.stringify }}\n}.\")\r\n      \nend\r\n\r\n      \n%ptr\n = Anyolite::RbCore.get_data_ptr(\n{{ obj }}\n)\r\n      \n%ptr\n.as(\n{{ crystal_type }}\n*)\r\n    \n"}},{"html_id":"convert_from_ruby_struct(rb,obj,crystal_type)-macro","name":"convert_from_ruby_struct","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"obj","external_name":"obj","restriction":""},{"name":"crystal_type","external_name":"crystal_type","restriction":""}],"args_string":"(rb, obj, crystal_type)","args_html":"(rb, obj, crystal_type)","location":{"filename":"src/macros/RubyConversions.cr","line_number":22,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/RubyConversions.cr#L22"},"def":{"name":"convert_from_ruby_struct","args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"obj","external_name":"obj","restriction":""},{"name":"crystal_type","external_name":"crystal_type","restriction":""}],"visibility":"Public","body":"      if !Anyolite::RbCore.get_data_ptr(\n{{ obj }}\n)\r\n        \n%obj_class\n = Anyolite::RbCore.get_class_of_obj(\n{{ rb }}\n, \n{{ obj }}\n)\r\n\r\n        \n%rb_class_name\n = String.new(Anyolite::RbCore.rb_class_name(\n{{ rb }}\n, \n%obj_class\n))\r\n        Anyolite.raise_runtime_error \"Object of class #{\n%rb_class_name\n} has content incompatible to Crystal struct #{\n{{ crystal_type.stringify }}\n}.\"\r\n      \nend\r\n\r\n      if !Anyolite::RbCast.check_custom_type(\n{{ rb }}\n, \n{{ obj }}\n, \n{{ crystal_type }}\n)\r\n        \n%obj_class\n = Anyolite::RbCore.get_class_of_obj(\n{{ rb }}\n, \n{{ obj }}\n)\r\n\r\n        \n%rb_class_name\n = String.new(Anyolite::RbCore.rb_class_name(\n{{ rb }}\n, \n%obj_class\n))\r\n        Anyolite.raise_argument_error(\"Invalid data type #{\n%rb_class_name\n} for struct class #{\n{{ crystal_type.stringify }}\n}\")\r\n      \nend\r\n      \r\n      \n%ptr\n = Anyolite::RbCore.get_data_ptr(\n{{ obj }}\n)\r\n      \n%ptr\n.as(Anyolite::StructWrapper(\n{{ crystal_type }}\n)*)\r\n    \n"}},{"html_id":"convert_from_ruby_to_crystal(rb,arg,arg_type,options={}ofSymbol=>NoReturn,debug_information=nil)-macro","name":"convert_from_ruby_to_crystal","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"arg","external_name":"arg","restriction":""},{"name":"arg_type","external_name":"arg_type","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""},{"name":"debug_information","default_value":"nil","external_name":"debug_information","restriction":""}],"args_string":"(rb, arg, arg_type, options = {} of Symbol => NoReturn, debug_information = nil)","args_html":"(rb, arg, arg_type, options = {} <span class=\"k\">of</span> <span class=\"t\">Symbol</span> =&gt; <span class=\"t\">NoReturn</span>, debug_information = <span class=\"n\">nil</span>)","location":{"filename":"src/macros/ArgConversions.cr","line_number":119,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/ArgConversions.cr#L119"},"def":{"name":"convert_from_ruby_to_crystal","args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"arg","external_name":"arg","restriction":""},{"name":"arg_type","external_name":"arg_type","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""},{"name":"debug_information","default_value":"nil","external_name":"debug_information","restriction":""}],"visibility":"Public","body":"      \n{% if (arg_type.stringify.includes?(\"->\")) || (arg_type.stringify.includes?(\" Proc(\")) %}\r\n        {% puts(\"\\e[33m> INFO: Proc types are not allowed as arguments (#{debug_information.id}).\\e[0m\") %}\r\n        raise \"Proc types are not allowed as arguments ({{ debug_information.id }})\"\r\n      {% else %}{% if arg_type.stringify.includes?(\" Slice(\") %}\r\n        {% puts(\"\\e[33m> INFO: Slice types are not allowed as arguments (#{debug_information.id}).\\e[0m\") %}\r\n        raise \"Slice types are not allowed as arguments ({{ debug_information.id }})\"\r\n      {% else %}{% if options[:type_var_names] && (options[:type_var_names].includes?(arg_type.type)) %}\r\n        {% options[:type_var_names].each_with_index do |element, index|\n  if element == arg_type.type\n    result = index\n  end\nend %}\r\n        Anyolite::Macro.convert_from_ruby_to_crystal({{ rb }}, {{ arg }}, {{ options[:type_vars][result] }}, options: {{ {:context => options[:context]} }}, debug_information: {{ debug_information }})\r\n      {% else %}{% if options[:type_var_names] %}\r\n        {% magical_regex = /([\\(\\s\\:])([A-Z]+)([\\),\\s])/ %}\r\n        {% replacement_arg_type = arg_type.type.stringify.gsub(magical_regex, \"\\\\1#\\\\2#\\\\3\") %}\r\n\r\n        {% for type_var_name, index in options[:type_var_names] %}\r\n          {% split_types = replacement_arg_type.split(\"#\") %}\r\n          {% odd = true %}\r\n          {% final_split_types = [] of ASTNode %}\r\n          {% for split_type, split_type_index in split_types %}\r\n            {% if !odd %}\r\n              {% result = nil %}\r\n              {% options[:type_var_names].each_with_index do |element, index|\n  if element.stringify == split_type\n    result = index\n  end\nend %}\r\n              {% if result %}\r\n                {% final_split_types.push(options[:type_vars][result].stringify) %}\r\n              {% else %}\r\n                {% final_split_types.push(split_type) %}\r\n              {% end %}\r\n            {% else %}\r\n              {% final_split_types.push(split_type) %}\r\n            {% end %}\r\n            {% odd = !odd %}\r\n          {% end %}\r\n        {% end %}\r\n\r\n        {% if arg_type.value %}\r\n          {% final_type_def = \"#{arg_type.var} : #{(final_split_types.join(\"\")).id} = #{arg_type.value}\" %}\r\n        {% else %}\r\n          {% final_type_def = \"#{arg_type.var} : #{(final_split_types.join(\"\")).id}\" %}\r\n        {% end %}\r\n\r\n        Anyolite::Macro.convert_from_ruby_to_crystal({{ rb }}, {{ arg }}, {{ final_type_def.id }}, options: {{ {:context => options[:context]} }}, debug_information: {{ debug_information }})\r\n      {% else %}{% if arg_type.is_a?(Call) %}\r\n        Anyolite::Macro.convert_from_ruby_to_crystal({{ rb }}, {{ arg }}, dummy_arg : {{ arg_type }}, options: {{ options }}, debug_information: {{ debug_information }})\r\n      {% else %}{% if arg_type.is_a?(TypeDeclaration) %}\r\n        if Anyolite::RbCast.is_undef?({{ arg }})\r\n          {% if (arg_type.value || (arg_type.value == false)) || (arg_type.value == nil) %}\r\n            {{ arg_type.value }}\r\n          {% else %}\r\n            # Should only happen if no default value was given\r\n            Anyolite.raise_argument_error(\"Undefined argument #{{{ arg }}} of {{ arg_type }} in context {{ options[:context] }} (#{{{ debug_information.stringify }}})\")\r\n            # Code should jump to somewhere else before this point, but we want to have a NoReturn type here\r\n            raise(\"Should not be reached\")\r\n          {% end %}\r\n        else\r\n          {% if arg_type.type.is_a?(Union) %}\r\n            Anyolite::Macro.convert_from_ruby_to_crystal({{ rb }}, {{ arg }}, Union({{ arg_type.type }}), options: {{ options }}, debug_information: {{ debug_information }})\r\n          {% else %}\r\n            Anyolite::Macro.convert_from_ruby_to_crystal({{ rb }}, {{ arg }}, {{ arg_type.type }}, options: {{ options }}, debug_information: {{ debug_information }})\r\n          {% end %}\r\n        end\r\n      # TODO: Check if this might need some improvement\r\n      {% else %}{% if options[:context] && (!(arg_type.stringify.starts_with?(\"Union\"))) %}\r\n        Anyolite::Macro.resolve_from_ruby_to_crystal({{ rb }}, {{ arg }}, {{ options[:context] }}::{{ arg_type.stringify.starts_with?(\"::\") ? arg_type.stringify[2..-1].id : arg_type }}, {{ arg_type }}, options: {{ options }}, debug_information: {{ debug_information }})\r\n      {% else %}\r\n        Anyolite::Macro.resolve_from_ruby_to_crystal({{ rb }}, {{ arg }}, {{ arg_type }}, {{ arg_type }}, options: {{ options }}, debug_information: {{ debug_information }})\r\n      {% end %}{% end %}{% end %}{% end %}{% end %}{% end %}{% end %}\n\r\n    \n"}},{"html_id":"convert_regular_arg(rb,arg,arg_type,options={}ofSymbol=>NoReturn,debug_information=nil)-macro","name":"convert_regular_arg","doc":"Converts Ruby values to Crystal values\r","summary":"<p>Converts Ruby values to Crystal values</p>","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"arg","external_name":"arg","restriction":""},{"name":"arg_type","external_name":"arg_type","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""},{"name":"debug_information","default_value":"nil","external_name":"debug_information","restriction":""}],"args_string":"(rb, arg, arg_type, options = {} of Symbol => NoReturn, debug_information = nil)","args_html":"(rb, arg, arg_type, options = {} <span class=\"k\">of</span> <span class=\"t\">Symbol</span> =&gt; <span class=\"t\">NoReturn</span>, debug_information = <span class=\"n\">nil</span>)","location":{"filename":"src/macros/ArgConversions.cr","line_number":12,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/ArgConversions.cr#L12"},"def":{"name":"convert_regular_arg","args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"arg","external_name":"arg","restriction":""},{"name":"arg_type","external_name":"arg_type","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""},{"name":"debug_information","default_value":"nil","external_name":"debug_information","restriction":""}],"visibility":"Public","body":"      \n{% if (arg_type.stringify.includes?(\"->\")) || (arg_type.stringify.includes?(\" Proc(\")) %}\r\n        {% puts(\"\\e[33m> INFO: Proc types are not allowed as arguments.\\e[0m\") %}\r\n        raise \"Proc types are not allowed as arguments ({{ debug_information.id }})\"\r\n      {% else %}{% if arg_type.stringify.includes?(\" Slice(\") %}\r\n        {% puts(\"\\e[33m> INFO: Slice types are not allowed as arguments (#{debug_information.id}).\\e[0m\") %}\r\n        raise \"Slice types are not allowed as arguments ({{ debug_information.id }})\"\r\n      {% else %}{% if arg_type.is_a?(Generic) %}\r\n        Anyolite::Macro.convert_from_ruby_to_crystal({{ rb }}, {{ arg }}, dummy_arg : {{ arg_type }}, options: {{ options }}, debug_information: {{ debug_information }})\r\n      {% else %}{% if arg_type.is_a?(TypeDeclaration) && arg_type.type.is_a?(Union) %}\r\n        Anyolite::Macro.convert_from_ruby_to_crystal({{ rb }}, {{ arg }}, {{ arg_type }}, options: {{ options }}, debug_information: {{ debug_information }})\r\n      {% else %}{% if arg_type.is_a?(TypeDeclaration) %}\r\n        Anyolite::Macro.convert_regular_arg({{ rb }}, {{ arg }}, {{ arg_type.type }}, options: {{ options }}, debug_information: {{ debug_information }})\r\n      {% else %}{% if options[:context] %}\r\n        Anyolite::Macro.resolve_regular_arg({{ rb }}, {{ arg }}, {{ options[:context] }}::{{ arg_type.stringify.starts_with?(\"::\") ? arg_type.stringify[2..-1].id : arg_type }}, {{ arg_type }}, options: {{ options }}, debug_information: {{ debug_information }})\r\n      {% else %}\r\n        Anyolite::Macro.resolve_regular_arg({{ rb }}, {{ arg }}, {{ arg_type }}, {{ arg_type }}, debug_information: {{ debug_information }})\r\n      {% end %}{% end %}{% end %}{% end %}{% end %}{% end %}\n\r\n    \n"}},{"html_id":"convert_regular_args(rb,args,regular_args,options={}ofSymbol=>NoReturn,debug_information=nil)-macro","name":"convert_regular_args","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"args","external_name":"args","restriction":""},{"name":"regular_args","external_name":"regular_args","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""},{"name":"debug_information","default_value":"nil","external_name":"debug_information","restriction":""}],"args_string":"(rb, args, regular_args, options = {} of Symbol => NoReturn, debug_information = nil)","args_html":"(rb, args, regular_args, options = {} <span class=\"k\">of</span> <span class=\"t\">Symbol</span> =&gt; <span class=\"t\">NoReturn</span>, debug_information = <span class=\"n\">nil</span>)","location":{"filename":"src/macros/ArgConversions.cr","line_number":289,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/ArgConversions.cr#L289"},"def":{"name":"convert_regular_args","args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"args","external_name":"args","restriction":""},{"name":"regular_args","external_name":"regular_args","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""},{"name":"debug_information","default_value":"nil","external_name":"debug_information","restriction":""}],"visibility":"Public","body":"      Tuple.new(\r\n        \n{% c = 0 %}\n\r\n        \n{% if regular_args %}\r\n          {% for arg in regular_args %}\r\n            {% if flag?(:use_general_object_format_chars) %}\r\n              Anyolite::Macro.convert_from_ruby_to_crystal({{ rb }}, {{ args }}[{{ c }}].value, {{ arg }}, options: {{ options }}, debug_information: {{ debug_information }}),\r\n            {% else %}\r\n              Anyolite::Macro.convert_regular_arg({{ rb }}, {{ args }}[{{ c }}].value, {{ arg }}, options: {{ options }}, debug_information: {{ debug_information }}),\r\n            {% end %}\r\n            {% c += 1 %}\r\n          {% end %}\r\n        {% end %}\n\r\n      )\r\n    \n"}},{"html_id":"format_char(arg,options={}ofSymbol=>NoReturn)-macro","name":"format_char","abstract":false,"args":[{"name":"arg","external_name":"arg","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""}],"args_string":"(arg, options = {} of Symbol => NoReturn)","args_html":"(arg, options = {} <span class=\"k\">of</span> <span class=\"t\">Symbol</span> =&gt; <span class=\"t\">NoReturn</span>)","location":{"filename":"src/implementations/mruby/FormatString.cr","line_number":13,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/implementations/mruby/FormatString.cr#L13"},"def":{"name":"format_char","args":[{"name":"arg","external_name":"arg","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""}],"visibility":"Public","body":"      \n{% if arg.is_a?(TypeDeclaration) %}\r\n        {% if arg.type.is_a?(Union) %}\r\n          {% if options[:optional_values] != true %}\r\n            \"|o\"\r\n          {% else %}\r\n            \"o\"\r\n          {% end %}\r\n        {% else %}{% if (options[:optional_values] != true) && arg.value %}\r\n          {% options[:optional_values] = true %}\r\n          \"|\" + Anyolite::Macro.format_char({{ arg.type }}, options: {{ options }})\r\n        {% else %}\r\n          Anyolite::Macro.format_char({{ arg.type }}, options: {{ options }})\r\n        {% end %}{% end %}\r\n      {% else %}{% if options[:context] %}\r\n        Anyolite::Macro.resolve_format_char({{ options[:context] }}::{{ arg.stringify.starts_with?(\"::\") ? arg.stringify[2..-1].id : arg }}, {{ arg }}, options: {{ options }})\r\n      {% else %}\r\n        Anyolite::Macro.resolve_format_char({{ arg }}, {{ arg }})\r\n      {% end %}{% end %}\n\r\n    \n"}},{"html_id":"format_string(args,options={}ofSymbol=>NoReturn)-macro","name":"format_string","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""}],"args_string":"(args, options = {} of Symbol => NoReturn)","args_html":"(args, options = {} <span class=\"k\">of</span> <span class=\"t\">Symbol</span> =&gt; <span class=\"t\">NoReturn</span>)","location":{"filename":"src/implementations/mruby/FormatString.cr","line_number":3,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/implementations/mruby/FormatString.cr#L3"},"def":{"name":"format_string","args":[{"name":"args","external_name":"args","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""}],"visibility":"Public","body":"      \"\" +\r\n      \n{% if args %}\r\n        {% for arg in args %}\r\n          Anyolite::Macro.format_char({{ arg }}, options: {{ options }}) +\r\n        {% end %}\r\n      {% end %}\n\r\n      \"\"\r\n    \n"}},{"html_id":"generate_arg_tuple(rb,args,options={}ofSymbol=>NoReturn)-macro","name":"generate_arg_tuple","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"args","external_name":"args","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""}],"args_string":"(rb, args, options = {} of Symbol => NoReturn)","args_html":"(rb, args, options = {} <span class=\"k\">of</span> <span class=\"t\">Symbol</span> =&gt; <span class=\"t\">NoReturn</span>)","location":{"filename":"src/macros/ArgTuples.cr","line_number":3,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/ArgTuples.cr#L3"},"def":{"name":"generate_arg_tuple","args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"args","external_name":"args","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""}],"visibility":"Public","body":"      Tuple.new(\r\n        \n{% if args %}\r\n          {% for arg in args %}\r\n            {% if arg.is_a?(TypeDeclaration) %}\r\n              {% if arg.value %}\r\n                {% if flag?(:use_general_object_format_chars) %}\r\n                  Anyolite::Macro.pointer_type({{ arg }}, options: {{ options }}).malloc(size: 1, value: Anyolite::RbCast.return_value({{ rb }}, {{ arg.value }})),\r\n                {% else %}\r\n                  {% if arg.type.is_a?(Union) %}\r\n                    # This does work, but I'm a bit surprised\r\n                    Anyolite::Macro.pointer_type({{ arg }}, options: {{ options }}).malloc(size: 1, value: Anyolite::RbCast.return_value({{ rb }}, {{ arg.value }})),\r\n                  {% else %}{% if arg.type.resolve <= String %}\r\n                    # The outer gods bless my wretched soul that this does neither segfault nor leak\r\n                    Anyolite::Macro.pointer_type({{ arg }}, options: {{ options }}).malloc(size: 1, value: {{ arg.value }}.to_unsafe),\r\n                  {% else %}{% if arg.type.resolve <= Anyolite::RbRef %}\r\n                    Anyolite::Macro.pointer_type({{ arg }}, options: {{ options }}).malloc(size: 1, value: {{ arg.value }}),\r\n                  # NOTE: This might need some extensions\r\n                  {% else %}{% if arg.type.resolve <= Bool %}\r\n                    Anyolite::Macro.pointer_type({{ arg }}, options: {{ options }}).malloc(size: 1, value: Anyolite::Macro.type_in_ruby({{ arg }}, options: {{ options }}).new({{ arg.value }} ? 1 : 0)),\r\n                  {% else %}{% if arg.type.resolve <= Number %}\r\n                    Anyolite::Macro.pointer_type({{ arg }}, options: {{ options }}).malloc(size: 1, value: Anyolite::Macro.type_in_ruby({{ arg }}, options: {{ options }}).new({{ arg.value }})),\r\n                  {% else %}\r\n                    Anyolite::Macro.pointer_type({{ arg }}, options: {{ options }}).malloc(size: 1, value: Anyolite::RbCast.return_value({{ rb }}, {{ arg.value }})),\r\n                  {% end %}{% end %}{% end %}{% end %}{% end %}\r\n                {% end %}\r\n              {% else %}\r\n                Anyolite::Macro.pointer_type({{ arg }}, options: {{ options }}).malloc(size: 1),\r\n              {% end %}\r\n            {% else %}\r\n              Anyolite::Macro.pointer_type({{ arg }}, options: {{ options }}).malloc(size: 1),\r\n            {% end %}\r\n          {% end %}\r\n        {% end %}\n\r\n      )\r\n    \n"}},{"html_id":"generate_keyword_argument_struct(rb_interpreter,keyword_args)-macro","name":"generate_keyword_argument_struct","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"keyword_args","external_name":"keyword_args","restriction":""}],"args_string":"(rb_interpreter, keyword_args)","args_html":"(rb_interpreter, keyword_args)","location":{"filename":"src/implementations/mruby/KeywordArgStruct.cr","line_number":3,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/implementations/mruby/KeywordArgStruct.cr#L3"},"def":{"name":"generate_keyword_argument_struct","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"keyword_args","external_name":"keyword_args","restriction":""}],"visibility":"Public","body":"      \n%kw_names\n = Anyolite::Macro.generate_keyword_names(\n{{ rb_interpreter }}\n, \n{{ keyword_args }}\n)\n      \n%kw_args\n = Anyolite::RbCore::KWArgs.new\n      \n%kw_args\n.num = \n{{ keyword_args.size }}\n\n      \n%kw_args\n.values = Pointer(Anyolite::RbCore::RbValue).malloc(size: \n{{ keyword_args.size }}\n)\n      \n%kw_args\n.table = \n%kw_names\n\n      \n%kw_args\n.required = \n{{ keyword_args.select do |i|\n  !i.var\nend.size }}\n\n      \n%kw_args\n.rest = Pointer(Anyolite::RbCore::RbValue).malloc(size: 1)\n      \n%kw_args\n\n    \n"}},{"html_id":"generate_keyword_names(rb_interpreter,keyword_args)-macro","name":"generate_keyword_names","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"keyword_args","external_name":"keyword_args","restriction":""}],"args_string":"(rb_interpreter, keyword_args)","args_html":"(rb_interpreter, keyword_args)","location":{"filename":"src/implementations/mruby/KeywordArgStruct.cr","line_number":14,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/implementations/mruby/KeywordArgStruct.cr#L14"},"def":{"name":"generate_keyword_names","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"keyword_args","external_name":"keyword_args","restriction":""}],"visibility":"Public","body":"      [\n        \n{% for keyword in keyword_args %}\n          Anyolite::RbCore.convert_to_rb_sym({{ rb_interpreter }}, {{ keyword.var.stringify }}),\n        {% end %}\n\n      ]\n    \n"}},{"html_id":"get_converted_args(rb,regular_args,options={}ofSymbol=>NoReturn)-macro","name":"get_converted_args","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"regular_args","external_name":"regular_args","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""}],"args_string":"(rb, regular_args, options = {} of Symbol => NoReturn)","args_html":"(rb, regular_args, options = {} <span class=\"k\">of</span> <span class=\"t\">Symbol</span> =&gt; <span class=\"t\">NoReturn</span>)","location":{"filename":"src/macros/ArgConversions.cr","line_number":305,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/ArgConversions.cr#L305"},"def":{"name":"get_converted_args","args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"regular_args","external_name":"regular_args","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""}],"visibility":"Public","body":"      \n%args\n = Anyolite::Macro.generate_arg_tuple(\n{{ rb }}\n, \n{{ regular_args }}\n, options: \n{{ options }}\n)\r\n      \n%format_string\n = Anyolite::Macro.format_string(\n{{ regular_args }}\n, options: \n{{ options }}\n)\r\n      \r\n      Anyolite::Macro.load_args_into_vars(\n{{ regular_args }}\n, \n%format_string\n, \n%args\n)\r\n\r\n      Anyolite::Macro.convert_regular_args(\n{{ rb }}\n, \n%args\n, \n{{ regular_args }}\n, options: \n{{ options }}\n)\r\n    \n"}},{"html_id":"get_raw_args(rb,regular_args,context=nil)-macro","name":"get_raw_args","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"regular_args","external_name":"regular_args","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""}],"args_string":"(rb, regular_args, context = nil)","args_html":"(rb, regular_args, context = <span class=\"n\">nil</span>)","location":{"filename":"src/macros/ArgConversions.cr","line_number":3,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/ArgConversions.cr#L3"},"def":{"name":"get_raw_args","args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"regular_args","external_name":"regular_args","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""}],"visibility":"Public","body":"      \n{% options = {:context => context} %}\n\r\n      \n%args\n = Anyolite::Macro.generate_arg_tuple(\n{{ rb }}\n, \n{{ regular_args }}\n, options: \n{{ options }}\n)\r\n      \n%format_string\n = Anyolite::Macro.format_string(\n{{ regular_args }}\n, options: \n{{ options }}\n)\r\n      Anyolite::Macro.load_args_into_vars(\n{{ regular_args }}\n, \n%format_string\n, \n%args\n)\r\n      \n%args\n\r\n    \n"}},{"html_id":"load_args_into_vars(args,format_string,regular_arg_tuple,block_ptr=nil)-macro","name":"load_args_into_vars","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""},{"name":"format_string","external_name":"format_string","restriction":""},{"name":"regular_arg_tuple","external_name":"regular_arg_tuple","restriction":""},{"name":"block_ptr","default_value":"nil","external_name":"block_ptr","restriction":""}],"args_string":"(args, format_string, regular_arg_tuple, block_ptr = nil)","args_html":"(args, format_string, regular_arg_tuple, block_ptr = <span class=\"n\">nil</span>)","location":{"filename":"src/implementations/mruby/Implementation.cr","line_number":19,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/implementations/mruby/Implementation.cr#L19"},"def":{"name":"load_args_into_vars","args":[{"name":"args","external_name":"args","restriction":""},{"name":"format_string","external_name":"format_string","restriction":""},{"name":"regular_arg_tuple","external_name":"regular_arg_tuple","restriction":""},{"name":"block_ptr","default_value":"nil","external_name":"block_ptr","restriction":""}],"visibility":"Public","body":"      \n{% if block_ptr %}\n        Anyolite::RbCore.rb_get_args(_rb, {{ format_string }}, *{{ regular_arg_tuple }}, {{ block_ptr }})\n      {% else %}\n        Anyolite::RbCore.rb_get_args(_rb, {{ format_string }}, *{{ regular_arg_tuple }})\n      {% end %}\n\n    \n"}},{"html_id":"load_kw_args_into_vars(regular_args,keyword_args,format_string,regular_arg_tuple,block_ptr=nil)-macro","name":"load_kw_args_into_vars","abstract":false,"args":[{"name":"regular_args","external_name":"regular_args","restriction":""},{"name":"keyword_args","external_name":"keyword_args","restriction":""},{"name":"format_string","external_name":"format_string","restriction":""},{"name":"regular_arg_tuple","external_name":"regular_arg_tuple","restriction":""},{"name":"block_ptr","default_value":"nil","external_name":"block_ptr","restriction":""}],"args_string":"(regular_args, keyword_args, format_string, regular_arg_tuple, block_ptr = nil)","args_html":"(regular_args, keyword_args, format_string, regular_arg_tuple, block_ptr = <span class=\"n\">nil</span>)","location":{"filename":"src/implementations/mruby/Implementation.cr","line_number":27,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/implementations/mruby/Implementation.cr#L27"},"def":{"name":"load_kw_args_into_vars","args":[{"name":"regular_args","external_name":"regular_args","restriction":""},{"name":"keyword_args","external_name":"keyword_args","restriction":""},{"name":"format_string","external_name":"format_string","restriction":""},{"name":"regular_arg_tuple","external_name":"regular_arg_tuple","restriction":""},{"name":"block_ptr","default_value":"nil","external_name":"block_ptr","restriction":""}],"visibility":"Public","body":"      \n%kw_args\n = Anyolite::Macro.generate_keyword_argument_struct(_rb, \n{{ keyword_args }}\n)\n\n      \n{% if block_ptr %}\n        Anyolite::RbCore.rb_get_args(_rb, {{ format_string }}, *{{ regular_arg_tuple }}, pointerof(%kw_args), {{ block_ptr }})\n      {% else %}\n        Anyolite::RbCore.rb_get_args(_rb, {{ format_string }}, *{{ regular_arg_tuple }}, pointerof(%kw_args))\n      {% end %}\n\n\n      \n%kw_args\n\n    \n"}},{"html_id":"new_rb_data_func(&b)-macro","name":"new_rb_data_func","abstract":false,"location":{"filename":"src/implementations/mruby/Implementation.cr","line_number":13,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/implementations/mruby/Implementation.cr#L13"},"def":{"name":"new_rb_data_func","block_arg":{"name":"b","external_name":"b","restriction":""},"visibility":"Public","body":"      Anyolite::RbCore::RbDataFunc.new do |__rb, __ptr|\n        \n{{ b.body }}\n\n      \nend\n    \n"}},{"html_id":"new_rb_func(&b)-macro","name":"new_rb_func","abstract":false,"location":{"filename":"src/implementations/mruby/Implementation.cr","line_number":7,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/implementations/mruby/Implementation.cr#L7"},"def":{"name":"new_rb_func","block_arg":{"name":"b","external_name":"b","restriction":""},"visibility":"Public","body":"      Anyolite::RbCore::RbFunc.new do |_rb, _obj|\n        \n{{ b.body }}\n\n      \nend\n    \n"}},{"html_id":"pointer_type(type,options={}ofSymbol=>NoReturn)-macro","name":"pointer_type","abstract":false,"args":[{"name":"type","external_name":"type","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""}],"args_string":"(type, options = {} of Symbol => NoReturn)","args_html":"(type, options = {} <span class=\"k\">of</span> <span class=\"t\">Symbol</span> =&gt; <span class=\"t\">NoReturn</span>)","location":{"filename":"src/macros/RubyTypes.cr","line_number":52,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/RubyTypes.cr#L52"},"def":{"name":"pointer_type","args":[{"name":"type","external_name":"type","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""}],"visibility":"Public","body":"      \n{% if type.is_a?(TypeDeclaration) %}\r\n        {% if type.type.is_a?(Union) %}\r\n          Pointer(Anyolite::RbCore::RbValue)\r\n        {% else %}\r\n          Anyolite::Macro.pointer_type({{ type.type }}, options: {{ options }})\r\n        {% end %}\r\n      {% else %}{% if options[:context] %}\r\n        Anyolite::Macro.resolve_pointer_type({{ options[:context] }}::{{ type.stringify.starts_with?(\"::\") ? type.stringify[2..-1].id : type }}, {{ type }}, options: {{ options }})\r\n      {% else %}\r\n        Anyolite::Macro.resolve_pointer_type({{ type }}, {{ type }})\r\n      {% end %}{% end %}\n\r\n    \n"}},{"html_id":"resolve_format_char(arg,raw_arg,options={}ofSymbol=>NoReturn)-macro","name":"resolve_format_char","abstract":false,"args":[{"name":"arg","external_name":"arg","restriction":""},{"name":"raw_arg","external_name":"raw_arg","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""}],"args_string":"(arg, raw_arg, options = {} of Symbol => NoReturn)","args_html":"(arg, raw_arg, options = {} <span class=\"k\">of</span> <span class=\"t\">Symbol</span> =&gt; <span class=\"t\">NoReturn</span>)","location":{"filename":"src/implementations/mruby/FormatString.cr","line_number":34,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/implementations/mruby/FormatString.cr#L34"},"def":{"name":"resolve_format_char","args":[{"name":"arg","external_name":"arg","restriction":""},{"name":"raw_arg","external_name":"raw_arg","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""}],"visibility":"Public","body":"      \n{% if arg.resolve? %}\r\n        {% if flag?(:use_general_object_format_chars) %}\r\n          \"o\"\r\n        {% else %}\r\n          {% if arg.resolve <= Bool %}\r\n            \"b\"\r\n          {% else %}{% if arg.resolve <= Int || arg.resolve <= Pointer %}\r\n            \"i\"\r\n          {% else %}{% if arg.resolve <= Float || (arg.resolve == Number) %}\r\n            \"f\"\r\n          {% else %}{% if arg.resolve <= String %}\r\n            \"z\"\r\n          {% else %}{% if arg.resolve <= Array %}\r\n            \"A\"\r\n          {% else %}{% if arg.resolve <= Anyolite::RbRef %}\r\n            \"o\"\r\n          {% else %}\r\n            \"o\"\r\n          {% end %}{% end %}{% end %}{% end %}{% end %}{% end %}\r\n        {% end %}\r\n      {% else %}{% if options[:context] %}\r\n        {% if options[:context].names[0..-2].size > 0 %}\r\n          {% new_context = ((options[:context].names[0..-2].join(\"::\")).gsub(/(::)+/, \"::\")).id %}\r\n          {% options[:context] = new_context %}\r\n          Anyolite::Macro.resolve_format_char({{ new_context }}::{{ raw_arg.stringify.starts_with?(\"::\") ? raw_arg.stringify[2..-1].id : raw_arg }}, {{ raw_arg }}, options: {{ options }})\r\n        {% else %}\r\n          # No context available anymore\r\n          Anyolite::Macro.resolve_format_char({{ raw_arg }}, {{ raw_arg }})\r\n        {% end %}\r\n      {% else %}\r\n        \"o\"\r\n      {% end %}{% end %}\n\r\n    \n"}},{"html_id":"resolve_from_ruby_to_crystal(rb,arg,arg_type,raw_arg_type,options={}ofSymbol=>NoReturn,debug_information=nil)-macro","name":"resolve_from_ruby_to_crystal","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"arg","external_name":"arg","restriction":""},{"name":"arg_type","external_name":"arg_type","restriction":""},{"name":"raw_arg_type","external_name":"raw_arg_type","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""},{"name":"debug_information","default_value":"nil","external_name":"debug_information","restriction":""}],"args_string":"(rb, arg, arg_type, raw_arg_type, options = {} of Symbol => NoReturn, debug_information = nil)","args_html":"(rb, arg, arg_type, raw_arg_type, options = {} <span class=\"k\">of</span> <span class=\"t\">Symbol</span> =&gt; <span class=\"t\">NoReturn</span>, debug_information = <span class=\"n\">nil</span>)","location":{"filename":"src/macros/ArgConversions.cr","line_number":187,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/ArgConversions.cr#L187"},"def":{"name":"resolve_from_ruby_to_crystal","args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"arg","external_name":"arg","restriction":""},{"name":"arg_type","external_name":"arg_type","restriction":""},{"name":"raw_arg_type","external_name":"raw_arg_type","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""},{"name":"debug_information","default_value":"nil","external_name":"debug_information","restriction":""}],"visibility":"Public","body":"      \n{% if (arg_type.stringify.starts_with?(\"Union\")) || (arg_type.stringify.starts_with?(\"::Union\")) %}\r\n        # This sadly needs some uncanny magic\r\n        {% char_parser = \"\" %}\r\n        {% brace_counter = 0 %}\r\n        {% for c in arg_type.stringify[(arg_type.stringify.starts_with?(\"::\") ? 8 : 6)..-2].chars %}\r\n          {% if c == '('\n  brace_counter += 1\nend %}\r\n          {% if c == ')'\n  brace_counter -= 1\nend %}\r\n          {% char_parser += ((brace_counter == 0) && (c == '|') ? ',' : c) %}\r\n        {% end %}\r\n\r\n        Anyolite::Macro.cast_to_union_value({{ rb }}, {{ arg }}, {{ \"[#{char_parser.id}]\".id }}, options: {{ options }}, debug_information: {{ debug_information }})\r\n      {% else %}{% if arg_type.resolve? %}\r\n        {% if arg_type.resolve <= Nil %}\r\n          Anyolite::RbCast.cast_to_nil({{ rb }}, {{ arg }})\r\n        {% else %}{% if arg_type.resolve <= Bool %}\r\n          Anyolite::RbCast.cast_to_bool({{ rb }}, {{ arg }})\r\n        {% else %}{% if arg_type.resolve == Number %}\r\n          begin\r\n            Float64.new(Anyolite::RbCast.cast_to_float({{ rb }}, {{ arg }}))\r\n          rescue OverflowError\r\n            Anyolite.raise_range_error(\"Overflow while casting #{Anyolite::RbCast.cast_to_float({{ rb }}, {{ arg }})} to {{ arg_type }}.\")\r\n            Float64.new(0.0)\r\n          end\r\n        {% else %}{% if arg_type.resolve == Int %}\r\n          begin\r\n            Int64.new(Anyolite::RbCast.cast_to_int({{ rb }}, {{ arg }}))\r\n          rescue OverflowError\r\n            Anyolite.raise_range_error(\"Overflow while casting #{Anyolite::RbCast.cast_to_int({{ rb }}, {{ arg }})} to {{ arg_type }}.\")\r\n            Int64.new(0)\r\n          end\r\n        {% else %}{% if arg_type.resolve <= Int %}\r\n          begin\r\n            {{ arg_type }}.new(Anyolite::RbCast.cast_to_int({{ rb }}, {{ arg }}))\r\n          rescue OverflowError\r\n            Anyolite.raise_range_error(\"Overflow while casting #{Anyolite::RbCast.cast_to_int({{ rb }}, {{ arg }})} to {{ arg_type }}.\")\r\n            {{ arg_type }}.new(0)\r\n          end\r\n        {% else %}{% if arg_type.resolve == Float %}\r\n          begin\r\n            Float64.new(Anyolite::RbCast.cast_to_float({{ rb }}, {{ arg }}))\r\n          rescue OverflowError\r\n            Anyolite.raise_range_error(\"Overflow while casting #{Anyolite::RbCast.cast_to_float({{ rb }}, {{ arg }})} to {{ arg_type }}.\")\r\n            Float64.new(0.0)\r\n          end\r\n        {% else %}{% if arg_type.resolve <= Float %}\r\n          begin\r\n            {{ arg_type }}.new(Anyolite::RbCast.cast_to_float({{ rb }}, {{ arg }}))\r\n          rescue OverflowError\r\n            Anyolite.raise_range_error(\"Overflow while casting #{Anyolite::RbCast.cast_to_float({{ rb }}, {{ arg }})} to {{ arg_type }}.\")\r\n            {{ arg_type }}.new(0.0)\r\n          end\r\n        {% else %}{% if arg_type.resolve <= Char %}\r\n          Anyolite::RbCast.cast_to_char({{ rb }}, {{ arg }})\r\n        {% else %}{% if arg_type.resolve <= String %}\r\n          Anyolite::RbCast.cast_to_string({{ rb }}, {{ arg }})\r\n        {% else %}{% if arg_type.resolve <= Anyolite::RbRef %}\r\n          {{ arg_type }}.new({{ arg }})\r\n        {% else %}{% if arg_type.resolve <= Array %}\r\n          # TODO: Make a macro out of this\r\n          %array_size = Anyolite::RbCore.array_length({{ arg }})\r\n          %converted_array = {{ arg_type }}.new(size: %array_size) do |%index|\r\n            Anyolite::Macro.convert_from_ruby_to_crystal({{ rb }}, Anyolite::RbCore.rb_ary_entry({{ arg }}, %index), {{ arg_type.type_vars[0] }}, options: {{ options }}, debug_information: {{ debug_information }})\r\n          end\r\n          %converted_array\r\n        {% else %}{% if arg_type.resolve <= Hash %}\r\n          %hash_size = Anyolite::RbCore.rb_hash_size({{ rb }}, {{ arg }})\r\n\r\n          %all_rb_hash_keys = Anyolite::RbCore.rb_hash_keys({{ rb }}, {{ arg }})\r\n          %all_converted_hash_keys = Anyolite::Macro.convert_from_ruby_to_crystal({{ rb }}, %all_rb_hash_keys, Array({{ arg_type.type_vars[0] }}), options: {{ options }}, debug_information: {{ debug_information }})\r\n\r\n          %converted_hash = {{ arg_type }}.new(initial_capacity: %hash_size)\r\n          %all_converted_hash_keys.each_with_index do |%key, %index|\r\n            %rb_key = Anyolite::RbCore.rb_ary_entry(%all_rb_hash_keys, %index)\r\n            %rb_value = Anyolite::RbCore.rb_hash_get({{ rb }}, {{ arg }}, %rb_key)\r\n            %converted_hash[%key] = Anyolite::Macro.convert_from_ruby_to_crystal({{ rb }}, %rb_value, {{ arg_type.type_vars[1] }}, options: {{ options }}, debug_information: {{ debug_information }})\r\n          end\r\n\r\n          %converted_hash\r\n        {% else %}{% if arg_type.resolve <= Pointer %}\r\n          %helper_ptr = Anyolite::Macro.convert_from_ruby_object({{ rb }}, {{ arg }}, Anyolite::HelperClasses::AnyolitePointer).value\r\n          Box({{ arg_type }}).unbox(%helper_ptr.retrieve_ptr)\r\n        {% else %}{% if arg_type.resolve <= Struct || arg_type.resolve <= Enum %}\r\n          Anyolite::Macro.convert_from_ruby_struct({{ rb }}, {{ arg }}, {{ arg_type }}).value.content\r\n        {% else %}{% if arg_type.resolve? %}\r\n          Anyolite::Macro.convert_from_ruby_object({{ rb }}, {{ arg }}, {{ arg_type }}).value\r\n        {% else %}\r\n          {% raise(\"Could not resolve type #{arg_type}, which is a #{arg_type.class_name.id} (#{debug_information.id})\") %}\r\n        {% end %}{% end %}{% end %}{% end %}{% end %}{% end %}{% end %}{% end %}{% end %}{% end %}{% end %}{% end %}{% end %}{% end %}{% end %}\r\n      {% else %}{% if options[:context] %}\r\n        {% if options[:context].names[0..-2].size > 0 %}\r\n          {% new_context = ((options[:context].names[0..-2].join(\"::\")).gsub(/(\\:\\:)+/, \"::\")).id %}\r\n          {% options[:context] = new_context %}\r\n          Anyolite::Macro.resolve_from_ruby_to_crystal({{ rb }}, {{ arg }}, {{ new_context }}::{{ raw_arg_type.stringify.starts_with?(\"::\") ? raw_arg_type.stringify[2..-1].id : raw_arg_type }}, {{ raw_arg_type }}, options: {{ options }}, debug_information: {{ debug_information }})\r\n        {% else %}\r\n          Anyolite::Macro.resolve_from_ruby_to_crystal({{ rb }}, {{ arg }}, {{ raw_arg_type }}, {{ raw_arg_type }}, debug_information: {{ debug_information }})\r\n        {% end %}\r\n      {% else %}\r\n        {% raise(\"Could not resolve type #{arg_type}, which is a #{arg_type.class_name.id} (#{debug_information.id})\") %}\r\n      {% end %}{% end %}{% end %}\n\r\n    \n"}},{"html_id":"resolve_pointer_type(type,raw_type,options={}ofSymbol=>NoReturn)-macro","name":"resolve_pointer_type","abstract":false,"args":[{"name":"type","external_name":"type","restriction":""},{"name":"raw_type","external_name":"raw_type","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""}],"args_string":"(type, raw_type, options = {} of Symbol => NoReturn)","args_html":"(type, raw_type, options = {} <span class=\"k\">of</span> <span class=\"t\">Symbol</span> =&gt; <span class=\"t\">NoReturn</span>)","location":{"filename":"src/macros/RubyTypes.cr","line_number":66,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/RubyTypes.cr#L66"},"def":{"name":"resolve_pointer_type","args":[{"name":"type","external_name":"type","restriction":""},{"name":"raw_type","external_name":"raw_type","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""}],"visibility":"Public","body":"      \n{% if type.resolve? %}\r\n        {% if flag?(:use_general_object_format_chars) %}\r\n          Pointer(Anyolite::RbCore::RbValue)\r\n        {% else %}\r\n          {% if type.resolve <= Bool %}\r\n            Pointer(Anyolite::RbCore::RbBool)\r\n          {% else %}{% if type.resolve <= Int %}\r\n            Pointer(Anyolite::RbCore::RbInt)\r\n          {% else %}{% if type.resolve <= Float || (type.resolve == Number) %}\r\n            Pointer(Anyolite::RbCore::RbFloat)\r\n          {% else %}{% if type.resolve <= String %}\r\n            Pointer(LibC::Char*)\r\n          {% else %}{% if type.resolve <= Anyolite::RbRef %}\r\n            Pointer(Anyolite::RbCore::RbValue)\r\n          {% else %}{% if type.resolve <= Array %}\r\n            Pointer(Anyolite::RbCore::RbValue)\r\n          {% else %}\r\n            Pointer(Anyolite::RbCore::RbValue)\r\n          {% end %}{% end %}{% end %}{% end %}{% end %}{% end %}\r\n        {% end %}\r\n      {% else %}{% if options[:context] %}\r\n        {% if options[:context].names[0..-2].size > 0 %}\r\n          {% new_context = ((options[:context].names[0..-2].join(\"::\")).gsub(/(\\:\\:)+/, \"::\")).id %}\r\n          {% options[:context] = new_context %}\r\n          Anyolite::Macro.resolve_pointer_type({{ new_context }}::{{ raw_type.stringify.starts_with?(\"::\") ? raw_type.stringify[2..-1].id : raw_type }}, {{ raw_type }}, options: {{ options }})\r\n        {% else %}\r\n          Anyolite::Macro.resolve_pointer_type({{ raw_type }}, {{ raw_type }})\r\n        {% end %}\r\n      {% else %}\r\n        Pointer(Anyolite::RbCore::RbValue)\r\n      {% end %}{% end %}\n\r\n    \n"}},{"html_id":"resolve_regular_arg(rb,arg,arg_type,raw_arg_type,options={}ofSymbol=>NoReturn,debug_information=nil)-macro","name":"resolve_regular_arg","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"arg","external_name":"arg","restriction":""},{"name":"arg_type","external_name":"arg_type","restriction":""},{"name":"raw_arg_type","external_name":"raw_arg_type","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""},{"name":"debug_information","default_value":"nil","external_name":"debug_information","restriction":""}],"args_string":"(rb, arg, arg_type, raw_arg_type, options = {} of Symbol => NoReturn, debug_information = nil)","args_html":"(rb, arg, arg_type, raw_arg_type, options = {} <span class=\"k\">of</span> <span class=\"t\">Symbol</span> =&gt; <span class=\"t\">NoReturn</span>, debug_information = <span class=\"n\">nil</span>)","location":{"filename":"src/macros/ArgConversions.cr","line_number":32,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/ArgConversions.cr#L32"},"def":{"name":"resolve_regular_arg","args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"arg","external_name":"arg","restriction":""},{"name":"arg_type","external_name":"arg_type","restriction":""},{"name":"raw_arg_type","external_name":"raw_arg_type","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""},{"name":"debug_information","default_value":"nil","external_name":"debug_information","restriction":""}],"visibility":"Public","body":"      \n{% if arg_type.resolve? %}\r\n        {% if arg_type.resolve <= Nil %}\r\n          nil\r\n        {% else %}{% if arg_type.resolve <= Bool %}\r\n          ({{ arg }} != 0)\r\n        {% else %}{% if arg_type.resolve == Number %}\r\n          begin\r\n            Float64.new({{ arg }})\r\n          rescue OverflowError\r\n            Anyolite.raise_range_error(\"Overflow while casting #{{{ arg }}} to {{ arg_type }}.\")\r\n            Float64.new(0.0)\r\n          end\r\n        {% else %}{% if arg_type.resolve == Int %}\r\n          begin\r\n            Int64.new({{ arg }})\r\n          rescue OverflowError\r\n            Anyolite.raise_range_error(\"Overflow while casting #{{{ arg }}} to {{ arg_type }}.\")\r\n            Int64.new(0)\r\n          end\r\n        {% else %}{% if arg_type.resolve <= Int %}\r\n          begin\r\n            {{ arg_type }}.new({{ arg }})\r\n          rescue OverflowError\r\n            Anyolite.raise_range_error(\"Overflow while casting #{{{ arg }}} to {{ arg_type }}.\")\r\n            {{ arg_type }}.new(0)\r\n          end\r\n        {% else %}{% if arg_type.resolve == Float %}\r\n          begin\r\n            Float64.new({{ arg }})\r\n          rescue OverflowError\r\n            Anyolite.raise_range_error(\"Overflow while casting #{{{ arg }}} to {{ arg_type }}.\")\r\n            Float64.new(0.0)\r\n          end\r\n        {% else %}{% if arg_type.resolve <= Float %}\r\n          begin\r\n            {{ arg_type }}.new({{ arg }})\r\n          rescue OverflowError\r\n            Anyolite.raise_range_error(\"Overflow while casting #{{{ arg }}} to {{ arg_type }}.\")\r\n            {{ arg_type }}.new(0.0)\r\n          end\r\n        {% else %}{% if arg_type.resolve <= Char %}\r\n          ({{ arg }}.size > 0 ? {{ arg_type }}.new({{ arg }}[0] : '\\0')\r\n        {% else %}{% if arg_type.resolve <= String %}\r\n          {{ arg_type }}.new({{ arg }})\r\n        {% else %}{% if arg_type.resolve <= Anyolite::RbRef %}\r\n          {{ arg_type }}.new({{ arg }})\r\n        {% else %}{% if arg_type.resolve <= Array %}\r\n          %array_size = Anyolite::RbCore.array_length({{ arg }})\r\n          %converted_array = {{ arg_type }}.new(size: %array_size) do |%index|\r\n            Anyolite::Macro.convert_from_ruby_to_crystal({{ rb }}, Anyolite::RbCore.rb_ary_entry({{ arg }}, %index), {{ arg_type.type_vars[0] }}, options: {{ options }}, debug_information: {{ debug_information }})\r\n          end\r\n          %converted_array\r\n        {% else %}{% if arg_type.resolve <= Hash %}\r\n          %hash_size = Anyolite::RbCore.rb_hash_size({{ rb }}, {{ arg }})\r\n\r\n          %all_rb_hash_keys = Anyolite::RbCore.rb_hash_keys({{ rb }}, {{ arg }})\r\n          %all_converted_hash_keys = Anyolite::Macro.convert_from_ruby_to_crystal({{ rb }}, %all_rb_hash_keys, Array({{ arg_type.type_vars[0] }}), options: {{ options }}, debug_information: {{ debug_information }})\r\n\r\n          %converted_hash = {{ arg_type }}.new(initial_capacity: %hash_size)\r\n          %all_converted_hash_keys.each_with_index do |%key, %index|\r\n            %rb_key = Anyolite::RbCore.rb_ary_entry(%all_rb_hash_keys, %index)\r\n            %rb_value = Anyolite::RbCore.rb_hash_get({{ rb }}, {{ arg }}, %rb_key)\r\n            %converted_hash[%key] = Anyolite::Macro.convert_from_ruby_to_crystal({{ rb }}, %rb_value, {{ arg_type.type_vars[1] }}, options: {{ options }}, debug_information: {{ debug_information }})\r\n          end\r\n\r\n          %converted_hash\r\n        {% else %}{% if arg_type.resolve <= Pointer %}\r\n          {{ arg_type }}.new(address: UInt64.new({{ arg.address }}))\r\n        {% else %}{% if arg_type.resolve <= Struct || arg_type.resolve <= Enum %}\r\n          Anyolite::Macro.convert_from_ruby_struct({{ rb }}, {{ arg }}, {{ arg_type }}).value.content\r\n        {% else %}\r\n          Anyolite::Macro.convert_from_ruby_object({{ rb }}, {{ arg }}, {{ arg_type }}).value\r\n        {% end %}{% end %}{% end %}{% end %}{% end %}{% end %}{% end %}{% end %}{% end %}{% end %}{% end %}{% end %}{% end %}{% end %}\r\n      {% else %}{% if options[:context] %}\r\n        {% if options[:context].names[0..-2].size > 0 %}\r\n          {% new_context = ((options[:context].names[0..-2].join(\"::\")).gsub(/(\\:\\:)+/, \"::\")).id %}\r\n          {% options[:context] = new_context %}\r\n          Anyolite::Macro.resolve_regular_arg({{ rb }}, {{ arg }}, {{ new_context }}::{{ raw_arg_type.stringify.starts_with?(\"::\") ? raw_arg_type.stringify[2..-1].id : raw_arg_type }}, {{ raw_arg_type }}, options: {{ options }}, debug_information: {{ debug_information }})\r\n        {% else %}\r\n          Anyolite::Macro.resolve_regular_arg({{ rb }}, {{ arg }}, {{ raw_arg_type }}, {{ raw_arg_type }}, debug_information: {{ debug_information }})\r\n        {% end %}\r\n      {% else %}\r\n        {% raise(\"Could not resolve #{arg_type}, which is a #{arg_type.class_name}, in any meaningful way (#{debug_information.id})\") %}\r\n      {% end %}{% end %}\n\r\n    \n"}},{"html_id":"resolve_type_in_ruby(type,raw_type,options={}ofSymbol=>NoReturn)-macro","name":"resolve_type_in_ruby","abstract":false,"args":[{"name":"type","external_name":"type","restriction":""},{"name":"raw_type","external_name":"raw_type","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""}],"args_string":"(type, raw_type, options = {} of Symbol => NoReturn)","args_html":"(type, raw_type, options = {} <span class=\"k\">of</span> <span class=\"t\">Symbol</span> =&gt; <span class=\"t\">NoReturn</span>)","location":{"filename":"src/macros/RubyTypes.cr","line_number":17,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/RubyTypes.cr#L17"},"def":{"name":"resolve_type_in_ruby","args":[{"name":"type","external_name":"type","restriction":""},{"name":"raw_type","external_name":"raw_type","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""}],"visibility":"Public","body":"      \n{% if type.resolve? %}\r\n        {% if flag?(:use_general_object_format_chars) %}\r\n          Anyolite::RbCore::RbValue\r\n        {% else %}\r\n          {% if type.resolve <= Bool %}\r\n            Anyolite::RbCore::RbBool\r\n          {% else %}{% if type.resolve <= Int || type.resolve <= Pointer %}\r\n            Anyolite::RbCore::RbInt\r\n          {% else %}{% if type.resolve <= Float || (type.resolve == Number) %}\r\n            Anyolite::RbCore::RbFloat\r\n          {% else %}{% if type.resolve <= String %}\r\n            # Should actually never occur due to special handling before this function\r\n            Pointer(LibC::Char)\r\n          {% else %}{% if type.resolve <= Anyolite::RbRef %}\r\n            Anyolite::RbCore::RbValue\r\n          {% else %}{% if type.resolve <= Array %}\r\n            Anyolite::RbCore::RbValue\r\n          {% else %}\r\n            Anyolite::RbCore::RbValue\r\n          {% end %}{% end %}{% end %}{% end %}{% end %}{% end %}\r\n        {% end %}\r\n      {% else %}{% if options[:context] %}\r\n        {% if options[:context].names[0..-2].size > 0 %}\r\n          {% new_context = ((options[:context].names[0..-2].join(\"::\")).gsub(/(\\:\\:)+/, \"::\")).id %}\r\n          {% options[:context] = new_context %}\r\n          Anyolite::Macro.resolve_type_in_ruby({{ new_context }}::{{ raw_type.stringify.starts_with?(\"::\") ? raw_type.stringify[2..-1].id : raw_type }}, {{ raw_type }}, options: {{ options }})\r\n        {% else %}\r\n          Anyolite::Macro.resolve_type_in_ruby({{ raw_type }}, {{ raw_type }})\r\n        {% end %}\r\n      {% else %}\r\n        Anyolite::RbCore::RbValue\r\n      {% end %}{% end %}\n\r\n    \n"}},{"html_id":"type_in_ruby(type,options={}ofSymbol=>NoReturn)-macro","name":"type_in_ruby","abstract":false,"args":[{"name":"type","external_name":"type","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""}],"args_string":"(type, options = {} of Symbol => NoReturn)","args_html":"(type, options = {} <span class=\"k\">of</span> <span class=\"t\">Symbol</span> =&gt; <span class=\"t\">NoReturn</span>)","location":{"filename":"src/macros/RubyTypes.cr","line_number":3,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/RubyTypes.cr#L3"},"def":{"name":"type_in_ruby","args":[{"name":"type","external_name":"type","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""}],"visibility":"Public","body":"      \n{% if type.is_a?(TypeDeclaration) %}\r\n        {% if type.type.is_a?(Union) %}\r\n          Anyolite::RbCore::RbValue\r\n        {% else %}\r\n          Anyolite::Macro.type_in_ruby({{ type.type }})\r\n        {% end %}\r\n      {% else %}{% if options[:context] %}\r\n        Anyolite::Macro.resolve_type_in_ruby({{ options[:context] }}::{{ type.stringify.starts_with?(\"::\") ? type.stringify[2..-1].id : type }}, {{ type }}, options: {{ options }})\r\n      {% else %}\r\n        Anyolite::Macro.resolve_type_in_ruby({{ type }}, {{ type }})\r\n      {% end %}{% end %}\n\r\n    \n"}},{"html_id":"wrap_all_class_methods(rb_interpreter,crystal_class,exclusions,verbose,context=nil)-macro","name":"wrap_all_class_methods","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"exclusions","external_name":"exclusions","restriction":""},{"name":"verbose","external_name":"verbose","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""}],"args_string":"(rb_interpreter, crystal_class, exclusions, verbose, context = nil)","args_html":"(rb_interpreter, crystal_class, exclusions, verbose, context = <span class=\"n\">nil</span>)","location":{"filename":"src/macros/WrapAll.cr","line_number":208,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/WrapAll.cr#L208"},"def":{"name":"wrap_all_class_methods","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"exclusions","external_name":"exclusions","restriction":""},{"name":"verbose","external_name":"verbose","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""}],"visibility":"Public","body":"      \n{% has_specialized_method = {} of String => Bool %}\n\r\n\r\n      \n{% for method in crystal_class.resolve.class.methods %}\r\n        {% all_annotations_specialize_cm = crystal_class.resolve.annotations(Anyolite::SpecializeClassMethod) %}\r\n        {% annotation_specialize_cm = all_annotations_specialize_cm.find do |element|\n  (element[0].stringify == method.name.stringify) || (element[0] == method.name.stringify)\nend %}\r\n\r\n        {% if method.annotation(Anyolite::Specialize) %}\r\n          {% has_specialized_method[method.name.stringify] = true %}\r\n        {% end %}\r\n\r\n        {% if annotation_specialize_cm %}\r\n          {% has_specialized_method[annotation_specialize_cm[0].id.stringify] = true %}\r\n        {% end %}\r\n      {% end %}\n\r\n\r\n      \n{% how_many_times_wrapped = {} of String => UInt32 %}\n\r\n\r\n      \n{% default_optional_args_to_keyword_args = false %}\n\r\n\r\n      \n{% if !(crystal_class.resolve.annotations(Anyolite::DefaultOptionalArgsToKeywordArgs)).empty? %}\r\n        {% default_optional_args_to_keyword_args = true %}\r\n      {% else %}\r\n        {% for class_ancestor in crystal_class.resolve.ancestors %}\r\n          {% if !(class_ancestor.resolve.annotations(Anyolite::DefaultOptionalArgsToKeywordArgs)).empty? %}\r\n            {% default_optional_args_to_keyword_args = true %}\r\n          {% end %}\r\n        {% end %}\r\n      {% end %}\n\r\n\r\n      \n{% for method, index in crystal_class.resolve.class.methods %}\r\n        {% all_annotations_exclude_cm = crystal_class.resolve.annotations(Anyolite::ExcludeClassMethod) %}\r\n        {% annotation_exclude_cm = all_annotations_exclude_cm.find do |element|\n  element[0].id.stringify == method.name.stringify\nend %}\r\n\r\n        {% all_annotations_specialize_cm = crystal_class.resolve.annotations(Anyolite::SpecializeClassMethod) %}\r\n        {% annotation_specialize_cm = all_annotations_specialize_cm.find do |element|\n  element[0].id.stringify == method.name.stringify\nend %}\r\n\r\n        {% all_annotations_rename_cm = crystal_class.resolve.annotations(Anyolite::RenameClassMethod) %}\r\n        {% annotation_rename_cm = all_annotations_rename_cm.find do |element|\n  element[0].id.stringify == method.name.stringify\nend %}\r\n\r\n        {% all_annotations_without_keywords_cm = crystal_class.resolve.annotations(Anyolite::WrapWithoutKeywordsClassMethod) %}\r\n        {% annotation_without_keyword_cm = all_annotations_without_keywords_cm.find do |element|\n  element[0].id.stringify == method.name.stringify\nend %}\r\n\r\n        {% all_annotations_return_nil_cm = crystal_class.resolve.annotations(Anyolite::ReturnNilClassMethod) %}\r\n        {% annotation_return_nil_cm = all_annotations_return_nil_cm.find do |element|\n  element[0].id.stringify == method.name.stringify\nend %}\r\n\r\n        {% all_annotations_add_block_arg_cm = crystal_class.resolve.annotations(Anyolite::AddBlockArgClassMethod) %}\r\n        {% annotation_add_block_arg_cm = all_annotations_add_block_arg_cm.find do |element|\n  element[0].id.stringify == method.name.stringify\nend %}\r\n\r\n        {% all_annotations_store_block_arg_cm = crystal_class.resolve.annotations(Anyolite::StoreBlockArgClassMethod) %}\r\n        {% annotation_store_block_arg_cm = all_annotations_store_block_arg_cm.find do |element|\n  element[0].id.stringify == method.name.stringify\nend %}\r\n\r\n        {% all_annotations_force_keyword_arg_cm = crystal_class.resolve.annotations(Anyolite::ForceKeywordArgClassMethod) %}\r\n        {% annotation_force_keyword_arg_cm = all_annotations_force_keyword_arg_cm.find do |element|\n  element[0].id.stringify == method.name.stringify\nend %}\r\n\r\n        {% if crystal_class.resolve.annotation(Anyolite::NoKeywordArgs) %}\r\n          {% no_keyword_args = true %}\r\n        {% else %}\r\n          {% no_keyword_args = false %}\r\n        {% end %}\r\n\r\n        {% if method.annotation(Anyolite::Rename) %}\r\n          {% ruby_name = (method.annotation(Anyolite::Rename))[0].id %}\r\n        {% else %}{% if annotation_rename_cm && (method.name.stringify == annotation_rename_cm[0].stringify) %}\r\n          {% ruby_name = annotation_rename_cm[1].id %}\r\n        {% else %}\r\n          {% ruby_name = method.name %}\r\n        {% end %}{% end %}\r\n\r\n        {% if method.annotation(Anyolite::AddBlockArg) %}\r\n          {% block_arg_number = (method.annotation(Anyolite::AddBlockArg))[0] %}\r\n          {% block_return_type = (method.annotation(Anyolite::AddBlockArg))[1] %}\r\n        {% else %}{% if annotation_add_block_arg_cm && (method.name.stringify == annotation_add_block_arg_cm[0].stringify) %}\r\n          {% block_arg_number = annotation_add_block_arg_cm[1] %}\r\n          {% block_return_type = annotation_add_block_arg_cm[2] %}\r\n        {% else %}\r\n          {% block_arg_number = nil %}\r\n          {% block_return_type = nil %}\r\n        {% end %}{% end %}\r\n\r\n        {% added_keyword_args = nil %}\r\n\r\n        {% if (method.annotation(Anyolite::Specialize)) && (method.annotation(Anyolite::Specialize))[1] %}\r\n          {% added_keyword_args = (method.annotation(Anyolite::Specialize))[1] %}\r\n        {% end %}\r\n\r\n        {% if annotation_specialize_cm && ((method.args.stringify == annotation_specialize_cm[1].stringify) || ((method.args.stringify == \"[]\") && (annotation_specialize_cm[1] == nil))) %}\r\n          {% added_keyword_args = annotation_specialize_cm[2] %}\r\n        {% end %}\r\n\r\n        {% without_keywords = false %}\r\n\r\n        {% if method.annotation(Anyolite::WrapWithoutKeywords) %}\r\n          {% without_keywords = (method.annotation(Anyolite::WrapWithoutKeywords))[0] ? (method.annotation(Anyolite::WrapWithoutKeywords))[0] : -1 %}\r\n        {% else %}{% if annotation_without_keyword_cm %}\r\n          {% without_keywords = annotation_without_keyword_cm[1] ? annotation_without_keyword_cm[1] : -1 %}\r\n        {% else %}{% if default_optional_args_to_keyword_args %}\r\n          {% without_keywords = -2 %}\r\n        {% end %}{% end %}{% end %}\r\n\r\n        {% return_nil = false %}\r\n        {% if (method.annotation(Anyolite::ReturnNil)) || (annotation_return_nil_cm) %}\r\n          {% return_nil = true %}\r\n        {% end %}\r\n\r\n        {% store_block_arg = false %}\r\n        {% if (method.annotation(Anyolite::StoreBlockArg)) || (annotation_store_block_arg_cm) %}\r\n          {% store_block_arg = true %}\r\n        {% end %}\r\n\r\n        {% force_keyword_arg = false %}\r\n        {% if (method.annotation(Anyolite::ForceKeywordArg)) || (annotation_force_keyword_arg_cm) %}\r\n          {% force_keyword_arg = true %}\r\n        {% end %}\r\n\r\n        {% if verbose\n  puts(\"> Processing class method #{crystal_class}::#{method.name} to #{ruby_name}\\n--> Args: #{method.args}\")\nend %}\r\n\r\n        {% if method.accepts_block? %}\r\n          {% if verbose\n  puts(\"--> Block arg possible for #{crystal_class}::#{method.name}\")\nend %}\r\n        {% end %}\r\n        \r\n        # Ignore private and protected methods (can't be called from outside, they'd need to be wrapped for this to work)\r\n        {% if method.visibility != (:public) %}\r\n          {% if verbose\n  puts(\"--> Excluding #{crystal_class}::#{method.name} (Exclusion due to visibility)\")\nend %}\r\n        # We already wrapped 'initialize', so we don't need to wrap these\r\n        {% else %}{% if (method.name == \"allocate\") || (method.name == \"new\") %}\r\n          {% if verbose\n  puts(\"--> Excluding #{crystal_class}::#{method.name} (Allocation method)\")\nend %}\r\n        {% else %}{% if (method.name == \"parse?\") && (method.args.stringify == \"[string]\") %}\r\n          {% operator = ruby_name %}\r\n\r\n          Anyolite::Macro.wrap_method_index({{ rb_interpreter }}, {{ crystal_class }}, {{ index }}, \"{{ ruby_name }}\", operator: \"{{ operator }}\", is_class_method: true, added_keyword_args: [string : String], without_keywords: {{ force_keyword_arg ? false : -1 }}, context: {{ context }}, return_nil: {{ return_nil }}, block_arg_number: {{ block_arg_number }}, block_return_type: {{ block_return_type }}, store_block_arg: {{ store_block_arg }})\r\n          {% how_many_times_wrapped[ruby_name.stringify] = how_many_times_wrapped[ruby_name.stringify] ? how_many_times_wrapped[ruby_name.stringify] + 1 : 1 %}\r\n        {% else %}{% if method.name == \"<=\" %}\r\n          {% if verbose\n  puts(\"--> Excluding #{crystal_class}::#{method.name} (Class argument method)\")\nend %}\r\n        # Exclude methods if given as arguments\r\n        {% else %}{% if (exclusions.includes?(method.name.symbolize)) || (exclusions.includes?(method.name.stringify)) %}\r\n          {% if verbose\n  puts(\"--> Excluding #{crystal_class}::#{method.name} (Exclusion argument)\")\nend %}\r\n        # Exclude methods which were annotated to be excluded\r\n        {% else %}{% if (method.annotation(Anyolite::Exclude)) || (annotation_exclude_cm) %}\r\n          {% if verbose\n  puts(\"--> Excluding #{crystal_class}::#{method.name} (Exclusion annotation)\")\nend %}\r\n        # Exclude methods which are not the specialized methods\r\n        {% else %}{% if has_specialized_method[method.name.stringify] && (!((method.annotation(Anyolite::Specialize)) || (annotation_specialize_cm && ((method.args.stringify == annotation_specialize_cm[1].stringify) || ((method.args.stringify == \"[]\") && (annotation_specialize_cm[1] == nil)))))) %}\r\n          {% if verbose\n  puts(\"--> Excluding #{crystal_class}::#{method.name} (Specialization)\")\nend %}\r\n        {% else %}{% if method.name[-1..-1] =~ (/\\W/) %}\r\n          {% operator = ruby_name %}\r\n\r\n          Anyolite::Macro.wrap_method_index({{ rb_interpreter }}, {{ crystal_class }}, {{ index }}, \"{{ ruby_name }}\", operator: \"{{ operator }}\", is_class_method: true, added_keyword_args: {{ added_keyword_args }}, without_keywords: {{ force_keyword_arg ? false : -1 }}, context: {{ context }}, return_nil: {{ return_nil }}, block_arg_number: {{ block_arg_number }}, block_return_type: {{ block_return_type }}, store_block_arg: {{ store_block_arg }})\r\n          {% how_many_times_wrapped[ruby_name.stringify] = how_many_times_wrapped[ruby_name.stringify] ? how_many_times_wrapped[ruby_name.stringify] + 1 : 1 %}\r\n        # Handle other class methods\r\n        {% else %}\r\n          Anyolite::Macro.wrap_method_index({{ rb_interpreter }}, {{ crystal_class }}, {{ index }}, \"{{ ruby_name }}\", is_class_method: true, without_keywords: {{ without_keywords || (no_keyword_args && (!force_keyword_arg)) }}, added_keyword_args: {{ added_keyword_args }}, context: {{ context }}, return_nil: {{ return_nil }}, block_arg_number: {{ block_arg_number }}, block_return_type: {{ block_return_type }}, store_block_arg: {{ store_block_arg }})\r\n          {% how_many_times_wrapped[ruby_name.stringify] = how_many_times_wrapped[ruby_name.stringify] ? how_many_times_wrapped[ruby_name.stringify] + 1 : 1 %}\r\n        {% end %}{% end %}{% end %}{% end %}{% end %}{% end %}{% end %}{% end %}\r\n\r\n        {% if how_many_times_wrapped[ruby_name.stringify] && how_many_times_wrapped[ruby_name.stringify] > 1 %}\r\n          {% puts(\"\\e[31m> WARNING: Method #{crystal_class}::#{ruby_name}\\n--> New arguments: #{method.args}\\n--> Wrapped more than once (#{how_many_times_wrapped[ruby_name.stringify]}).\\e[0m\") %}\r\n        {% end %}\r\n        {% if verbose\n  puts(\"\")\nend %}\r\n      {% end %}\n\r\n    \n"}},{"html_id":"wrap_all_constants(rb_interpreter,crystal_class,exclusions,verbose=false,overwrite=false,context=nil)-macro","name":"wrap_all_constants","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"exclusions","external_name":"exclusions","restriction":""},{"name":"verbose","default_value":"false","external_name":"verbose","restriction":""},{"name":"overwrite","default_value":"false","external_name":"overwrite","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""}],"args_string":"(rb_interpreter, crystal_class, exclusions, verbose = false, overwrite = false, context = nil)","args_html":"(rb_interpreter, crystal_class, exclusions, verbose = <span class=\"n\">false</span>, overwrite = <span class=\"n\">false</span>, context = <span class=\"n\">nil</span>)","location":{"filename":"src/macros/WrapAll.cr","line_number":369,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/WrapAll.cr#L369"},"def":{"name":"wrap_all_constants","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"exclusions","external_name":"exclusions","restriction":""},{"name":"verbose","default_value":"false","external_name":"verbose","restriction":""},{"name":"overwrite","default_value":"false","external_name":"overwrite","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""}],"visibility":"Public","body":"      \n# TODO: Is the context needed here?\r\n\n\r\n      \n# NOTE: This check is necessary due to https://github.com/crystal-lang/crystal/issues/5757\r\n\n      \n{% if crystal_class.resolve.type_vars.empty? %}\r\n        {% for constant, index in crystal_class.resolve.constants %}\r\n          {% all_annotations_exclude_cm = crystal_class.resolve.annotations(Anyolite::ExcludeConstant) %}\r\n          {% annotation_exclude_cm = all_annotations_exclude_cm.find do |element|\n  element[0].id.stringify == constant.stringify\nend %}\r\n\r\n          {% all_annotations_rename_cm = crystal_class.resolve.annotations(Anyolite::RenameConstant) %}\r\n          {% annotation_rename_cm = all_annotations_rename_cm.find do |element|\n  element[0].id.stringify == constant.stringify\nend %}\r\n\r\n          {% if annotation_rename_cm && (constant.stringify == annotation_rename_cm[0].stringify) %}\r\n            {% ruby_name = annotation_rename_cm[1].id %}\r\n          {% else %}\r\n            {% ruby_name = constant %}\r\n          {% end %}\r\n\r\n          {% if verbose\n  puts(\"> Processing constant #{crystal_class}::#{constant} to #{ruby_name}\")\nend %}\r\n          # Exclude methods which were annotated to be excluded\r\n          {% if (exclusions.includes?(constant.symbolize)) || (exclusions.includes?(constant)) %}\r\n            {% if verbose\n  puts(\"--> Excluding #{crystal_class}::#{constant} (Exclusion argument)\")\nend %}\r\n          {% else %}{% if annotation_exclude_cm %}\r\n            {% if verbose\n  puts(\"--> Excluding #{crystal_class}::#{constant} (Exclusion annotation)\")\nend %}\r\n          {% else %}\r\n            Anyolite::Macro.wrap_constant_or_class({{ rb_interpreter }}, {{ crystal_class }}, \"{{ ruby_name }}\", {{ constant }}, overwrite: {{ overwrite }}, verbose: {{ verbose }})\r\n          {% end %}{% end %}\r\n          {% if verbose\n  puts(\"\")\nend %}\r\n        {% end %}\r\n      {% end %}\n\r\n    \n"}},{"html_id":"wrap_all_instance_methods(rb_interpreter,crystal_class,exclusions,verbose,context=nil,use_enum_methods=false,wrap_equality_method=false,other_source=nil,later_ancestors=nil)-macro","name":"wrap_all_instance_methods","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"exclusions","external_name":"exclusions","restriction":""},{"name":"verbose","external_name":"verbose","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""},{"name":"use_enum_methods","default_value":"false","external_name":"use_enum_methods","restriction":""},{"name":"wrap_equality_method","default_value":"false","external_name":"wrap_equality_method","restriction":""},{"name":"other_source","default_value":"nil","external_name":"other_source","restriction":""},{"name":"later_ancestors","default_value":"nil","external_name":"later_ancestors","restriction":""}],"args_string":"(rb_interpreter, crystal_class, exclusions, verbose, context = nil, use_enum_methods = false, wrap_equality_method = false, other_source = nil, later_ancestors = nil)","args_html":"(rb_interpreter, crystal_class, exclusions, verbose, context = <span class=\"n\">nil</span>, use_enum_methods = <span class=\"n\">false</span>, wrap_equality_method = <span class=\"n\">false</span>, other_source = <span class=\"n\">nil</span>, later_ancestors = <span class=\"n\">nil</span>)","location":{"filename":"src/macros/WrapAll.cr","line_number":3,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/WrapAll.cr#L3"},"def":{"name":"wrap_all_instance_methods","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"exclusions","external_name":"exclusions","restriction":""},{"name":"verbose","external_name":"verbose","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""},{"name":"use_enum_methods","default_value":"false","external_name":"use_enum_methods","restriction":""},{"name":"wrap_equality_method","default_value":"false","external_name":"wrap_equality_method","restriction":""},{"name":"other_source","default_value":"nil","external_name":"other_source","restriction":""},{"name":"later_ancestors","default_value":"nil","external_name":"later_ancestors","restriction":""}],"visibility":"Public","body":"      \n{% has_specialized_method = {} of String => Bool %}\n\r\n\r\n      \n{% method_source = other_source ? other_source : crystal_class %}\n\r\n\r\n      \n{% default_optional_args_to_keyword_args = false %}\n\r\n\r\n      \n{% if !(crystal_class.resolve.annotations(Anyolite::DefaultOptionalArgsToKeywordArgs)).empty? %}\r\n        {% default_optional_args_to_keyword_args = true %}\r\n      {% else %}\r\n        {% for class_ancestor in crystal_class.resolve.ancestors %}\r\n          {% if !(class_ancestor.resolve.annotations(Anyolite::DefaultOptionalArgsToKeywordArgs)).empty? %}\r\n            {% default_optional_args_to_keyword_args = true %}\r\n          {% end %}\r\n        {% end %}\r\n      {% end %}\n\r\n\r\n      \n{% if !method_source.resolve? %}\r\n        {% if verbose\n  puts(\"> Skipping #{method_source} due to private visibility.\")\nend %}\r\n      {% else %}\r\n        {% for method in method_source.resolve.methods %}\r\n          {% all_annotations_specialize_im = (crystal_class.resolve.annotations(Anyolite::SpecializeInstanceMethod)) + (method_source.resolve.annotations(Anyolite::SpecializeInstanceMethod)) %}\r\n          {% annotation_specialize_im = all_annotations_specialize_im.find do |element|\n  (element[0].stringify == method.name.stringify) || (element[0] == method.name.stringify)\nend %}\r\n\r\n          {% if method.annotation(Anyolite::Specialize) %}\r\n            {% has_specialized_method[method.name.stringify] = true %}\r\n          {% end %}\r\n\r\n          {% if annotation_specialize_im %}\r\n            {% has_specialized_method[annotation_specialize_im[0].id.stringify] = true %}\r\n          {% end %}\r\n        {% end %}\r\n\r\n        {% how_many_times_wrapped = {} of String => UInt32 %}\r\n\r\n        {% for method, index in method_source.resolve.methods %}\r\n          {% all_annotations_exclude_im = ((crystal_class.resolve.annotations(Anyolite::ExcludeInstanceMethod)) + (method_source.resolve.annotations(Anyolite::ExcludeInstanceMethod))) + crystal_class.resolve.ancestors.map do |ancestor|\n  ancestor.resolve.annotations(Anyolite::ExcludeInstanceMethod)\nend %}\r\n          {% annotation_exclude_im = all_annotations_exclude_im.find do |element|\n  element[0].id.stringify == method.name.stringify\nend %}\r\n\r\n          {% all_annotations_include_im = (crystal_class.resolve.annotations(Anyolite::IncludeInstanceMethod)) + (method_source.resolve.annotations(Anyolite::IncludeInstanceMethod)) %}\r\n          {% annotation_include_im = all_annotations_include_im.find do |element|\n  element[0].id.stringify == method.name.stringify\nend %}\r\n\r\n          {% all_annotations_specialize_im = (crystal_class.resolve.annotations(Anyolite::SpecializeInstanceMethod)) + (method_source.resolve.annotations(Anyolite::SpecializeInstanceMethod)) %}\r\n          {% annotation_specialize_im = all_annotations_specialize_im.find do |element|\n  element[0].id.stringify == method.name.stringify\nend %}\r\n\r\n          {% all_annotations_rename_im = (crystal_class.resolve.annotations(Anyolite::RenameInstanceMethod)) + (method_source.resolve.annotations(Anyolite::RenameInstanceMethod)) %}\r\n          {% annotation_rename_im = all_annotations_rename_im.find do |element|\n  element[0].id.stringify == method.name.stringify\nend %}\r\n\r\n          {% all_annotations_without_keywords_im = (crystal_class.resolve.annotations(Anyolite::WrapWithoutKeywordsInstanceMethod)) + (method_source.resolve.annotations(Anyolite::WrapWithoutKeywordsInstanceMethod)) %}\r\n          {% annotation_without_keyword_im = all_annotations_without_keywords_im.find do |element|\n  element[0].id.stringify == method.name.stringify\nend %}\r\n\r\n          {% all_annotations_return_nil_im = (crystal_class.resolve.annotations(Anyolite::ReturnNilInstanceMethod)) + (method_source.resolve.annotations(Anyolite::ReturnNilInstanceMethod)) %}\r\n          {% annotation_return_nil_im = all_annotations_return_nil_im.find do |element|\n  element[0].id.stringify == method.name.stringify\nend %}\r\n\r\n          {% all_annotations_add_block_arg_im = (crystal_class.resolve.annotations(Anyolite::AddBlockArgInstanceMethod)) + (method_source.resolve.annotations(Anyolite::AddBlockArgInstanceMethod)) %}\r\n          {% annotation_add_block_arg_im = all_annotations_add_block_arg_im.find do |element|\n  element[0].id.stringify == method.name.stringify\nend %}\r\n\r\n          {% all_annotations_store_block_arg_im = (crystal_class.resolve.annotations(Anyolite::StoreBlockArgInstanceMethod)) + (method_source.resolve.annotations(Anyolite::StoreBlockArgInstanceMethod)) %}\r\n          {% annotation_store_block_arg_im = all_annotations_store_block_arg_im.find do |element|\n  element[0].id.stringify == method.name.stringify\nend %}\r\n\r\n          {% all_annotations_force_keyword_arg_im = (crystal_class.resolve.annotations(Anyolite::ForceKeywordArgInstanceMethod)) + (method_source.resolve.annotations(Anyolite::ForceKeywordArgInstanceMethod)) %}\r\n          {% annotation_force_keyword_arg_im = all_annotations_force_keyword_arg_im.find do |element|\n  element[0].id.stringify == method.name.stringify\nend %}\r\n\r\n          {% if (crystal_class.resolve.annotation(Anyolite::NoKeywordArgs)) || (method_source.resolve.annotation(Anyolite::NoKeywordArgs)) %}\r\n            {% no_keyword_args = true %}\r\n          {% else %}\r\n            {% no_keyword_args = false %}\r\n          {% end %}\r\n\r\n          {% if method.annotation(Anyolite::Rename) %}\r\n            {% ruby_name = (method.annotation(Anyolite::Rename))[0].id %}\r\n          {% else %}{% if annotation_rename_im && (method.name.stringify == annotation_rename_im[0].stringify) %}\r\n            {% ruby_name = annotation_rename_im[1].id %}\r\n          {% else %}\r\n            {% ruby_name = method.name %}\r\n          {% end %}{% end %}\r\n\r\n          {% if method.annotation(Anyolite::AddBlockArg) %}\r\n            {% block_arg_number = (method.annotation(Anyolite::AddBlockArg))[0] %}\r\n            {% block_return_type = (method.annotation(Anyolite::AddBlockArg))[1] %}\r\n          {% else %}{% if annotation_add_block_arg_im && (method.name.stringify == annotation_add_block_arg_im[0].stringify) %}\r\n            {% block_arg_number = annotation_add_block_arg_im[1] %}\r\n            {% block_return_type = annotation_add_block_arg_im[2] %}\r\n          {% else %}\r\n            {% block_arg_number = nil %}\r\n            {% block_return_type = nil %}\r\n          {% end %}{% end %}\r\n\r\n          {% added_keyword_args = nil %}\r\n\r\n          {% if (method.annotation(Anyolite::Specialize)) && (method.annotation(Anyolite::Specialize))[0] %}\r\n            {% added_keyword_args = (method.annotation(Anyolite::Specialize))[0] %}\r\n          {% end %}\r\n\r\n          {% if annotation_specialize_im && ((method.args.stringify == annotation_specialize_im[1].stringify) || ((method.args.stringify == \"[]\") && (annotation_specialize_im[1] == nil))) %}\r\n            {% added_keyword_args = annotation_specialize_im[2] %}\r\n          {% end %}\r\n\r\n          {% without_keywords = false %}\r\n\r\n          {% if method.annotation(Anyolite::WrapWithoutKeywords) %}\r\n            {% without_keywords = (method.annotation(Anyolite::WrapWithoutKeywords))[0] ? (method.annotation(Anyolite::WrapWithoutKeywords))[0] : -1 %}\r\n          {% else %}{% if annotation_without_keyword_im %}\r\n            {% without_keywords = annotation_without_keyword_im[1] ? annotation_without_keyword_im[1] : -1 %}\r\n          {% else %}{% if default_optional_args_to_keyword_args %}\r\n            {% without_keywords = -2 %}\r\n          {% end %}{% end %}{% end %}\r\n\r\n          {% return_nil = false %}\r\n          {% if (method.annotation(Anyolite::ReturnNil)) || (annotation_return_nil_im) %}\r\n            {% return_nil = true %}\r\n          {% end %}\r\n\r\n          {% store_block_arg = false %}\r\n          {% if (method.annotation(Anyolite::StoreBlockArg)) || (annotation_store_block_arg_im) %}\r\n            {% store_block_arg = true %}\r\n          {% end %}\r\n\r\n          {% force_keyword_arg = false %}\r\n          {% if (method.annotation(Anyolite::ForceKeywordArg)) || (annotation_force_keyword_arg_im) %}\r\n            {% force_keyword_arg = true %}\r\n          {% end %}\r\n\r\n          {% if verbose\n  puts(\"> Processing instance method #{crystal_class}::#{method.name} to #{ruby_name}\\n--> Args: #{method.args}\")\nend %}\r\n\r\n          {% if method.accepts_block? %}\r\n            {% if verbose\n  puts(\"--> Block arg possible for #{crystal_class}::#{method.name}\")\nend %}\r\n          {% end %}\r\n\r\n          # Ignore private and protected methods (can't be called from outside, they'd need to be wrapped for this to work)\r\n          {% if (method.name == \"dup\") || (method.name == \"clone\") %}\r\n            {% if verbose\n  puts(\"--> Excluding #{crystal_class}::#{method.name} (Exclusion due to copy property)\")\nend %}\r\n          {% else %}{% if crystal_class.resolve.abstract? && (method.name == \"initialize\") %}\r\n            {% if verbose\n  puts(\"--> Excluding #{crystal_class}::#{method.name} (Exclusion due to abstract class)\")\nend %}\r\n          {% else %}{% if (method.visibility != (:public)) && (method.name != \"initialize\") %}\r\n            {% if verbose\n  puts(\"--> Excluding #{crystal_class}::#{method.name} (Exclusion due to visibility)\")\nend %}\r\n          {% else %}{% if (crystal_class != method_source) && (later_ancestors ? later_ancestors + [crystal_class] : [crystal_class]).find do |later_ancestor|\n  later_ancestor.resolve? ? later_ancestor.resolve.methods.find do |orig_methods|\n    orig_methods.name == method.name\n  end : [] of Def\nend %}\r\n            {% if verbose\n  puts(\"--> Excluding #{crystal_class}::#{method.name} (Exclusion due to finalization)\")\nend %}\r\n          # Ignore rb hooks, to_unsafe and finalize (unless specialized, but this is not recommended)\r\n          {% else %}{% if (((method.name.starts_with?(\"rb_\")) || (method.name == \"finalize\")) || (method.name == \"to_unsafe\")) && (!has_specialized_method[method.name.stringify]) %}\r\n            {% if verbose\n  puts(\"--> Excluding #{crystal_class}::#{method.name} (Exclusion by default)\")\nend %}\r\n          # Exclude methods if given as arguments\r\n          {% else %}{% if (exclusions.includes?(method.name.symbolize)) || (exclusions.includes?(method.name.stringify)) %}\r\n            {% if verbose\n  puts(\"--> Excluding #{crystal_class}::#{method.name} (Exclusion argument)\")\nend %}\r\n          # Exclude methods which were annotated to be excluded\r\n          {% else %}{% if (method.annotation(Anyolite::Exclude)) || ((annotation_exclude_im && (!annotation_include_im)) && (!(method.annotation(Anyolite::Include)))) %}\r\n            {% if verbose\n  puts(\"--> Excluding #{crystal_class}::#{method.name} (Exclusion annotation)\")\nend %}\r\n          # Exclude methods which are not the specialized methods\r\n          {% else %}{% if has_specialized_method[method.name.stringify] && (!((method.annotation(Anyolite::Specialize)) || (annotation_specialize_im && ((method.args.stringify == annotation_specialize_im[1].stringify) || ((method.args.stringify == \"[]\") && (annotation_specialize_im[1] == nil)))))) %}\r\n            {% if verbose\n  puts(\"--> Excluding #{crystal_class}::#{method.name} #{method.args} (Specialization)\")\nend %}\r\n          # These methods are a bit tricky and technically require an argument, but usually they are called without one, so we just do it here, too\r\n          {% else %}{% if ((method.name == \"inspect\") || (method.name == \"to_s\")) || (method.name == \"hash\") %}\r\n            Anyolite::Macro.wrap_method_index({{ rb_interpreter }}, {{ crystal_class }}, {{ index }}, \"{{ ruby_name }}\", without_keywords: {{ without_keywords || (no_keyword_args && (!force_keyword_arg)) }}, added_keyword_args: [] of NoReturn, context: {{ context }}, return_nil: {{ return_nil }}, block_arg_number: {{ block_arg_number }}, block_return_type: {{ block_return_type }}, store_block_arg: {{ store_block_arg }}, other_source: {{ other_source }})\r\n            {% how_many_times_wrapped[ruby_name.stringify] = how_many_times_wrapped[ruby_name.stringify] ? how_many_times_wrapped[ruby_name.stringify] + 1 : 1 %} \r\n          # Handle operator methods (including setters) by just transferring the original name into the operator\r\n          # TODO: This might still be a source for potential bugs, so this code might need some reworking in the future\r\n          {% else %}{% if method.name[-1..-1] =~ (/\\W/) %}\r\n            {% operator = ruby_name %}\r\n\r\n            Anyolite::Macro.wrap_method_index({{ rb_interpreter }}, {{ crystal_class }}, {{ index }}, \"{{ ruby_name }}\", operator: \"{{ operator }}\", without_keywords: {{ force_keyword_arg ? false : -1 }}, added_keyword_args: {{ added_keyword_args }}, context: {{ context }}, return_nil: {{ return_nil }}, block_arg_number: {{ block_arg_number }}, block_return_type: {{ block_return_type }}, store_block_arg: {{ store_block_arg }}, other_source: {{ other_source }})\r\n            {% how_many_times_wrapped[ruby_name.stringify] = how_many_times_wrapped[ruby_name.stringify] ? how_many_times_wrapped[ruby_name.stringify] + 1 : 1 %}\r\n          # Handle constructors\r\n          {% else %}{% if (method.name == \"initialize\") && (use_enum_methods == false) %}\r\n            Anyolite::Macro.wrap_method_index({{ rb_interpreter }}, {{ crystal_class }}, {{ index }}, \"{{ ruby_name }}\", is_constructor: true, without_keywords: {{ without_keywords || (no_keyword_args && (!force_keyword_arg)) }}, added_keyword_args: {{ added_keyword_args }}, context: {{ context }}, return_nil: {{ return_nil }}, block_arg_number: {{ block_arg_number }}, block_return_type: {{ block_return_type }}, store_block_arg: {{ store_block_arg }}, other_source: {{ other_source }})\r\n            {% how_many_times_wrapped[ruby_name.stringify] = how_many_times_wrapped[ruby_name.stringify] ? how_many_times_wrapped[ruby_name.stringify] + 1 : 1 %}\r\n          # Handle other instance methods\r\n          {% else %}\r\n            Anyolite::Macro.wrap_method_index({{ rb_interpreter }}, {{ crystal_class }}, {{ index }}, \"{{ ruby_name }}\", without_keywords: {{ without_keywords || (no_keyword_args && (!force_keyword_arg)) }}, added_keyword_args: {{ added_keyword_args }}, context: {{ context }}, return_nil: {{ return_nil }}, block_arg_number: {{ block_arg_number }}, block_return_type: {{ block_return_type }}, store_block_arg: {{ store_block_arg }}, other_source: {{ other_source }})\r\n            {% how_many_times_wrapped[ruby_name.stringify] = how_many_times_wrapped[ruby_name.stringify] ? how_many_times_wrapped[ruby_name.stringify] + 1 : 1 %}\r\n          {% end %}{% end %}{% end %}{% end %}{% end %}{% end %}{% end %}{% end %}{% end %}{% end %}{% end %}\r\n\r\n          {% if how_many_times_wrapped[ruby_name.stringify] && how_many_times_wrapped[ruby_name.stringify] > 1 %}\r\n            {% puts(\"\\e[31m> WARNING: Method #{crystal_class}::#{ruby_name}\\n--> New arguments: #{method.args}\\n--> Wrapped more than once (#{how_many_times_wrapped[ruby_name.stringify]}).\\e[0m\") %}\r\n          {% end %}\r\n          {% if verbose\n  puts(\"\")\nend %}\r\n        {% end %}\r\n        \r\n        {% if (method_source == crystal_class) && (!crystal_class.resolve.abstract?) %}\r\n          # Make sure to add a default constructor if none was specified with Crystal\r\n          {% if (!how_many_times_wrapped[\"initialize\"]) && (!use_enum_methods) %}\r\n            Anyolite::Macro.add_default_constructor({{ rb_interpreter }}, {{ crystal_class }}, {{ verbose }})\r\n          {% else %}{% if (!how_many_times_wrapped[\"initialize\"]) && use_enum_methods %}\r\n            Anyolite::Macro.add_enum_constructor({{ rb_interpreter }}, {{ crystal_class }}, {{ verbose }})\r\n          {% end %}{% end %}\r\n\r\n          {% if (!how_many_times_wrapped[\"inspect\"]) && use_enum_methods %}\r\n            Anyolite::Macro.add_enum_inspect({{ rb_interpreter }}, {{ crystal_class }}, {{ verbose }})\r\n          {% end %}\r\n\r\n          {% all_annotations_exclude_im = (crystal_class.resolve.annotations(Anyolite::ExcludeInstanceMethod)) + (method_source.resolve.annotations(Anyolite::ExcludeInstanceMethod)) %}\r\n          {% if all_annotations_exclude_im.find do |element|\n  (element[0].id.stringify == \"dup\") || (element[0].id.stringify == \"clone\")\nend %}\r\n            Anyolite::RbCore.rb_undef_method({{ rb_interpreter }}, Anyolite::RbClassCache.get({{ crystal_class }}), \"dup\")\r\n            Anyolite::RbCore.rb_undef_method({{ rb_interpreter }}, Anyolite::RbClassCache.get({{ crystal_class }}), \"clone\")\r\n          {% else %}\r\n            Anyolite::Macro.add_copy_constructor({{ rb_interpreter }}, {{ crystal_class }}, {{ context }}, {{ verbose }})\r\n          {% end %}\r\n\r\n          {% if wrap_equality_method && (!how_many_times_wrapped[\"==\"]) %}\r\n            Anyolite::Macro.add_equality_method({{ rb_interpreter }}, {{ crystal_class }}, {{ context }}, {{ verbose }})\r\n          {% end %}\r\n        {% end %}\r\n      {% end %}\n\r\n    \n"}},{"html_id":"wrap_class_method_with_args(rb_interpreter,crystal_class,name,proc,regular_args=nil,operator=\"\",options={}ofSymbol=>NoReturn)-macro","name":"wrap_class_method_with_args","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"regular_args","default_value":"nil","external_name":"regular_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""}],"args_string":"(rb_interpreter, crystal_class, name, proc, regular_args = nil, operator = \"\", options = {} of Symbol => NoReturn)","args_html":"(rb_interpreter, crystal_class, name, proc, regular_args = <span class=\"n\">nil</span>, operator = <span class=\"s\">&quot;&quot;</span>, options = {} <span class=\"k\">of</span> <span class=\"t\">Symbol</span> =&gt; <span class=\"t\">NoReturn</span>)","location":{"filename":"src/macros/Wrappers.cr","line_number":111,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/Wrappers.cr#L111"},"def":{"name":"wrap_class_method_with_args","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"regular_args","default_value":"nil","external_name":"regular_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""}],"visibility":"Public","body":"      \n{% if regular_args.is_a?(ArrayLiteral) %}\r\n        {% regular_arg_array = regular_args %}\r\n      {% else %}{% if regular_args == nil %}\r\n        {% regular_arg_array = nil %}\r\n      {% else %}\r\n        {% regular_arg_array = [regular_args] %}\r\n      {% end %}{% end %}\n\r\n\r\n      \n{% options[:type_vars] = crystal_class.resolve.type_vars %}\n\r\n      \n{% options[:type_var_names_annotation] = crystal_class.resolve.annotation(Anyolite::SpecifyGenericTypes) %}\n\r\n      \n{% options[:type_var_names] = options[:type_var_names_annotation] ? options[:type_var_names_annotation][0] : nil %}\n\r\n\r\n      \n%wrapped_method\n = Anyolite::Macro.new_rb_func do\r\n        \n{% if options[:block_arg_number] || options[:store_block_arg] %}\r\n          %block_ptr = Pointer(Anyolite::RbCore::RbValue).malloc(size: 1)\r\n\r\n          {% if options[:store_block_arg] %}\r\n            Anyolite::RbArgCache.push_block_cache(%block_ptr)\r\n          {% end %}\r\n\r\n          %args = Anyolite::Macro.generate_arg_tuple(_rb, {{ regular_args }}, options: {{ options }})\r\n          %format_string = Anyolite::Macro.format_string({{ regular_args }}, options: {{ options }}) + \"&\"\r\n\r\n          Anyolite::Macro.load_args_into_vars({{ regular_args }}, %format_string, %args, %block_ptr)\r\n\r\n          {% if options[:block_arg_number] %}\r\n            if Anyolite::RbCast.check_for_nil(%block_ptr.value)\r\n              Anyolite.raise_argument_error(\"No block given.\")\r\n              Anyolite::RbCast.return_nil\r\n            end\r\n          {% end %}\r\n\r\n          %converted_args = Anyolite::Macro.convert_regular_args(_rb, %args, {{ regular_args }}, options: {{ options }})\r\n        {% else %}\r\n          %block_ptr = nil\r\n          %converted_args = Anyolite::Macro.get_converted_args(_rb, {{ regular_arg_array }}, options: {{ options }})\r\n        {% end %}\n\r\n\r\n        \n%return_value\n = Anyolite::Macro.call_and_return(_rb, \n{{ proc }}\n, \n{{ regular_arg_array }}\n, \n%converted_args\n, operator: \n{{ operator }}\n, options: \n{{ options }}\n, block_ptr: \n%block_ptr\n)\r\n\r\n        \n{% if options[:store_block_arg] %}\r\n          Anyolite::RbArgCache.pop_block_cache\r\n        {% end %}\n\r\n\r\n        \n%return_value\n\r\n      \nend\r\n      \r\n      \n{{ rb_interpreter }}\n.define_class_method(\n{{ name }}\n, Anyolite::RbClassCache.get(\n{{ crystal_class }}\n), \n%wrapped_method\n)\r\n    \n"}},{"html_id":"wrap_class_method_with_keyword_args(rb_interpreter,crystal_class,name,proc,keyword_args,regular_args=nil,operator=\"\",options={}ofSymbol=>NoReturn)-macro","name":"wrap_class_method_with_keyword_args","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"keyword_args","external_name":"keyword_args","restriction":""},{"name":"regular_args","default_value":"nil","external_name":"regular_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""}],"args_string":"(rb_interpreter, crystal_class, name, proc, keyword_args, regular_args = nil, operator = \"\", options = {} of Symbol => NoReturn)","args_html":"(rb_interpreter, crystal_class, name, proc, keyword_args, regular_args = <span class=\"n\">nil</span>, operator = <span class=\"s\">&quot;&quot;</span>, options = {} <span class=\"k\">of</span> <span class=\"t\">Symbol</span> =&gt; <span class=\"t\">NoReturn</span>)","location":{"filename":"src/macros/Wrappers.cr","line_number":162,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/Wrappers.cr#L162"},"def":{"name":"wrap_class_method_with_keyword_args","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"keyword_args","external_name":"keyword_args","restriction":""},{"name":"regular_args","default_value":"nil","external_name":"regular_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""}],"visibility":"Public","body":"      \n{% if regular_args.is_a?(ArrayLiteral) %}\r\n        {% regular_arg_array = regular_args %}\r\n      {% else %}{% if regular_args == nil %}\r\n        {% regular_arg_array = nil %}\r\n      {% else %}\r\n        {% regular_arg_array = [regular_args] %}\r\n      {% end %}{% end %}\n\r\n\r\n      \n{% options[:type_vars] = crystal_class.resolve.type_vars %}\n\r\n      \n{% options[:type_var_names_annotation] = crystal_class.resolve.annotation(Anyolite::SpecifyGenericTypes) %}\n\r\n      \n{% options[:type_var_names] = options[:type_var_names_annotation] ? options[:type_var_names_annotation][0] : nil %}\n\r\n\r\n      \n%wrapped_method\n = Anyolite::Macro.new_rb_func do\r\n        \n%regular_arg_tuple\n = Anyolite::Macro.generate_arg_tuple(_rb, \n{{ regular_arg_array }}\n, options: \n{{ options }}\n)\r\n\r\n        \n{% if options[:block_arg_number] || options[:store_block_arg] %}\r\n          %block_ptr = Pointer(Anyolite::RbCore::RbValue).malloc(size: 1)\r\n\r\n          {% if options[:store_block_arg] %}\r\n            Anyolite::RbArgCache.push_block_cache(%block_ptr)\r\n          {% end %}\r\n\r\n          %format_string = Anyolite::Macro.format_string({{ regular_arg_array }}, options: {{ options }}) + \":&\"\r\n          %kw_args = Anyolite::Macro.load_kw_args_into_vars({{ regular_arg_array }}, {{ keyword_args }}, %format_string, %regular_arg_tuple, %block_ptr)\r\n\r\n          {% if options[:block_arg_number] %}\r\n            if Anyolite::RbCast.check_for_nil(%block_ptr.value)\r\n              Anyolite.raise_argument_error(\"No block given.\")\r\n              Anyolite::RbCast.return_nil\r\n            end\r\n          {% end %}\r\n        {% else %}\r\n          %block_ptr = nil\r\n          %format_string = Anyolite::Macro.format_string({{ regular_arg_array }}, options: {{ options }}) + \":\"\r\n          %kw_args = Anyolite::Macro.load_kw_args_into_vars({{ regular_arg_array }}, {{ keyword_args }}, %format_string, %regular_arg_tuple)\r\n        {% end %}\n\r\n\r\n        \n%converted_regular_args\n = Anyolite::Macro.convert_regular_args(_rb, \n%regular_arg_tuple\n, \n{{ regular_arg_array }}\n, options: \n{{ options }}\n)\r\n\r\n        \n{% if (!regular_arg_array) || (regular_arg_array.size == 0) %}\r\n          {% options[:empty_regular] = true %}\r\n        {% end %}\n\r\n\r\n        \n%return_value\n = Anyolite::Macro.call_and_return_keyword_method(_rb, \n{{ proc }}\n, \n%converted_regular_args\n, \n{{ keyword_args }}\n, \n%kw_args\n, operator: \n{{ operator }}\n, options: \n{{ options }}\n, block_ptr: \n%block_ptr\n)\r\n\r\n        \n{% if options[:store_block_arg] %}\r\n          Anyolite::RbArgCache.pop_block_cache\r\n        {% end %}\n\r\n\r\n        \n%return_value\n\r\n      \nend\r\n\r\n      \n{{ rb_interpreter }}\n.define_class_method(\n{{ name }}\n, Anyolite::RbClassCache.get(\n{{ crystal_class }}\n), \n%wrapped_method\n)\r\n    \n"}},{"html_id":"wrap_constant_or_class(rb_interpreter,under_class_or_module,ruby_name,value,overwrite=false,verbose=false)-macro","name":"wrap_constant_or_class","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"under_class_or_module","external_name":"under_class_or_module","restriction":""},{"name":"ruby_name","external_name":"ruby_name","restriction":""},{"name":"value","external_name":"value","restriction":""},{"name":"overwrite","default_value":"false","external_name":"overwrite","restriction":""},{"name":"verbose","default_value":"false","external_name":"verbose","restriction":""}],"args_string":"(rb_interpreter, under_class_or_module, ruby_name, value, overwrite = false, verbose = false)","args_html":"(rb_interpreter, under_class_or_module, ruby_name, value, overwrite = <span class=\"n\">false</span>, verbose = <span class=\"n\">false</span>)","location":{"filename":"src/macros/Wrappers.cr","line_number":539,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/Wrappers.cr#L539"},"def":{"name":"wrap_constant_or_class","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"under_class_or_module","external_name":"under_class_or_module","restriction":""},{"name":"ruby_name","external_name":"ruby_name","restriction":""},{"name":"value","external_name":"value","restriction":""},{"name":"overwrite","default_value":"false","external_name":"overwrite","restriction":""},{"name":"verbose","default_value":"false","external_name":"verbose","restriction":""}],"visibility":"Public","body":"      \n{% actual_constant = under_class_or_module.resolve.constant(value.id) %}\n\r\n      \n{% if actual_constant.is_a?(TypeNode) %}\r\n        {% if actual_constant.module? %}\r\n          Anyolite.wrap_module_with_methods({{ rb_interpreter }}, {{ actual_constant }}, under: {{ under_class_or_module }}, overwrite: {{ overwrite }}, verbose: {{ verbose }})\r\n        {% else %}{% if actual_constant.class? || actual_constant.struct? %}\r\n          Anyolite.wrap_class_with_methods({{ rb_interpreter }}, {{ actual_constant }}, under: {{ under_class_or_module }}, wrap_equality_method: {{ actual_constant.struct? }}, overwrite: {{ overwrite }}, verbose: {{ verbose }})\r\n        {% else %}{% if actual_constant.union? %}\r\n          {% puts(\"\\e[31m> WARNING: Wrapping of unions not supported, thus skipping #{actual_constant}\\e[0m\") %}\r\n        {% else %}{% if actual_constant < Enum %}\r\n          Anyolite.wrap_class_with_methods({{ rb_interpreter }}, {{ actual_constant }}, under: {{ under_class_or_module }}, use_enum_methods: true, wrap_equality_method: true, overwrite: {{ overwrite }}, verbose: {{ verbose }})\r\n        {% else %}\r\n          # Could be an alias, just try the default case\r\n          Anyolite.wrap_class_with_methods({{ rb_interpreter }}, {{ actual_constant }}, under: {{ under_class_or_module }}, overwrite: {{ overwrite }}, verbose: {{ verbose }})\r\n        {% end %}{% end %}{% end %}{% end %}\r\n      {% else %}\r\n        Anyolite.wrap_constant_under_class({{ rb_interpreter }}, {{ under_class_or_module }}, {{ ruby_name }}, {{ under_class_or_module }}::{{ value }})\r\n      {% end %}\n\r\n    \n"}},{"html_id":"wrap_constructor_function_with_args(rb_interpreter,crystal_class,proc,regular_args=nil,operator=\"\",options={}ofSymbol=>NoReturn)-macro","name":"wrap_constructor_function_with_args","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"regular_args","default_value":"nil","external_name":"regular_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""}],"args_string":"(rb_interpreter, crystal_class, proc, regular_args = nil, operator = \"\", options = {} of Symbol => NoReturn)","args_html":"(rb_interpreter, crystal_class, proc, regular_args = <span class=\"n\">nil</span>, operator = <span class=\"s\">&quot;&quot;</span>, options = {} <span class=\"k\">of</span> <span class=\"t\">Symbol</span> =&gt; <span class=\"t\">NoReturn</span>)","location":{"filename":"src/macros/Wrappers.cr","line_number":339,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/Wrappers.cr#L339"},"def":{"name":"wrap_constructor_function_with_args","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"regular_args","default_value":"nil","external_name":"regular_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""}],"visibility":"Public","body":"      \n{% if regular_args.is_a?(ArrayLiteral) %}\r\n        {% regular_arg_array = regular_args %}\r\n      {% else %}{% if regular_args == nil %}\r\n        {% regular_arg_array = nil %}\r\n      {% else %}\r\n        {% regular_arg_array = [regular_args] %}\r\n      {% end %}{% end %}\n\r\n\r\n      \n{% if !options[:block_arg_number] %}\r\n        {% proc_arg_string = \"\" %}\r\n      {% else %}{% if options[:block_arg_number] == 0 %}\r\n        {% proc_arg_string = \"do\" %}\r\n      {% else %}\r\n        {% proc_arg_string = (\"do |\" + ((0..(options[:block_arg_number] - 1)).map do |x|\n  \"block_arg_#{x}\"\nend.join(\", \"))) + \"|\" %}\r\n      {% end %}{% end %}\n\r\n\r\n      \n{% options[:type_vars] = crystal_class.resolve.type_vars %}\n\r\n      \n{% options[:type_var_names_annotation] = crystal_class.resolve.annotation(Anyolite::SpecifyGenericTypes) %}\n\r\n      \n{% options[:type_var_names] = options[:type_var_names_annotation] ? options[:type_var_names_annotation][0] : nil %}\n\r\n\r\n      \n%wrapped_method\n = Anyolite::Macro.new_rb_func do\r\n        \n{% if options[:block_arg_number] || options[:store_block_arg] %}\r\n          %block_ptr = Pointer(Anyolite::RbCore::RbValue).malloc(size: 1)\r\n\r\n          {% if options[:store_block_arg] %}\r\n            Anyolite::RbArgCache.push_block_cache(%block_ptr)\r\n          {% end %}\r\n\r\n          %args = Anyolite::Macro.generate_arg_tuple(_rb, {{ regular_args }}, options: {{ options }})\r\n          %format_string = Anyolite::Macro.format_string({{ regular_args }}, options: {{ options }}) + \"&\"\r\n\r\n          Anyolite::Macro.load_args_into_vars({{ regular_args }}, %format_string, %args, %block_ptr)\r\n\r\n          {% if options[:block_arg_number] %}\r\n            if Anyolite::RbCast.check_for_nil(%block_ptr.value)\r\n              Anyolite.raise_argument_error(\"No block given.\")\r\n              Anyolite::RbCast.return_nil\r\n            end\r\n          {% end %}\r\n\r\n          %converted_args = Anyolite::Macro.convert_regular_args(_rb, %args, {{ regular_args }}, options: {{ options }})\r\n        {% else %}\r\n          %block_ptr = nil\r\n          %converted_args = Anyolite::Macro.get_converted_args(_rb, {{ regular_arg_array }}, options: {{ options }})\r\n        {% end %}\n\r\n\r\n        \n%new_obj\n = \n{{ proc }}\n{{ operator.id }}\n(*\n%converted_args\n) \n{{ proc_arg_string.id }}\n\r\n\r\n        \n{% if options[:block_arg_number] == 0 %}\r\n            %yield_value = Anyolite::RbCore.rb_yield(_rb, %block_ptr.value, Anyolite::RbCast.return_nil)\r\n            Anyolite::Macro.convert_from_ruby_to_crystal(_rb, %yield_value, options: {{ options }})\r\n          end\r\n        {% else %}{% if options[:block_arg_number] %}\r\n            %block_arg_array = [\r\n              {% for i in 0..(options[:block_arg_number] - 1) %}\r\n                Anyolite::RbCast.return_value(_rb, {{ \"block_arg_#{i}\".id }}),\r\n              {% end %}\r\n            ]\r\n            %yield_value = Anyolite::RbCore.rb_yield_argv(_rb, %block_ptr.value, {{ options[:block_arg_number] }}, %block_arg_array)\r\n            Anyolite::Macro.convert_from_ruby_to_crystal(_rb, %yield_value, options: {{ options }})\r\n          end\r\n        {% end %}{% end %}\n\r\n\r\n        Anyolite::Macro.allocate_constructed_object(_rb, \n{{ crystal_class }}\n, _obj, \n%new_obj\n)\r\n\r\n        \n{% if options[:store_block_arg] %}\r\n          Anyolite::RbArgCache.pop_block_cache\r\n        {% end %}\n\r\n\r\n        _obj\r\n      \nend\r\n\r\n      \n{{ rb_interpreter }}\n.define_method(\"initialize\", Anyolite::RbClassCache.get(\n{{ crystal_class }}\n), \n%wrapped_method\n)\r\n    \n"}},{"html_id":"wrap_constructor_function_with_keyword_args(rb_interpreter,crystal_class,proc,keyword_args,regular_args=nil,operator=\"\",options={}ofSymbol=>NoReturn)-macro","name":"wrap_constructor_function_with_keyword_args","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"keyword_args","external_name":"keyword_args","restriction":""},{"name":"regular_args","default_value":"nil","external_name":"regular_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""}],"args_string":"(rb_interpreter, crystal_class, proc, keyword_args, regular_args = nil, operator = \"\", options = {} of Symbol => NoReturn)","args_html":"(rb_interpreter, crystal_class, proc, keyword_args, regular_args = <span class=\"n\">nil</span>, operator = <span class=\"s\">&quot;&quot;</span>, options = {} <span class=\"k\">of</span> <span class=\"t\">Symbol</span> =&gt; <span class=\"t\">NoReturn</span>)","location":{"filename":"src/macros/Wrappers.cr","line_number":415,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/Wrappers.cr#L415"},"def":{"name":"wrap_constructor_function_with_keyword_args","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"keyword_args","external_name":"keyword_args","restriction":""},{"name":"regular_args","default_value":"nil","external_name":"regular_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""}],"visibility":"Public","body":"      \n{% if regular_args.is_a?(ArrayLiteral) %}\r\n        {% regular_arg_array = regular_args %}\r\n      {% else %}{% if regular_args == nil %}\r\n        {% regular_arg_array = nil %}\r\n      {% else %}\r\n        {% regular_arg_array = [regular_args] %}\r\n      {% end %}{% end %}\n\r\n\r\n      \n{% if !options[:block_arg_number] %}\r\n        {% proc_arg_string = \"\" %}\r\n      {% else %}{% if options[:block_arg_number] == 0 %}\r\n        {% proc_arg_string = \"do\" %}\r\n      {% else %}\r\n        {% proc_arg_string = (\"do |\" + ((0..(options[:block_arg_number] - 1)).map do |x|\n  \"block_arg_#{x}\"\nend.join(\", \"))) + \"|\" %}\r\n      {% end %}{% end %}\n\r\n\r\n      \n{% options[:type_vars] = crystal_class.resolve.type_vars %}\n\r\n      \n{% options[:type_var_names_annotation] = crystal_class.resolve.annotation(Anyolite::SpecifyGenericTypes) %}\n\r\n      \n{% options[:type_var_names] = options[:type_var_names_annotation] ? options[:type_var_names_annotation][0] : nil %}\n\r\n      \r\n      \n%wrapped_method\n = Anyolite::Macro.new_rb_func do\r\n        \n%regular_arg_tuple\n = Anyolite::Macro.generate_arg_tuple(_rb, \n{{ regular_arg_array }}\n, options: \n{{ options }}\n)\r\n\r\n        \n{% if options[:block_arg_number] || options[:store_block_arg] %}\r\n          %block_ptr = Pointer(Anyolite::RbCore::RbValue).malloc(size: 1)\r\n\r\n          {% if options[:store_block_arg] %}\r\n            Anyolite::RbArgCache.push_block_cache(%block_ptr)\r\n          {% end %}\r\n\r\n          %format_string = Anyolite::Macro.format_string({{ regular_arg_array }}, options: {{ options }}) + \":&\"\r\n          %kw_args = Anyolite::Macro.load_kw_args_into_vars({{ regular_arg_array }}, {{ keyword_args }}, %format_string, %regular_arg_tuple, %block_ptr)\r\n\r\n          {% if options[:block_arg_number] %}\r\n            if Anyolite::RbCast.check_for_nil(%block_ptr.value)\r\n              Anyolite.raise_argument_error(\"No block given.\")\r\n              Anyolite::RbCast.return_nil\r\n            end\r\n          {% end %}\r\n        {% else %}\r\n          %block_ptr = nil\r\n          %format_string = Anyolite::Macro.format_string({{ regular_arg_array }}, options: {{ options }}) + \":\"\r\n          %kw_args = Anyolite::Macro.load_kw_args_into_vars({{ regular_arg_array }}, {{ keyword_args }}, %format_string, %regular_arg_tuple)\r\n        {% end %}\n\r\n\r\n        \n%converted_regular_args\n = Anyolite::Macro.convert_regular_args(_rb, \n%regular_arg_tuple\n, \n{{ regular_arg_array }}\n, options: \n{{ options }}\n)\r\n\r\n        \n{% if (!regular_arg_array) || (regular_arg_array.size == 0) %}\r\n          %new_obj = {{ proc }}{{ operator.id }}(\r\n            {% c = 0 %}\r\n            {% for keyword in keyword_args %}\r\n              {{ keyword.var.id }}: Anyolite::Macro.convert_from_ruby_to_crystal(_rb, %kw_args.values[{{ c }}], {{ keyword }}, options: {{ options }}, debug_information: {{ (proc.stringify + \" - \") + keyword_args.stringify }}),\r\n              {% c += 1 %}\r\n            {% end %}\r\n          ) {{ proc_arg_string.id }}\r\n        {% else %}\r\n          %new_obj = {{ proc }}{{ operator.id }}(*%converted_regular_args,\r\n            {% c = 0 %}\r\n            {% for keyword in keyword_args %}\r\n              {{ keyword.var.id }}: Anyolite::Macro.convert_from_ruby_to_crystal(_rb, %kw_args.values[{{ c }}], {{ keyword }}, options: {{ options }}, debug_information: {{ (proc.stringify + \" - \") + keyword_args.stringify }}),\r\n              {% c += 1 %}\r\n            {% end %}\r\n          ) {{ proc_arg_string.id }}\r\n        {% end %}\n\r\n\r\n        \n{% if options[:block_arg_number] == 0 %}\r\n            %yield_value = Anyolite::RbCore.rb_yield(_rb, %block_ptr.value, Anyolite::RbCast.return_nil)\r\n            Anyolite::Macro.convert_from_ruby_to_crystal(_rb, %yield_value, options: {{ options }})\r\n          end\r\n        {% else %}{% if options[:block_arg_number] %}\r\n            %block_arg_array = [\r\n              {% for i in 0..(options[:block_arg_number] - 1) %}\r\n                Anyolite::RbCast.return_value(_rb, {{ \"block_arg_#{i}\".id }}),\r\n              {% end %}\r\n            ]\r\n            %yield_value = Anyolite::RbCore.rb_yield_argv(_rb, %block_ptr.value, {{ options[:block_arg_number] }}, %block_arg_array)\r\n            Anyolite::Macro.convert_from_ruby_to_crystal(_rb, %yield_value, options: {{ options }})\r\n          end\r\n        {% end %}{% end %}\n\r\n\r\n        Anyolite::Macro.allocate_constructed_object(_rb, \n{{ crystal_class }}\n, _obj, \n%new_obj\n)\r\n\r\n        \n{% if options[:store_block_arg] %}\r\n          Anyolite::RbArgCache.pop_block_cache\r\n        {% end %}\n\r\n        \r\n        _obj\r\n      \nend\r\n\r\n      \n{{ rb_interpreter }}\n.define_method(\"initialize\", Anyolite::RbClassCache.get(\n{{ crystal_class }}\n), \n%wrapped_method\n)\r\n    \n"}},{"html_id":"wrap_equality_function(rb_interpreter,crystal_class,name,proc,operator=\"\",options={}ofSymbol=>NoReturn)-macro","name":"wrap_equality_function","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""}],"args_string":"(rb_interpreter, crystal_class, name, proc, operator = \"\", options = {} of Symbol => NoReturn)","args_html":"(rb_interpreter, crystal_class, name, proc, operator = <span class=\"s\">&quot;&quot;</span>, options = {} <span class=\"k\">of</span> <span class=\"t\">Symbol</span> =&gt; <span class=\"t\">NoReturn</span>)","location":{"filename":"src/macros/Wrappers.cr","line_number":508,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/Wrappers.cr#L508"},"def":{"name":"wrap_equality_function","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""}],"visibility":"Public","body":"      \n{% options[:type_vars] = crystal_class.resolve.type_vars %}\n\r\n      \n{% options[:type_var_names_annotation] = crystal_class.resolve.annotation(Anyolite::SpecifyGenericTypes) %}\n\r\n      \n{% options[:type_var_names] = options[:type_var_names_annotation] ? options[:type_var_names_annotation][0] : nil %}\n\r\n\r\n      \n%wrapped_method\n = Anyolite::Macro.new_rb_func do\r\n        \n%args\n = Anyolite::Macro.generate_arg_tuple(_rb, [other : \n{{ crystal_class }}\n], options: \n{{ options }}\n)\r\n        \n%format_string\n = Anyolite::Macro.format_string([other : \n{{ crystal_class }}\n], options: \n{{ options }}\n)\r\n      \r\n        Anyolite::Macro.load_args_into_vars([other : \n{{ crystal_class }}\n], \n%format_string\n, \n%args\n)\r\n\r\n        if !Anyolite::RbCast.check_custom_type(_rb, \n%args\n[0].value, \n{{ crystal_class }}\n)\r\n          Anyolite::RbCast.return_false\r\n        \nelse\r\n          \n%converted_args\n = Anyolite::Macro.convert_regular_args(_rb, \n%args\n, [other : \n{{ crystal_class }}\n], options: \n{{ options }}\n)\r\n\r\n          if \n{{ crystal_class }}\n <= Struct || \n{{ crystal_class }}\n <= Enum\r\n            \n%converted_obj\n = Anyolite::Macro.convert_from_ruby_struct(_rb, _obj, \n{{ crystal_class }}\n).value\r\n          \nelse\r\n            \n%converted_obj\n = Anyolite::Macro.convert_from_ruby_object(_rb, _obj, \n{{ crystal_class }}\n).value\r\n          \nend\r\n\r\n          \n%return_value\n = Anyolite::Macro.call_and_return_instance_method(_rb, \n{{ proc }}\n, \n%converted_obj\n, \n%converted_args\n, operator: \n{{ operator }}\n, options: \n{{ options }}\n)\r\n\r\n          \n%return_value\n\r\n        \nend\r\n      \nend\r\n\r\n      \n{{ rb_interpreter }}\n.define_method(\n{{ name }}\n, Anyolite::RbClassCache.get(\n{{ crystal_class }}\n), \n%wrapped_method\n)\r\n    \n"}},{"html_id":"wrap_instance_function_with_args(rb_interpreter,crystal_class,name,proc,regular_args=nil,operator=\"\",options={}ofSymbol=>NoReturn)-macro","name":"wrap_instance_function_with_args","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"regular_args","default_value":"nil","external_name":"regular_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""}],"args_string":"(rb_interpreter, crystal_class, name, proc, regular_args = nil, operator = \"\", options = {} of Symbol => NoReturn)","args_html":"(rb_interpreter, crystal_class, name, proc, regular_args = <span class=\"n\">nil</span>, operator = <span class=\"s\">&quot;&quot;</span>, options = {} <span class=\"k\">of</span> <span class=\"t\">Symbol</span> =&gt; <span class=\"t\">NoReturn</span>)","location":{"filename":"src/macros/Wrappers.cr","line_number":218,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/Wrappers.cr#L218"},"def":{"name":"wrap_instance_function_with_args","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"regular_args","default_value":"nil","external_name":"regular_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""}],"visibility":"Public","body":"      \n{% if regular_args.is_a?(ArrayLiteral) %}\r\n        {% regular_arg_array = regular_args %}\r\n      {% else %}{% if regular_args == nil %}\r\n        {% regular_arg_array = nil %}\r\n      {% else %}\r\n        {% regular_arg_array = [regular_args] %}\r\n      {% end %}{% end %}\n\r\n\r\n      \n{% options[:type_vars] = crystal_class.resolve.type_vars %}\n\r\n      \n{% options[:type_var_names_annotation] = crystal_class.resolve.annotation(Anyolite::SpecifyGenericTypes) %}\n\r\n      \n{% options[:type_var_names] = options[:type_var_names_annotation] ? options[:type_var_names_annotation][0] : nil %}\n\r\n\r\n      \n%wrapped_method\n = Anyolite::Macro.new_rb_func do\r\n        \n{% if options[:block_arg_number] || options[:store_block_arg] %}\r\n          %block_ptr = Pointer(Anyolite::RbCore::RbValue).malloc(size: 1)\r\n\r\n          {% if options[:store_block_arg] %}\r\n            Anyolite::RbArgCache.push_block_cache(%block_ptr)\r\n          {% end %}\r\n\r\n          %args = Anyolite::Macro.generate_arg_tuple(_rb, {{ regular_args }}, options: {{ options }})\r\n          %format_string = Anyolite::Macro.format_string({{ regular_args }}, options: {{ options }}) + \"&\"\r\n          \r\n          Anyolite::Macro.load_args_into_vars({{ regular_args }}, %format_string, %args, %block_ptr)\r\n\r\n          {% if options[:block_arg_number] %}\r\n            if Anyolite::RbCast.check_for_nil(%block_ptr.value)\r\n              Anyolite.raise_argument_error(\"No block given.\")\r\n              Anyolite::RbCast.return_nil\r\n            end\r\n          {% end %}\r\n\r\n          %converted_args = Anyolite::Macro.convert_regular_args(_rb, %args, {{ regular_args }}, options: {{ options }})\r\n        {% else %}\r\n          %block_ptr = nil\r\n          %converted_args = Anyolite::Macro.get_converted_args(_rb, {{ regular_arg_array }}, options: {{ options }})\r\n        {% end %}\n\r\n\r\n        if \n{{ crystal_class }}\n <= Struct || \n{{ crystal_class }}\n <= Enum\r\n          \n%converted_obj\n = Anyolite::Macro.convert_from_ruby_struct(_rb, _obj, \n{{ crystal_class }}\n).value\r\n        \nelse\r\n          \n%converted_obj\n = Anyolite::Macro.convert_from_ruby_object(_rb, _obj, \n{{ crystal_class }}\n).value\r\n        \nend\r\n\r\n        \n%return_value\n = Anyolite::Macro.call_and_return_instance_method(_rb, \n{{ proc }}\n, \n%converted_obj\n, \n%converted_args\n, operator: \n{{ operator }}\n, options: \n{{ options }}\n, block_ptr: \n%block_ptr\n)\r\n        \r\n        \n{% if options[:store_block_arg] %}\r\n          Anyolite::RbArgCache.pop_block_cache\r\n        {% end %}\n\r\n\r\n        \n%return_value\n\r\n      \nend\r\n\r\n      \n{{ rb_interpreter }}\n.define_method(\n{{ name }}\n, Anyolite::RbClassCache.get(\n{{ crystal_class }}\n), \n%wrapped_method\n)\r\n    \n"}},{"html_id":"wrap_instance_function_with_keyword_args(rb_interpreter,crystal_class,name,proc,keyword_args,regular_args=nil,operator=\"\",options={}ofSymbol=>NoReturn)-macro","name":"wrap_instance_function_with_keyword_args","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"keyword_args","external_name":"keyword_args","restriction":""},{"name":"regular_args","default_value":"nil","external_name":"regular_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""}],"args_string":"(rb_interpreter, crystal_class, name, proc, keyword_args, regular_args = nil, operator = \"\", options = {} of Symbol => NoReturn)","args_html":"(rb_interpreter, crystal_class, name, proc, keyword_args, regular_args = <span class=\"n\">nil</span>, operator = <span class=\"s\">&quot;&quot;</span>, options = {} <span class=\"k\">of</span> <span class=\"t\">Symbol</span> =&gt; <span class=\"t\">NoReturn</span>)","location":{"filename":"src/macros/Wrappers.cr","line_number":275,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/Wrappers.cr#L275"},"def":{"name":"wrap_instance_function_with_keyword_args","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"keyword_args","external_name":"keyword_args","restriction":""},{"name":"regular_args","default_value":"nil","external_name":"regular_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""}],"visibility":"Public","body":"      \n{% if regular_args.is_a?(ArrayLiteral) %}\r\n        {% regular_arg_array = regular_args %}\r\n      {% else %}{% if regular_args == nil %}\r\n        {% regular_arg_array = nil %}\r\n      {% else %}\r\n        {% regular_arg_array = [regular_args] %}\r\n      {% end %}{% end %}\n\r\n\r\n      \n{% options[:type_vars] = crystal_class.resolve.type_vars %}\n\r\n      \n{% options[:type_var_names_annotation] = crystal_class.resolve.annotation(Anyolite::SpecifyGenericTypes) %}\n\r\n      \n{% options[:type_var_names] = options[:type_var_names_annotation] ? options[:type_var_names_annotation][0] : nil %}\n\r\n\r\n      \n%wrapped_method\n = Anyolite::Macro.new_rb_func do\r\n        \n%regular_arg_tuple\n = Anyolite::Macro.generate_arg_tuple(_rb, \n{{ regular_arg_array }}\n, options: \n{{ options }}\n)\r\n\r\n        \n# TODO: Add annotation argument for required blocks ('&!' then)\r\n\n\r\n        \n{% if options[:block_arg_number] || options[:store_block_arg] %}\r\n          %block_ptr = Pointer(Anyolite::RbCore::RbValue).malloc(size: 1)\r\n\r\n          {% if options[:store_block_arg] %}\r\n            Anyolite::RbArgCache.push_block_cache(%block_ptr)\r\n          {% end %}\r\n\r\n          %format_string = Anyolite::Macro.format_string({{ regular_arg_array }}, options: {{ options }}) + \":&\"\r\n          %kw_args = Anyolite::Macro.load_kw_args_into_vars({{ regular_arg_array }}, {{ keyword_args }}, %format_string, %regular_arg_tuple, %block_ptr)\r\n\r\n          {% if options[:block_arg_number] %}\r\n            if Anyolite::RbCast.check_for_nil(%block_ptr.value)\r\n              Anyolite.raise_argument_error(\"No block given.\")\r\n              Anyolite::RbCast.return_nil\r\n            end\r\n          {% end %}\r\n        {% else %}\r\n          %block_ptr = nil\r\n          %format_string = Anyolite::Macro.format_string({{ regular_arg_array }}, options: {{ options }}) + \":\"\r\n          %kw_args = Anyolite::Macro.load_kw_args_into_vars({{ regular_arg_array }}, {{ keyword_args }}, %format_string, %regular_arg_tuple)\r\n        {% end %}\n\r\n\r\n        \n%converted_regular_args\n = Anyolite::Macro.convert_regular_args(_rb, \n%regular_arg_tuple\n, \n{{ regular_arg_array }}\n, options: \n{{ options }}\n)\r\n\r\n        if \n{{ crystal_class }}\n <= Struct || \n{{ crystal_class }}\n <= Enum\r\n          \n%converted_obj\n = Anyolite::Macro.convert_from_ruby_struct(_rb, _obj, \n{{ crystal_class }}\n).value\r\n        \nelse\r\n          \n%converted_obj\n = Anyolite::Macro.convert_from_ruby_object(_rb, _obj, \n{{ crystal_class }}\n).value\r\n        \nend\r\n\r\n        \n{% if (!regular_arg_array) || (regular_arg_array.size == 0) %}\r\n          {% options[:empty_regular] = true %}\r\n        {% end %}\n\r\n\r\n        \n%return_value\n = Anyolite::Macro.call_and_return_keyword_instance_method(_rb, \n{{ proc }}\n, \n%converted_obj\n, \n%converted_regular_args\n, \n{{ keyword_args }}\n, \n%kw_args\n, operator: \n{{ operator }}\n, options: \n{{ options }}\n, block_ptr: \n%block_ptr\n)\r\n\r\n        \n{% if options[:store_block_arg] %}\r\n          Anyolite::RbArgCache.pop_block_cache\r\n        {% end %}\n\r\n\r\n        \n%return_value\n\r\n      \nend\r\n\r\n      \n{{ rb_interpreter }}\n.define_method(\n{{ name }}\n, Anyolite::RbClassCache.get(\n{{ crystal_class }}\n), \n%wrapped_method\n)\r\n    \n"}},{"html_id":"wrap_method_index(rb_interpreter,crystal_class,method_index,ruby_name,is_constructor=false,is_class_method=false,operator=\"\",cut_name=nil,without_keywords=false,added_keyword_args=nil,context=nil,return_nil=false,block_arg_number=nil,block_return_type=nil,store_block_arg=false,other_source=nil)-macro","name":"wrap_method_index","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"method_index","external_name":"method_index","restriction":""},{"name":"ruby_name","external_name":"ruby_name","restriction":""},{"name":"is_constructor","default_value":"false","external_name":"is_constructor","restriction":""},{"name":"is_class_method","default_value":"false","external_name":"is_class_method","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"cut_name","default_value":"nil","external_name":"cut_name","restriction":""},{"name":"without_keywords","default_value":"false","external_name":"without_keywords","restriction":""},{"name":"added_keyword_args","default_value":"nil","external_name":"added_keyword_args","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""},{"name":"return_nil","default_value":"false","external_name":"return_nil","restriction":""},{"name":"block_arg_number","default_value":"nil","external_name":"block_arg_number","restriction":""},{"name":"block_return_type","default_value":"nil","external_name":"block_return_type","restriction":""},{"name":"store_block_arg","default_value":"false","external_name":"store_block_arg","restriction":""},{"name":"other_source","default_value":"nil","external_name":"other_source","restriction":""}],"args_string":"(rb_interpreter, crystal_class, method_index, ruby_name, is_constructor = false, is_class_method = false, operator = \"\", cut_name = nil, without_keywords = false, added_keyword_args = nil, context = nil, return_nil = false, block_arg_number = nil, block_return_type = nil, store_block_arg = false, other_source = nil)","args_html":"(rb_interpreter, crystal_class, method_index, ruby_name, is_constructor = <span class=\"n\">false</span>, is_class_method = <span class=\"n\">false</span>, operator = <span class=\"s\">&quot;&quot;</span>, cut_name = <span class=\"n\">nil</span>, without_keywords = <span class=\"n\">false</span>, added_keyword_args = <span class=\"n\">nil</span>, context = <span class=\"n\">nil</span>, return_nil = <span class=\"n\">false</span>, block_arg_number = <span class=\"n\">nil</span>, block_return_type = <span class=\"n\">nil</span>, store_block_arg = <span class=\"n\">false</span>, other_source = <span class=\"n\">nil</span>)","location":{"filename":"src/macros/WrapMethodIndex.cr","line_number":3,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/WrapMethodIndex.cr#L3"},"def":{"name":"wrap_method_index","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"method_index","external_name":"method_index","restriction":""},{"name":"ruby_name","external_name":"ruby_name","restriction":""},{"name":"is_constructor","default_value":"false","external_name":"is_constructor","restriction":""},{"name":"is_class_method","default_value":"false","external_name":"is_class_method","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"cut_name","default_value":"nil","external_name":"cut_name","restriction":""},{"name":"without_keywords","default_value":"false","external_name":"without_keywords","restriction":""},{"name":"added_keyword_args","default_value":"nil","external_name":"added_keyword_args","restriction":""},{"name":"context","default_value":"nil","external_name":"context","restriction":""},{"name":"return_nil","default_value":"false","external_name":"return_nil","restriction":""},{"name":"block_arg_number","default_value":"nil","external_name":"block_arg_number","restriction":""},{"name":"block_return_type","default_value":"nil","external_name":"block_return_type","restriction":""},{"name":"store_block_arg","default_value":"false","external_name":"store_block_arg","restriction":""},{"name":"other_source","default_value":"nil","external_name":"other_source","restriction":""}],"visibility":"Public","body":"      \n{% method_source = other_source ? other_source : crystal_class %}\n\r\n\r\n      \n{% if is_class_method %}\r\n        {% method = method_source.resolve.class.methods[method_index] %}\r\n      {% else %}\r\n        {% method = method_source.resolve.methods[method_index] %}\r\n      {% end %}\n\r\n\r\n      \n{% if !operator.empty? %}\r\n        {% if cut_name %}\r\n          {% if is_class_method %}\r\n            {% final_method_name = \"#{crystal_class}.#{cut_name}\".id %}\r\n            {% final_operator = \"#{crystal_class}.#{operator.id}\" %}\r\n          {% else %}\r\n            {% final_method_name = cut_name %}\r\n            {% final_operator = operator %}\r\n          {% end %}\r\n        {% else %}\r\n          {% final_method_name = Anyolite::Empty %}\r\n          {% if is_class_method %}\r\n            {% final_operator = \"#{crystal_class}.#{operator.id}\" %}\r\n          {% else %}\r\n            {% final_operator = operator %}\r\n          {% end %}\r\n        {% end %}\r\n      {% else %}\r\n        {% if is_class_method %}\r\n          {% final_method_name = \"#{crystal_class}.#{method.name}\".id %}\r\n        {% else %}\r\n          {% final_method_name = method.name %}\r\n        {% end %}\r\n        {% final_operator = operator %}\r\n      {% end %}\n\r\n\r\n      \n{% final_arg_array = added_keyword_args ? added_keyword_args : method.args %}\n\r\n\r\n      \n# Routine to check all arguments for validity and potential self values\r\n\n\r\n      \n{% try_again = false %}\n\r\n      \n{% for arg, index in final_arg_array %}\r\n        {% if arg.is_a?(Arg) %}\r\n          {% if arg.restriction.is_a?(Self) %}\r\n            {% try_again = true %}\r\n            {% if arg.default_value %}\r\n              {% final_arg_array[index] = \"#{arg.name} : #{crystal_class} = #{arg.default_value}\".id %}\r\n            {% else %}\r\n              {% final_arg_array[index] = \"#{arg.name} : #{crystal_class}\".id %}\r\n            {% end %}\r\n          {% end %}\r\n        {% else %}{% if arg.is_a?(TypeDeclaration) %}\r\n          {% if arg.type.is_a?(Self) %}\r\n            {% try_again = true %}\r\n            {% if arg.value %}\r\n              {% final_arg_array[index] = \"#{arg.var} : #{crystal_class} = #{arg.value}\".id %}\r\n            {% else %}\r\n              {% final_arg_array[index] = \"#{arg.var} : #{crystal_class}\".id %}\r\n            {% end %}\r\n          {% end %}\r\n        {% else %}\r\n          {% raise(\"Argument #{arg} in function #{final_method_name} of class #{crystal_class} is neither Arg nor TypeDeclaration.\") %}\r\n        {% end %}{% end %}\r\n      {% end %}\n\r\n\r\n      \n{% if try_again %}\r\n        Anyolite::Macro.wrap_method_index({{ rb_interpreter }}, {{ crystal_class }}, {{ method_index }},\r\n          {{ ruby_name }}, is_constructor: {{ is_constructor }}, is_class_method: {{ is_class_method }},\r\n          operator: {{ operator }}, cut_name: {{ cut_name }}, without_keywords: {{ without_keywords }},\r\n          added_keyword_args: {{ final_arg_array }}, context: {{ context }}, return_nil: {{ return_nil }},\r\n          block_arg_number: {{ block_arg_number }}, block_return_type: {{ block_return_type }},\r\n          store_block_arg: {{ store_block_arg }}, other_source: {{ other_source }})\r\n      {% else %}\r\n        {% if final_arg_array.empty? %}\r\n          {% if is_class_method %}\r\n            Anyolite.wrap_class_method({{ rb_interpreter }}, {{ crystal_class }}, {{ ruby_name }}, {{ final_method_name }}, operator: {{ final_operator }}, context: {{ context }}, return_nil: {{ return_nil }}, block_arg_number: {{ block_arg_number }}, block_return_type: {{ block_return_type }}, store_block_arg: {{ store_block_arg }})\r\n          {% else %}{% if is_constructor %}\r\n            # Do not ever let a constructor return nil (for now)\r\n            Anyolite.wrap_constructor({{ rb_interpreter }}, {{ crystal_class }}, context: {{ context }}, block_arg_number: {{ block_arg_number }}, block_return_type: {{ block_return_type }}, store_block_arg: {{ store_block_arg }})\r\n          {% else %}\r\n            Anyolite.wrap_instance_method({{ rb_interpreter }}, {{ crystal_class }}, {{ ruby_name }}, {{ final_method_name }}, operator: {{ final_operator }}, context: {{ context }}, return_nil: {{ return_nil }}, block_arg_number: {{ block_arg_number }}, block_return_type: {{ block_return_type }}, store_block_arg: {{ store_block_arg }})\r\n          {% end %}{% end %}\r\n\r\n        # A complicated check, but it is more stable than simply checking for colons\r\n        {% else %}{% if final_arg_array.find do |m|\n  (m.is_a?(TypeDeclaration) && m.type) || (m.is_a?(Arg) && m.restriction)\nend %}\r\n          {% if without_keywords %}\r\n            {% if without_keywords >= final_arg_array.size %}\r\n              {% regular_arg_partition = nil %}\r\n              {% keyword_arg_partition = final_arg_array %}\r\n            {% else %}{% if without_keywords == -2 %}\r\n              {% first_optional_arg = 0 %}\r\n              {% final_arg_array.each do |arg|\n  unless (arg.is_a?(TypeDeclaration) && (!arg.value.is_a?(Nop))) || (arg.is_a?(Arg) && (!arg.default_value.is_a?(Nop)))\n    first_optional_arg += 1\n  end\nend %}\r\n\r\n              {% regular_arg_partition = final_arg_array[0..(first_optional_arg - 1)] %}\r\n              {% keyword_arg_partition = final_arg_array[first_optional_arg..-1] %}\r\n\r\n              {% if (first_optional_arg == 0) || regular_arg_partition.empty?\n  regular_arg_partition = nil\nend %}\r\n              {% if keyword_arg_partition.empty?\n  keyword_arg_partition = nil\nend %}\r\n            {% else %}{% if without_keywords < 0 %}\r\n              {% regular_arg_partition = final_arg_array %}\r\n              {% keyword_arg_partition = nil %}\r\n            {% else %}\r\n              {% regular_arg_partition = final_arg_array[0..(without_keywords - 1)] %}\r\n              {% keyword_arg_partition = final_arg_array[without_keywords..-1] %}\r\n\r\n              {% if (without_keywords == 0) || regular_arg_partition.empty?\n  regular_arg_partition = nil\nend %}\r\n              {% if keyword_arg_partition.empty?\n  keyword_arg_partition = nil\nend %}\r\n            {% end %}{% end %}{% end %}\r\n\r\n            {% if keyword_arg_partition %}\r\n              {% if is_class_method %}\r\n                Anyolite.wrap_class_method_with_keywords({{ rb_interpreter }}, {{ crystal_class }}, {{ ruby_name }}, {{ final_method_name }}, \r\n                  {{ keyword_arg_partition }}, regular_args: {{ regular_arg_partition }}, operator: {{ final_operator }}, context: {{ context }}, return_nil: {{ return_nil }}, block_arg_number: {{ block_arg_number }}, block_return_type: {{ block_return_type }}, store_block_arg: {{ store_block_arg }})\r\n              {% else %}{% if is_constructor %}\r\n                Anyolite.wrap_constructor_with_keywords({{ rb_interpreter }}, {{ crystal_class }}, \r\n                  {{ keyword_arg_partition }}, regular_args: {{ regular_arg_partition }}, operator: {{ final_operator }}, context: {{ context }}, block_arg_number: {{ block_arg_number }}, block_return_type: {{ block_return_type }}, store_block_arg: {{ store_block_arg }})\r\n              {% else %}\r\n                Anyolite.wrap_instance_method_with_keywords({{ rb_interpreter }}, {{ crystal_class }}, {{ ruby_name }}, {{ final_method_name }}, \r\n                  {{ keyword_arg_partition }}, regular_args: {{ regular_arg_partition }}, operator: {{ final_operator }}, context: {{ context }}, return_nil: {{ return_nil }}, block_arg_number: {{ block_arg_number }}, block_return_type: {{ block_return_type }}, store_block_arg: {{ store_block_arg }})\r\n              {% end %}{% end %}\r\n            {% else %}\r\n              {% if is_class_method %}\r\n                Anyolite.wrap_class_method({{ rb_interpreter }}, {{ crystal_class }}, {{ ruby_name }}, {{ final_method_name }}, \r\n                  {{ regular_arg_partition }}, operator: {{ final_operator }}, context: {{ context }}, return_nil: {{ return_nil }}, block_arg_number: {{ block_arg_number }}, block_return_type: {{ block_return_type }}, store_block_arg: {{ store_block_arg }})\r\n              {% else %}{% if is_constructor %}\r\n                Anyolite.wrap_constructor({{ rb_interpreter }}, {{ crystal_class }}, \r\n                  {{ regular_arg_partition }}, operator: {{ final_operator }}, context: {{ context }}, block_arg_number: {{ block_arg_number }}, block_return_type: {{ block_return_type }}, store_block_arg: {{ store_block_arg }})\r\n              {% else %}\r\n                Anyolite.wrap_instance_method({{ rb_interpreter }}, {{ crystal_class }}, {{ ruby_name }}, {{ final_method_name }}, \r\n                  {{ regular_arg_partition }}, operator: {{ final_operator }}, context: {{ context }}, return_nil: {{ return_nil }}, block_arg_number: {{ block_arg_number }}, block_return_type: {{ block_return_type }}, store_block_arg: {{ store_block_arg }})\r\n              {% end %}{% end %}\r\n            {% end %}\r\n          {% else %}\r\n            {% if is_class_method %}\r\n              Anyolite.wrap_class_method_with_keywords({{ rb_interpreter }}, {{ crystal_class }}, {{ ruby_name }}, {{ final_method_name }}, \r\n                {{ final_arg_array }}, operator: {{ final_operator }}, context: {{ context }}, return_nil: {{ return_nil }}, block_arg_number: {{ block_arg_number }}, block_return_type: {{ block_return_type }}, store_block_arg: {{ store_block_arg }})\r\n            {% else %}{% if is_constructor %}\r\n              Anyolite.wrap_constructor_with_keywords({{ rb_interpreter }}, {{ crystal_class }}, \r\n                {{ final_arg_array }}, operator: {{ final_operator }}, context: {{ context }}, block_arg_number: {{ block_arg_number }}, block_return_type: {{ block_return_type }}, store_block_arg: {{ store_block_arg }})\r\n            {% else %}\r\n              Anyolite.wrap_instance_method_with_keywords({{ rb_interpreter }}, {{ crystal_class }}, {{ ruby_name }}, {{ final_method_name }}, \r\n                {{ final_arg_array }}, operator: {{ final_operator }}, context: {{ context }}, return_nil: {{ return_nil }}, block_arg_number: {{ block_arg_number }}, block_return_type: {{ block_return_type }}, store_block_arg: {{ store_block_arg }})\r\n            {% end %}{% end %}\r\n          {% end %}\r\n\r\n        {% else %}{% if (((!is_class_method) && (operator == \"==\")) && final_arg_array[0]) && (!final_arg_array[1]) %}\r\n          {% options = {:context => context} %}\r\n          Anyolite::Macro.wrap_equality_function({{ rb_interpreter }}, {{ crystal_class }}, {{ ruby_name }}, {{ final_method_name }}, operator: {{ final_operator }}, options: {{ options }})\r\n        {% else %}\r\n          {% if is_class_method %}\r\n            {% puts(\"\\e[33m> INFO: Could not wrap function '#{crystal_class}.#{method.name}' with args #{method.args}.\\e[0m\") %}\r\n          {% else %}\r\n            {% puts(\"\\e[33m> INFO: Could not wrap function '#{method.name}' with args #{method.args}.\\e[0m\") %}\r\n          {% end %}\r\n        {% end %}{% end %}{% end %}\r\n      {% end %}\n\r\n    \n"}},{"html_id":"wrap_module_function_with_args(rb_interpreter,under_module,name,proc,regular_args=nil,operator=\"\",options={}ofSymbol=>NoReturn)-macro","name":"wrap_module_function_with_args","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"under_module","external_name":"under_module","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"regular_args","default_value":"nil","external_name":"regular_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""}],"args_string":"(rb_interpreter, under_module, name, proc, regular_args = nil, operator = \"\", options = {} of Symbol => NoReturn)","args_html":"(rb_interpreter, under_module, name, proc, regular_args = <span class=\"n\">nil</span>, operator = <span class=\"s\">&quot;&quot;</span>, options = {} <span class=\"k\">of</span> <span class=\"t\">Symbol</span> =&gt; <span class=\"t\">NoReturn</span>)","location":{"filename":"src/macros/Wrappers.cr","line_number":3,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/Wrappers.cr#L3"},"def":{"name":"wrap_module_function_with_args","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"under_module","external_name":"under_module","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"regular_args","default_value":"nil","external_name":"regular_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""}],"visibility":"Public","body":"      \n{% if regular_args.is_a?(ArrayLiteral) %}\r\n        {% regular_arg_array = regular_args %}\r\n      {% else %}{% if regular_args == nil %}\r\n        {% regular_arg_array = nil %}\r\n      {% else %}\r\n        {% regular_arg_array = [regular_args] %}\r\n      {% end %}{% end %}\n\r\n\r\n      \n{% options[:type_vars] = under_module.resolve.type_vars %}\n\r\n      \n{% options[:type_var_names_annotation] = under_module.resolve.annotation(Anyolite::SpecifyGenericTypes) %}\n\r\n      \n{% options[:type_var_names] = options[:type_var_names_annotation] ? options[:type_var_names_annotation][0] : nil %}\n\r\n\r\n      \n%wrapped_method\n = Anyolite::Macro.new_rb_func do\r\n        \n# TODO: Put these kinds of commands into a new macro\r\n\n        \n{% if options[:block_arg_number] || options[:store_block_arg] %}\r\n          %block_ptr = Pointer(Anyolite::RbCore::RbValue).malloc(size: 1)\r\n          \r\n          {% if options[:store_block_arg] %}\r\n            Anyolite::RbArgCache.push_block_cache(%block_ptr)\r\n          {% end %}\r\n\r\n          %args = Anyolite::Macro.generate_arg_tuple(_rb, {{ regular_args }}, options: {{ options }})\r\n          %format_string = Anyolite::Macro.format_string({{ regular_args }}, options: {{ options }}) + \"&\"\r\n          \r\n          Anyolite::Macro.load_args_into_vars({{ regular_args }}, %format_string, %args, %block_ptr)\r\n\r\n          {% if options[:block_arg_number] %}\r\n            if Anyolite::RbCast.check_for_nil(%block_ptr.value)\r\n              Anyolite.raise_argument_error(\"No block given.\")\r\n              Anyolite::RbCast.return_nil\r\n            end\r\n          {% end %}\r\n\r\n          %converted_args = Anyolite::Macro.convert_regular_args(_rb, %args, {{ regular_args }}, options: {{ options }})\r\n        {% else %}\r\n          %block_ptr = nil\r\n          %converted_args = Anyolite::Macro.get_converted_args(_rb, {{ regular_arg_array }}, options: {{ options }})\r\n        {% end %}\n\r\n\r\n        \n%return_value\n = Anyolite::Macro.call_and_return(_rb, \n{{ proc }}\n, \n{{ regular_arg_array }}\n, \n%converted_args\n, operator: \n{{ operator }}\n, options: \n{{ options }}\n, block_ptr: \n%block_ptr\n)\r\n\r\n        \n{% if options[:store_block_arg] %}\r\n          Anyolite::RbArgCache.pop_block_cache\r\n        {% end %}\n\r\n\r\n        \n%return_value\n\r\n      \nend\r\n\r\n      \n{{ rb_interpreter }}\n.define_module_function(\n{{ name }}\n, Anyolite::RbClassCache.get(\n{{ under_module }}\n), \n%wrapped_method\n)\r\n    \n"}},{"html_id":"wrap_module_function_with_keyword_args(rb_interpreter,under_module,name,proc,keyword_args,regular_args=nil,operator=\"\",options={}ofSymbol=>NoReturn)-macro","name":"wrap_module_function_with_keyword_args","abstract":false,"args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"under_module","external_name":"under_module","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"keyword_args","external_name":"keyword_args","restriction":""},{"name":"regular_args","default_value":"nil","external_name":"regular_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""}],"args_string":"(rb_interpreter, under_module, name, proc, keyword_args, regular_args = nil, operator = \"\", options = {} of Symbol => NoReturn)","args_html":"(rb_interpreter, under_module, name, proc, keyword_args, regular_args = <span class=\"n\">nil</span>, operator = <span class=\"s\">&quot;&quot;</span>, options = {} <span class=\"k\">of</span> <span class=\"t\">Symbol</span> =&gt; <span class=\"t\">NoReturn</span>)","location":{"filename":"src/macros/Wrappers.cr","line_number":55,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/macros/Wrappers.cr#L55"},"def":{"name":"wrap_module_function_with_keyword_args","args":[{"name":"rb_interpreter","external_name":"rb_interpreter","restriction":""},{"name":"under_module","external_name":"under_module","restriction":""},{"name":"name","external_name":"name","restriction":""},{"name":"proc","external_name":"proc","restriction":""},{"name":"keyword_args","external_name":"keyword_args","restriction":""},{"name":"regular_args","default_value":"nil","external_name":"regular_args","restriction":""},{"name":"operator","default_value":"\"\"","external_name":"operator","restriction":""},{"name":"options","default_value":"{} of Symbol => NoReturn","external_name":"options","restriction":""}],"visibility":"Public","body":"      \n{% if regular_args.is_a?(ArrayLiteral) %}\r\n        {% regular_arg_array = regular_args %}\r\n      {% else %}{% if regular_args == nil %}\r\n        {% regular_arg_array = nil %}\r\n      {% else %}\r\n        {% regular_arg_array = [regular_args] %}\r\n      {% end %}{% end %}\n\r\n\r\n      \n{% options[:type_vars] = under_module.resolve.type_vars %}\n\r\n      \n{% options[:type_var_names_annotation] = under_module.resolve.annotation(Anyolite::SpecifyGenericTypes) %}\n\r\n      \n{% options[:type_var_names] = options[:type_var_names_annotation] ? options[:type_var_names_annotation][0] : nil %}\n\r\n\r\n      \n%wrapped_method\n = Anyolite::Macro.new_rb_func do\r\n        \n%regular_arg_tuple\n = Anyolite::Macro.generate_arg_tuple(_rb, \n{{ regular_arg_array }}\n, options: \n{{ options }}\n)\r\n\r\n        \n{% if options[:block_arg_number] || options[:store_block_arg] %}\r\n          %block_ptr = Pointer(Anyolite::RbCore::RbValue).malloc(size: 1)\r\n\r\n          {% if options[:store_block_arg] %}\r\n            Anyolite::RbArgCache.push_block_cache(%block_ptr)\r\n          {% end %}\r\n\r\n          %format_string = Anyolite::Macro.format_string({{ regular_arg_array }}, options: {{ options }}) + \":&\"\r\n          %kw_args = Anyolite::Macro.load_kw_args_into_vars({{ regular_arg_array }}, {{ keyword_args }}, %format_string, %regular_arg_tuple, %block_ptr)\r\n\r\n          {% if options[:block_arg_number] %}\r\n            if Anyolite::RbCast.check_for_nil(%block_ptr.value)\r\n              Anyolite.raise_argument_error(\"No block given.\")\r\n              Anyolite::RbCast.return_nil\r\n            end\r\n          {% end %}\r\n        {% else %}\r\n          %block_ptr = nil\r\n          %format_string = Anyolite::Macro.format_string({{ regular_arg_array }}, options: {{ options }}) + \":\"\r\n          %kw_args = Anyolite::Macro.load_kw_args_into_vars({{ regular_arg_array }}, {{ keyword_args }}, %format_string, %regular_arg_tuple)\r\n        {% end %}\n\r\n\r\n        \n%converted_regular_args\n = Anyolite::Macro.convert_regular_args(_rb, \n%regular_arg_tuple\n, \n{{ regular_arg_array }}\n, options: \n{{ options }}\n)\r\n\r\n        \n{% if (!regular_arg_array) || (regular_arg_array.size == 0) %}\r\n          {% options[:empty_regular] = true %}\r\n        {% end %}\n\r\n\r\n        \n%return_value\n = Anyolite::Macro.call_and_return_keyword_method(_rb, \n{{ proc }}\n, \n%converted_regular_args\n, \n{{ keyword_args }}\n, \n%kw_args\n, operator: \n{{ operator }}\n, options: \n{{ options }}\n, block_ptr: \n%block_ptr\n)\r\n        \r\n        \n{% if options[:store_block_arg] %}\r\n          Anyolite::RbArgCache.pop_block_cache\r\n        {% end %}\n\r\n\r\n        \n%return_value\n\r\n      \nend\r\n\r\n      \n{{ rb_interpreter }}\n.define_module_function(\n{{ name }}\n, Anyolite::RbClassCache.get(\n{{ under_module }}\n), \n%wrapped_method\n)\r\n    \n"}}]},{"html_id":"anyolite/Anyolite/NoKeywordArgs","path":"Anyolite/NoKeywordArgs.html","kind":"annotation","full_name":"Anyolite::NoKeywordArgs","name":"NoKeywordArgs","abstract":false,"locations":[{"filename":"src/Main.cr","line_number":938,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L938"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"The methods of the annotated class or module will not\nbe wrapped with keyword arguments unless `ForceKeywordArg`\nor similar was used.","summary":"<p>The methods of the annotated class or module will not be wrapped with keyword arguments unless <code><a href=\"../Anyolite/ForceKeywordArg.html\">ForceKeywordArg</a></code> or similar was used.</p>"},{"html_id":"anyolite/Anyolite/Preloader","path":"Anyolite/Preloader.html","kind":"module","full_name":"Anyolite::Preloader","name":"Preloader","abstract":false,"locations":[{"filename":"src/Preloader.cr","line_number":2,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Preloader.cr#L2"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"class_methods":[{"html_id":"add_content(filename:String,bytes:Array(UInt8))-class-method","name":"add_content","doc":"Caches the bytecode file *filename*","summary":"<p>Caches the bytecode file <em>filename</em></p>","abstract":false,"args":[{"name":"filename","external_name":"filename","restriction":"String"},{"name":"bytes","external_name":"bytes","restriction":"Array(UInt8)"}],"args_string":"(filename : String, bytes : Array(UInt8))","args_html":"(filename : String, bytes : Array(UInt8))","location":{"filename":"src/Preloader.cr","line_number":36,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Preloader.cr#L36"},"def":{"name":"add_content","args":[{"name":"filename","external_name":"filename","restriction":"String"},{"name":"bytes","external_name":"bytes","restriction":"Array(UInt8)"}],"visibility":"Public","body":"@@content[filename] = bytes"}},{"html_id":"execute_bytecode_from_cache_or_file(rb:RbInterpreter,filename:String)-class-method","name":"execute_bytecode_from_cache_or_file","doc":"Executes the bytecode file *filename* in context of the `RbInterpreter` *rb*.\n\nIf it was already cached, it will be taken from the cache instead.","summary":"<p>Executes the bytecode file <em>filename</em> in context of the <code><a href=\"../Anyolite/RbInterpreter.html\">RbInterpreter</a></code> <em>rb</em>.</p>","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":"RbInterpreter"},{"name":"filename","external_name":"filename","restriction":"String"}],"args_string":"(rb : RbInterpreter, filename : String)","args_html":"(rb : <a href=\"../Anyolite/RbInterpreter.html\">RbInterpreter</a>, filename : String)","location":{"filename":"src/Preloader.cr","line_number":43,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Preloader.cr#L43"},"def":{"name":"execute_bytecode_from_cache_or_file","args":[{"name":"rb","external_name":"rb","restriction":"RbInterpreter"},{"name":"filename","external_name":"filename","restriction":"String"}],"visibility":"Public","body":"if @@content[filename]?\n  rb.execute_bytecode(@@content[filename])\nelse\n  rb.load_bytecode_from_file(filename)\nend"}},{"html_id":"transform_script_to_bytecode(filename:String,target_filename:String)-class-method","name":"transform_script_to_bytecode","doc":"Converts the Ruby script in *filename* to bytecode, which is\nthen stored in *target_filename*.","summary":"<p>Converts the Ruby script in <em>filename</em> to bytecode, which is then stored in <em>target_filename</em>.</p>","abstract":false,"args":[{"name":"filename","external_name":"filename","restriction":"String"},{"name":"target_filename","external_name":"target_filename","restriction":"String"}],"args_string":"(filename : String, target_filename : String)","args_html":"(filename : String, target_filename : String)","location":{"filename":"src/Preloader.cr","line_number":53,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Preloader.cr#L53"},"def":{"name":"transform_script_to_bytecode","args":[{"name":"filename","external_name":"filename","restriction":"String"},{"name":"target_filename","external_name":"target_filename","restriction":"String"}],"visibility":"Public","body":"error_code = RbCore.transform_script_to_bytecode(filename, target_filename)\ncase error_code\nwhen 1\n  raise(\"Could not load script file #{filename}\")\nwhen 2\n  raise(\"Error when loading script file #{filename}\")\nwhen 3\n  raise(\"Could not write to target file #{target_filename}\")\nend\n"}},{"html_id":"transform_script_to_bytecode_array(filename:String)-class-method","name":"transform_script_to_bytecode_array","doc":"Converts the Ruby script in *filename* to bytecode.","summary":"<p>Converts the Ruby script in <em>filename</em> to bytecode.</p>","abstract":false,"args":[{"name":"filename","external_name":"filename","restriction":"String"}],"args_string":"(filename : String)","args_html":"(filename : String)","location":{"filename":"src/Preloader.cr","line_number":64,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Preloader.cr#L64"},"def":{"name":"transform_script_to_bytecode_array","args":[{"name":"filename","external_name":"filename","restriction":"String"}],"visibility":"Public","body":"container = RbCore.transform_script_to_bytecode_container(filename)\ncase container.error_code\nwhen 1\n  raise(\"Could not load script file #{filename}\")\nwhen 2\n  raise(\"Error when loading script file #{filename}\")\nend\nsafe_result = String.new(container.content, container.size)\nRbCore.free_bytecode_container(container)\nsafe_result.bytes\n"}}],"types":[{"html_id":"anyolite/Anyolite/Preloader/AtCompiletime","path":"Anyolite/Preloader/AtCompiletime.html","kind":"module","full_name":"Anyolite::Preloader::AtCompiletime","name":"AtCompiletime","abstract":false,"locations":[{"filename":"src/Preloader.cr","line_number":5,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Preloader.cr#L5"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite/Preloader","kind":"module","full_name":"Anyolite::Preloader","name":"Preloader"},"macros":[{"html_id":"load_bytecode_array_from_file(filename)-macro","name":"load_bytecode_array_from_file","doc":"Caches the Ruby script in *filename* directly as bytecode.","summary":"<p>Caches the Ruby script in <em>filename</em> directly as bytecode.</p>","abstract":false,"args":[{"name":"filename","external_name":"filename","restriction":""}],"args_string":"(filename)","args_html":"(filename)","location":{"filename":"src/Preloader.cr","line_number":18,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Preloader.cr#L18"},"def":{"name":"load_bytecode_array_from_file","args":[{"name":"filename","external_name":"filename","restriction":""}],"visibility":"Public","body":"        \n{% ary = run(\"./BytecodeGetter.cr\", filename) %}\n\n        Anyolite::Preloader.add_content(\n{{ filename }}\n, \n{{ ary }}\n.map(&.to_u8))\n      \n"}},{"html_id":"load_bytecode_file(filename)-macro","name":"load_bytecode_file","doc":"Caches the bytecode from *filename*, so it is automatically included\ninto the final application.","summary":"<p>Caches the bytecode from <em>filename</em>, so it is automatically included into the final application.</p>","abstract":false,"args":[{"name":"filename","external_name":"filename","restriction":""}],"args_string":"(filename)","args_html":"(filename)","location":{"filename":"src/Preloader.cr","line_number":8,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Preloader.cr#L8"},"def":{"name":"load_bytecode_file","args":[{"name":"filename","external_name":"filename","restriction":""}],"visibility":"Public","body":"        \n{% file_content = read_file?(filename) %}\n\n        \n{% if file_content %}\n          Anyolite::Preloader.add_content({{ filename }}, {{ file_content }}.bytes)\n        {% else %}\n          puts \"Could not find #{filename}\"\n        {% end %}\n\n      \n"}},{"html_id":"transform_script_to_bytecode(filename,target_filename)-macro","name":"transform_script_to_bytecode","doc":"Converts the Ruby script in *filename* to bytecode, which is\nthen stored in *target_filename*.","summary":"<p>Converts the Ruby script in <em>filename</em> to bytecode, which is then stored in <em>target_filename</em>.</p>","abstract":false,"args":[{"name":"filename","external_name":"filename","restriction":""},{"name":"target_filename","external_name":"target_filename","restriction":""}],"args_string":"(filename, target_filename)","args_html":"(filename, target_filename)","location":{"filename":"src/Preloader.cr","line_number":25,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Preloader.cr#L25"},"def":{"name":"transform_script_to_bytecode","args":[{"name":"filename","external_name":"filename","restriction":""},{"name":"target_filename","external_name":"target_filename","restriction":""}],"visibility":"Public","body":"        \n{% run(\"./BytecodeCompiler.cr\", filename, target_filename) %}\n\n      \n"}},{"html_id":"transform_script_to_bytecode_string(filename)-macro","name":"transform_script_to_bytecode_string","doc":"Converts the Ruby script in *filename* to bytecode.","summary":"<p>Converts the Ruby script in <em>filename</em> to bytecode.</p>","abstract":false,"args":[{"name":"filename","external_name":"filename","restriction":""}],"args_string":"(filename)","args_html":"(filename)","location":{"filename":"src/Preloader.cr","line_number":30,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Preloader.cr#L30"},"def":{"name":"transform_script_to_bytecode_string","args":[{"name":"filename","external_name":"filename","restriction":""}],"visibility":"Public","body":"        \n{% run(\"./BytecodeGetter.cr\", filename) %}\n\n      \n"}}]}]},{"html_id":"anyolite/Anyolite/RbArgCache","path":"Anyolite/RbArgCache.html","kind":"module","full_name":"Anyolite::RbArgCache","name":"RbArgCache","abstract":false,"locations":[{"filename":"src/RbArgCache.cr","line_number":2,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbArgCache.cr#L2"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"class_methods":[{"html_id":"get_block_cache-class-method","name":"get_block_cache","abstract":false,"location":{"filename":"src/RbArgCache.cr","line_number":5,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbArgCache.cr#L5"},"def":{"name":"get_block_cache","visibility":"Public","body":"if @@block_cache.size > 0\n  @@block_cache.last\nelse\n  nil\nend"}},{"html_id":"pop_block_cache-class-method","name":"pop_block_cache","abstract":false,"location":{"filename":"src/RbArgCache.cr","line_number":17,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbArgCache.cr#L17"},"def":{"name":"pop_block_cache","visibility":"Public","body":"@@block_cache.pop"}},{"html_id":"push_block_cache(value)-class-method","name":"push_block_cache","abstract":false,"args":[{"name":"value","external_name":"value","restriction":""}],"args_string":"(value)","args_html":"(value)","location":{"filename":"src/RbArgCache.cr","line_number":13,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbArgCache.cr#L13"},"def":{"name":"push_block_cache","args":[{"name":"value","external_name":"value","restriction":""}],"visibility":"Public","body":"@@block_cache.push(value)"}}]},{"html_id":"anyolite/Anyolite/RbCast","path":"Anyolite/RbCast.html","kind":"module","full_name":"Anyolite::RbCast","name":"RbCast","abstract":false,"locations":[{"filename":"src/RbCast.cr","line_number":3,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbCast.cr#L3"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Module for specific casts of Crystal values into mruby values","summary":"<p>Module for specific casts of Crystal values into mruby values</p>","class_methods":[{"html_id":"cast_to_bool(rb:Pointer(RbCore::State),value:RbCore::RbValue)-class-method","name":"cast_to_bool","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":"::Pointer(RbCore::State)"},{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"args_string":"(rb : Pointer(RbCore::State), value : RbCore::RbValue)","args_html":"(rb : Pointer(RbCore::State), value : RbCore::RbValue)","location":{"filename":"src/RbCast.cr","line_number":196,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbCast.cr#L196"},"def":{"name":"cast_to_bool","args":[{"name":"rb","external_name":"rb","restriction":"::Pointer(RbCore::State)"},{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"visibility":"Public","body":"if RbCast.check_for_true(value)\n  true\nelse\n  if RbCast.check_for_false(value)\n    false\n  else\n    RbCast.casting_error(rb, value, Bool, false)\n  end\nend"}},{"html_id":"cast_to_char(rb:Pointer(RbCore::State),value:RbCore::RbValue)-class-method","name":"cast_to_char","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":"::Pointer(RbCore::State)"},{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"args_string":"(rb : Pointer(RbCore::State), value : RbCore::RbValue)","args_html":"(rb : Pointer(RbCore::State), value : RbCore::RbValue)","location":{"filename":"src/RbCast.cr","line_number":224,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbCast.cr#L224"},"def":{"name":"cast_to_char","args":[{"name":"rb","external_name":"rb","restriction":"::Pointer(RbCore::State)"},{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"visibility":"Public","body":"if RbCast.check_for_string(value)\n  str = String.new(RbCore.get_rb_string(rb, value))\n  if str.empty?\n    RbCast.casting_error(rb, value, Char, '\\0')\n  else\n    str[0]\n  end\nelse\n  RbCast.casting_error(rb, value, Char, '\\0')\nend"}},{"html_id":"cast_to_float(rb:Pointer(RbCore::State),value:RbCore::RbValue)-class-method","name":"cast_to_float","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":"::Pointer(RbCore::State)"},{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"args_string":"(rb : Pointer(RbCore::State), value : RbCore::RbValue)","args_html":"(rb : Pointer(RbCore::State), value : RbCore::RbValue)","location":{"filename":"src/RbCast.cr","line_number":214,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbCast.cr#L214"},"def":{"name":"cast_to_float","args":[{"name":"rb","external_name":"rb","restriction":"::Pointer(RbCore::State)"},{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"visibility":"Public","body":"if RbCast.check_for_float(value)\n  RbCore.get_rb_float(value)\nelse\n  if RbCast.check_for_fixnum(value)\n    (RbCore.get_rb_fixnum(value)).to_f\n  else\n    RbCast.casting_error(rb, value, Float, 0.0)\n  end\nend"}},{"html_id":"cast_to_int(rb:Pointer(RbCore::State),value:RbCore::RbValue)-class-method","name":"cast_to_int","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":"::Pointer(RbCore::State)"},{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"args_string":"(rb : Pointer(RbCore::State), value : RbCore::RbValue)","args_html":"(rb : Pointer(RbCore::State), value : RbCore::RbValue)","location":{"filename":"src/RbCast.cr","line_number":206,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbCast.cr#L206"},"def":{"name":"cast_to_int","args":[{"name":"rb","external_name":"rb","restriction":"::Pointer(RbCore::State)"},{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"visibility":"Public","body":"if RbCast.check_for_fixnum(value)\n  RbCore.get_rb_fixnum(value)\nelse\n  RbCast.casting_error(rb, value, Int, 0)\nend"}},{"html_id":"cast_to_nil(rb:Pointer(RbCore::State),value:RbCore::RbValue)-class-method","name":"cast_to_nil","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":"::Pointer(RbCore::State)"},{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"args_string":"(rb : Pointer(RbCore::State), value : RbCore::RbValue)","args_html":"(rb : Pointer(RbCore::State), value : RbCore::RbValue)","location":{"filename":"src/RbCast.cr","line_number":186,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbCast.cr#L186"},"def":{"name":"cast_to_nil","args":[{"name":"rb","external_name":"rb","restriction":"::Pointer(RbCore::State)"},{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"visibility":"Public","body":"if (RbCast.check_for_nil(value)) || true\n  nil\nelse\n  RbCast.casting_error(rb, value, Nil, nil)\nend"}},{"html_id":"cast_to_string(rb:Pointer(RbCore::State),value:RbCore::RbValue)-class-method","name":"cast_to_string","doc":"TODO: Maybe add an option for implicit casts?","summary":"<p><span class=\"flag orange\">TODO</span>  Maybe add an option for implicit casts?</p>","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":"::Pointer(RbCore::State)"},{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"args_string":"(rb : Pointer(RbCore::State), value : RbCore::RbValue)","args_html":"(rb : Pointer(RbCore::State), value : RbCore::RbValue)","location":{"filename":"src/RbCast.cr","line_number":239,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbCast.cr#L239"},"def":{"name":"cast_to_string","args":[{"name":"rb","external_name":"rb","restriction":"::Pointer(RbCore::State)"},{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"visibility":"Public","body":"if RbCast.check_for_string(value)\n  String.new(RbCore.get_rb_string(rb, value))\nelse\n  if RbCast.check_for_symbol(value)\n    String.new(RbCore.get_rb_string(rb, RbCore.rb_inspect(rb, value)))\n  else\n    RbCast.casting_error(rb, value, String, \"\")\n  end\nend"}},{"html_id":"casting_error(rb:Pointer(RbCore::State),value,crystal_class,rescue_value)-class-method","name":"casting_error","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":"::Pointer(RbCore::State)"},{"name":"value","external_name":"value","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"rescue_value","external_name":"rescue_value","restriction":""}],"args_string":"(rb : Pointer(RbCore::State), value, crystal_class, rescue_value)","args_html":"(rb : Pointer(RbCore::State), value, crystal_class, rescue_value)","location":{"filename":"src/RbCast.cr","line_number":175,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbCast.cr#L175"},"def":{"name":"casting_error","args":[{"name":"rb","external_name":"rb","restriction":"::Pointer(RbCore::State)"},{"name":"value","external_name":"value","restriction":""},{"name":"crystal_class","external_name":"crystal_class","restriction":""},{"name":"rescue_value","external_name":"rescue_value","restriction":""}],"visibility":"Public","body":"rb_inspect_string = RbCore.rb_inspect(rb, value)\nrb_class = RbCore.get_class_of_obj(rb, value)\nclass_name = String.new(RbCore.rb_class_name(rb, rb_class))\nvalue_debug = RbCast.cast_to_string(rb, rb_inspect_string)\nAnyolite.raise_argument_error(\"Could not cast value #{value_debug} of class #{class_name} to #{crystal_class}.\")\nrescue_value\n"}},{"html_id":"check_for_array(value:RbCore::RbValue)-class-method","name":"check_for_array","abstract":false,"args":[{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"args_string":"(value : RbCore::RbValue)","args_html":"(value : RbCore::RbValue)","location":{"filename":"src/RbCast.cr","line_number":163,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbCast.cr#L163"},"def":{"name":"check_for_array","args":[{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"visibility":"Public","body":"(RbCore.check_rb_array(value)) != 0"}},{"html_id":"check_for_bool(value:RbCore::RbValue)-class-method","name":"check_for_bool","abstract":false,"args":[{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"args_string":"(value : RbCore::RbValue)","args_html":"(value : RbCore::RbValue)","location":{"filename":"src/RbCast.cr","line_number":143,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbCast.cr#L143"},"def":{"name":"check_for_bool","args":[{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"visibility":"Public","body":"(RbCast.check_for_true(value)) || (RbCast.check_for_false(value))"}},{"html_id":"check_for_data(value:RbCore::RbValue)-class-method","name":"check_for_data","abstract":false,"args":[{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"args_string":"(value : RbCore::RbValue)","args_html":"(value : RbCore::RbValue)","location":{"filename":"src/RbCast.cr","line_number":171,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbCast.cr#L171"},"def":{"name":"check_for_data","args":[{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"visibility":"Public","body":"(RbCore.check_rb_data(value)) != 0"}},{"html_id":"check_for_false(value:RbCore::RbValue)-class-method","name":"check_for_false","abstract":false,"args":[{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"args_string":"(value : RbCore::RbValue)","args_html":"(value : RbCore::RbValue)","location":{"filename":"src/RbCast.cr","line_number":139,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbCast.cr#L139"},"def":{"name":"check_for_false","args":[{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"visibility":"Public","body":"(RbCore.check_rb_false(value)) != 0"}},{"html_id":"check_for_fixnum(value:RbCore::RbValue)-class-method","name":"check_for_fixnum","abstract":false,"args":[{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"args_string":"(value : RbCore::RbValue)","args_html":"(value : RbCore::RbValue)","location":{"filename":"src/RbCast.cr","line_number":147,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbCast.cr#L147"},"def":{"name":"check_for_fixnum","args":[{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"visibility":"Public","body":"(RbCore.check_rb_fixnum(value)) != 0"}},{"html_id":"check_for_float(value:RbCore::RbValue)-class-method","name":"check_for_float","abstract":false,"args":[{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"args_string":"(value : RbCore::RbValue)","args_html":"(value : RbCore::RbValue)","location":{"filename":"src/RbCast.cr","line_number":151,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbCast.cr#L151"},"def":{"name":"check_for_float","args":[{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"visibility":"Public","body":"(RbCore.check_rb_float(value)) != 0"}},{"html_id":"check_for_hash(value:RbCore::RbValue)-class-method","name":"check_for_hash","abstract":false,"args":[{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"args_string":"(value : RbCore::RbValue)","args_html":"(value : RbCore::RbValue)","location":{"filename":"src/RbCast.cr","line_number":167,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbCast.cr#L167"},"def":{"name":"check_for_hash","args":[{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"visibility":"Public","body":"(RbCore.check_rb_hash(value)) != 0"}},{"html_id":"check_for_nil(value:RbCore::RbValue)-class-method","name":"check_for_nil","abstract":false,"args":[{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"args_string":"(value : RbCore::RbValue)","args_html":"(value : RbCore::RbValue)","location":{"filename":"src/RbCast.cr","line_number":131,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbCast.cr#L131"},"def":{"name":"check_for_nil","args":[{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"visibility":"Public","body":"(RbCore.check_rb_nil(value)) != 0"}},{"html_id":"check_for_string(value:RbCore::RbValue)-class-method","name":"check_for_string","abstract":false,"args":[{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"args_string":"(value : RbCore::RbValue)","args_html":"(value : RbCore::RbValue)","location":{"filename":"src/RbCast.cr","line_number":155,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbCast.cr#L155"},"def":{"name":"check_for_string","args":[{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"visibility":"Public","body":"(RbCore.check_rb_string(value)) != 0"}},{"html_id":"check_for_symbol(value:RbCore::RbValue)-class-method","name":"check_for_symbol","abstract":false,"args":[{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"args_string":"(value : RbCore::RbValue)","args_html":"(value : RbCore::RbValue)","location":{"filename":"src/RbCast.cr","line_number":159,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbCast.cr#L159"},"def":{"name":"check_for_symbol","args":[{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"visibility":"Public","body":"(RbCore.check_rb_symbol(value)) != 0"}},{"html_id":"check_for_true(value:RbCore::RbValue)-class-method","name":"check_for_true","abstract":false,"args":[{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"args_string":"(value : RbCore::RbValue)","args_html":"(value : RbCore::RbValue)","location":{"filename":"src/RbCast.cr","line_number":135,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbCast.cr#L135"},"def":{"name":"check_for_true","args":[{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"visibility":"Public","body":"(RbCore.check_rb_true(value)) != 0"}},{"html_id":"check_for_undef(value:RbCore::RbValue)-class-method","name":"check_for_undef","abstract":false,"args":[{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"args_string":"(value : RbCore::RbValue)","args_html":"(value : RbCore::RbValue)","location":{"filename":"src/RbCast.cr","line_number":127,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbCast.cr#L127"},"def":{"name":"check_for_undef","args":[{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"visibility":"Public","body":"(RbCore.check_rb_undef(value)) != 0"}},{"html_id":"is_undef?(value)-class-method","name":"is_undef?","abstract":false,"args":[{"name":"value","external_name":"value","restriction":""}],"args_string":"(value)","args_html":"(value)","location":{"filename":"src/RbCast.cr","line_number":253,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbCast.cr#L253"},"def":{"name":"is_undef?","args":[{"name":"value","external_name":"value","restriction":""}],"visibility":"Public","body":"if value.is_a?(RbCore::RbValue)\n  Anyolite::RbCast.check_for_undef(value)\nelse\n  false\nend"}},{"html_id":"return_array(rb:Pointer(RbCore::State),value)-class-method","name":"return_array","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":"::Pointer(RbCore::State)"},{"name":"value","external_name":"value","restriction":""}],"args_string":"(rb : Pointer(RbCore::State), value)","args_html":"(rb : Pointer(RbCore::State), value)","location":{"filename":"src/RbCast.cr","line_number":34,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbCast.cr#L34"},"def":{"name":"return_array","args":[{"name":"rb","external_name":"rb","restriction":"::Pointer(RbCore::State)"},{"name":"value","external_name":"value","restriction":""}],"visibility":"Public","body":"array_size = value.size\narray_values = Pointer(RbCore::RbValue).malloc(size: array_size) do |i|\n  RbCast.return_value(rb, value[i])\nend\nreturn RbCore.rb_ary_new_from_values(rb, array_size, array_values)\n"}},{"html_id":"return_bool(value)-class-method","name":"return_bool","abstract":false,"args":[{"name":"value","external_name":"value","restriction":""}],"args_string":"(value)","args_html":"(value)","location":{"filename":"src/RbCast.cr","line_number":22,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbCast.cr#L22"},"def":{"name":"return_bool","args":[{"name":"value","external_name":"value","restriction":""}],"visibility":"Public","body":"return RbCore.get_bool_value(value ? 1 : 0)"}},{"html_id":"return_false-class-method","name":"return_false","abstract":false,"location":{"filename":"src/RbCast.cr","line_number":14,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbCast.cr#L14"},"def":{"name":"return_false","visibility":"Public","body":"return RbCore.get_false_value"}},{"html_id":"return_fixnum(value)-class-method","name":"return_fixnum","abstract":false,"args":[{"name":"value","external_name":"value","restriction":""}],"args_string":"(value)","args_html":"(value)","location":{"filename":"src/RbCast.cr","line_number":18,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbCast.cr#L18"},"def":{"name":"return_fixnum","args":[{"name":"value","external_name":"value","restriction":""}],"visibility":"Public","body":"return RbCore.get_fixnum_value(value)"}},{"html_id":"return_float(rb:Pointer(RbCore::State),value)-class-method","name":"return_float","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":"::Pointer(RbCore::State)"},{"name":"value","external_name":"value","restriction":""}],"args_string":"(rb : Pointer(RbCore::State), value)","args_html":"(rb : Pointer(RbCore::State), value)","location":{"filename":"src/RbCast.cr","line_number":26,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbCast.cr#L26"},"def":{"name":"return_float","args":[{"name":"rb","external_name":"rb","restriction":"::Pointer(RbCore::State)"},{"name":"value","external_name":"value","restriction":""}],"visibility":"Public","body":"return RbCore.get_float_value(rb, value)"}},{"html_id":"return_hash(rb:Pointer(RbCore::State),value)-class-method","name":"return_hash","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":"::Pointer(RbCore::State)"},{"name":"value","external_name":"value","restriction":""}],"args_string":"(rb : Pointer(RbCore::State), value)","args_html":"(rb : Pointer(RbCore::State), value)","location":{"filename":"src/RbCast.cr","line_number":48,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbCast.cr#L48"},"def":{"name":"return_hash","args":[{"name":"rb","external_name":"rb","restriction":"::Pointer(RbCore::State)"},{"name":"value","external_name":"value","restriction":""}],"visibility":"Public","body":"hash_size = value.size\nrb_hash = RbCore.rb_hash_new(rb)\nvalue.each do |index, element|\n  rb_element = RbCast.return_value(rb, element)\n  rb_key = RbCast.return_value(rb, index)\n  RbCore.rb_hash_set(rb, rb_hash, rb_key, rb_element)\nend\nreturn rb_hash\n"}},{"html_id":"return_nil-class-method","name":"return_nil","abstract":false,"location":{"filename":"src/RbCast.cr","line_number":6,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbCast.cr#L6"},"def":{"name":"return_nil","visibility":"Public","body":"return RbCore.get_nil_value"}},{"html_id":"return_object(rb:Pointer(RbCore::State),value:Object)-class-method","name":"return_object","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":"::Pointer(RbCore::State)"},{"name":"value","external_name":"value","restriction":"Object"}],"args_string":"(rb : Pointer(RbCore::State), value : Object)","args_html":"(rb : Pointer(RbCore::State), value : Object)","location":{"filename":"src/RbCast.cr","line_number":77,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbCast.cr#L77"},"def":{"name":"return_object","args":[{"name":"rb","external_name":"rb","restriction":"::Pointer(RbCore::State)"},{"name":"value","external_name":"value","restriction":"Object"}],"visibility":"Public","body":"ruby_class = RbClassCache.get(value.class)\nvalue_id = RbRefTable.get_object_id(value)\nif RbRefTable.is_registered?(value_id)\n  return RbRefTable.get_rb_value(value_id)\nelse\n  destructor = RbTypeCache.destructor_method(typeof(value))\n  ptr = Pointer(typeof(value)).malloc(size: 1, value: value)\n  new_ruby_object = RbCore.new_empty_object(rb, ruby_class, ptr.as(::Pointer(Void)), RbTypeCache.register(value.class, destructor))\n  RbRefTable.add(value_id, ptr.as(::Pointer(Void)), new_ruby_object)\n  return new_ruby_object\nend\n"}},{"html_id":"return_string(rb:Pointer(RbCore::State),value)-class-method","name":"return_string","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":"::Pointer(RbCore::State)"},{"name":"value","external_name":"value","restriction":""}],"args_string":"(rb : Pointer(RbCore::State), value)","args_html":"(rb : Pointer(RbCore::State), value)","location":{"filename":"src/RbCast.cr","line_number":30,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbCast.cr#L30"},"def":{"name":"return_string","args":[{"name":"rb","external_name":"rb","restriction":"::Pointer(RbCore::State)"},{"name":"value","external_name":"value","restriction":""}],"visibility":"Public","body":"return RbCore.get_string_value(rb, value)"}},{"html_id":"return_struct_or_enum(rb:Pointer(RbCore::State),value:Struct|Enum)-class-method","name":"return_struct_or_enum","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":"::Pointer(RbCore::State)"},{"name":"value","external_name":"value","restriction":"Struct | Enum"}],"args_string":"(rb : Pointer(RbCore::State), value : Struct | Enum)","args_html":"(rb : Pointer(RbCore::State), value : Struct | Enum)","location":{"filename":"src/RbCast.cr","line_number":63,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbCast.cr#L63"},"def":{"name":"return_struct_or_enum","args":[{"name":"rb","external_name":"rb","restriction":"::Pointer(RbCore::State)"},{"name":"value","external_name":"value","restriction":"Struct | Enum"}],"visibility":"Public","body":"ruby_class = RbClassCache.get(value.class)\ndestructor = RbTypeCache.destructor_method(typeof(value))\nptr = Pointer(Anyolite::StructWrapper(typeof(value))).malloc(size: 1, value: StructWrapper(typeof(value)).new(value))\nnew_ruby_object = RbCore.new_empty_object(rb, ruby_class, ptr.as(::Pointer(Void)), RbTypeCache.register(value.class, destructor))\nRbRefTable.add(RbRefTable.get_object_id(ptr.value), ptr.as(::Pointer(Void)), new_ruby_object)\nreturn new_ruby_object\n"}},{"html_id":"return_symbol(rb:Pointer(RbCore::State),value)-class-method","name":"return_symbol","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":"::Pointer(RbCore::State)"},{"name":"value","external_name":"value","restriction":""}],"args_string":"(rb : Pointer(RbCore::State), value)","args_html":"(rb : Pointer(RbCore::State), value)","location":{"filename":"src/RbCast.cr","line_number":44,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbCast.cr#L44"},"def":{"name":"return_symbol","args":[{"name":"rb","external_name":"rb","restriction":"::Pointer(RbCore::State)"},{"name":"value","external_name":"value","restriction":""}],"visibility":"Public","body":"return RbCore.get_symbol_value_of_string(rb, value.to_s)"}},{"html_id":"return_true-class-method","name":"return_true","abstract":false,"location":{"filename":"src/RbCast.cr","line_number":10,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbCast.cr#L10"},"def":{"name":"return_true","visibility":"Public","body":"return RbCore.get_true_value"}},{"html_id":"return_value(rb:Pointer(RbCore::State),value:Object)-class-method","name":"return_value","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":"::Pointer(RbCore::State)"},{"name":"value","external_name":"value","restriction":"Object"}],"args_string":"(rb : Pointer(RbCore::State), value : Object)","args_html":"(rb : Pointer(RbCore::State), value : Object)","location":{"filename":"src/RbCast.cr","line_number":95,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbCast.cr#L95"},"def":{"name":"return_value","args":[{"name":"rb","external_name":"rb","restriction":"::Pointer(RbCore::State)"},{"name":"value","external_name":"value","restriction":"Object"}],"visibility":"Public","body":"if value.is_a?(Nil)\n  RbCast.return_nil\nelse\n  if value.is_a?(Bool)\n    value ? RbCast.return_true : RbCast.return_false\n  else\n    if value.is_a?(Int)\n      RbCast.return_fixnum(value)\n    else\n      if value.is_a?(Float)\n        RbCast.return_float(rb, value)\n      else\n        if value.is_a?(Char)\n          RbCast.return_string(rb, value.to_s)\n        else\n          if value.is_a?(String)\n            RbCast.return_string(rb, value)\n          else\n            if value.is_a?(Symbol)\n              RbCast.return_symbol(rb, value)\n            else\n              if value.is_a?(Array)\n                RbCast.return_array(rb, value)\n              else\n                if value.is_a?(Hash)\n                  RbCast.return_hash(rb, value)\n                else\n                  if value.is_a?(Pointer)\n                    RbCast.return_object(rb, HelperClasses::AnyolitePointer.new(value))\n                  else\n                    if value.is_a?(RbRef)\n                      value.to_unsafe\n                    else\n                      if value.is_a?(Struct) || value.is_a?(Enum)\n                        RbCast.return_struct_or_enum(rb, value)\n                      else\n                        RbCast.return_object(rb, value)\n                      end\n                    end\n                  end\n                end\n              end\n            end\n          end\n        end\n      end\n    end\n  end\nend"}}],"macros":[{"html_id":"check_custom_type(rb,value,crystal_type)-macro","name":"check_custom_type","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"value","external_name":"value","restriction":""},{"name":"crystal_type","external_name":"crystal_type","restriction":""}],"args_string":"(rb, value, crystal_type)","args_html":"(rb, value, crystal_type)","location":{"filename":"src/RbCast.cr","line_number":249,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbCast.cr#L249"},"def":{"name":"check_custom_type","args":[{"name":"rb","external_name":"rb","restriction":""},{"name":"value","external_name":"value","restriction":""},{"name":"crystal_type","external_name":"crystal_type","restriction":""}],"visibility":"Public","body":"      Anyolite::RbCore.rb_obj_is_kind_of(\n{{ rb }}\n, \n{{ value }}\n, Anyolite::RbClassCache.get(\n{{ crystal_type }}\n)) != 0\n    \n"}}]},{"html_id":"anyolite/Anyolite/RbClass","path":"Anyolite/RbClass.html","kind":"class","full_name":"Anyolite::RbClass","name":"RbClass","abstract":false,"superclass":{"html_id":"anyolite/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"anyolite/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"anyolite/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/RbClass.cr","line_number":3,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbClass.cr#L3"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Reference to a mruby class","summary":"<p>Reference to a mruby class</p>","class_methods":[{"html_id":"get_from_ruby_name(rb:RbInterpreter,name:String,under:RbModule|RbClass|Nil=nil)-class-method","name":"get_from_ruby_name","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":"RbInterpreter"},{"name":"name","external_name":"name","restriction":"String"},{"name":"under","default_value":"nil","external_name":"under","restriction":"RbModule | RbClass | Nil"}],"args_string":"(rb : RbInterpreter, name : String, under : RbModule | RbClass | Nil = nil)","args_html":"(rb : <a href=\"../Anyolite/RbInterpreter.html\">RbInterpreter</a>, name : String, under : <a href=\"../Anyolite/RbModule.html\">RbModule</a> | <a href=\"../Anyolite/RbClass.html\">RbClass</a> | Nil = <span class=\"n\">nil</span>)","location":{"filename":"src/RbClass.cr","line_number":24,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbClass.cr#L24"},"def":{"name":"get_from_ruby_name","args":[{"name":"rb","external_name":"rb","restriction":"RbInterpreter"},{"name":"name","external_name":"name","restriction":"String"},{"name":"under","default_value":"nil","external_name":"under","restriction":"RbModule | RbClass | Nil"}],"visibility":"Public","body":"if under\n  available = ((RbCore.rb_class_defined_under(rb, under, name)) != 0)\nelse\n  available = ((RbCore.rb_class_defined(rb, name)) != 0)\nend\nif !available\n  return nil\nend\nif under\n  ruby_class = RbCore.rb_class_get_under(rb, under, name)\nelse\n  ruby_class = RbCore.rb_class_get(rb, name)\nend\nif ruby_class\n  self.new(rb, ruby_class, under)\nend\n"}}],"constructors":[{"html_id":"new(rb:RbInterpreter,name:String,superclass:RbModule|RbClass|Nil=nil,under:RbModule|RbClass|Nil=nil)-class-method","name":"new","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":"RbInterpreter"},{"name":"name","external_name":"name","restriction":"String"},{"name":"superclass","default_value":"nil","external_name":"superclass","restriction":"RbModule | RbClass | Nil"},{"name":"under","default_value":"nil","external_name":"under","restriction":"RbModule | RbClass | Nil"}],"args_string":"(rb : RbInterpreter, name : String, superclass : RbModule | RbClass | Nil = nil, under : RbModule | RbClass | Nil = nil)","args_html":"(rb : <a href=\"../Anyolite/RbInterpreter.html\">RbInterpreter</a>, name : String, superclass : <a href=\"../Anyolite/RbModule.html\">RbModule</a> | <a href=\"../Anyolite/RbClass.html\">RbClass</a> | Nil = <span class=\"n\">nil</span>, under : <a href=\"../Anyolite/RbModule.html\">RbModule</a> | <a href=\"../Anyolite/RbClass.html\">RbClass</a> | Nil = <span class=\"n\">nil</span>)","location":{"filename":"src/RbClass.cr","line_number":6,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbClass.cr#L6"},"def":{"name":"new","args":[{"name":"rb","external_name":"rb","restriction":"RbInterpreter"},{"name":"name","external_name":"name","restriction":"String"},{"name":"superclass","default_value":"nil","external_name":"superclass","restriction":"RbModule | RbClass | Nil"},{"name":"under","default_value":"nil","external_name":"under","restriction":"RbModule | RbClass | Nil"}],"visibility":"Public","body":"_ = allocate\n_.initialize(rb, name, superclass, under)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"html_id":"new(rb:RbInterpreter,class_ptr:RbCore::RClassPtr,under:RbModule|RbClass|Nil=nil)-class-method","name":"new","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":"RbInterpreter"},{"name":"class_ptr","external_name":"class_ptr","restriction":"RbCore::RClassPtr"},{"name":"under","default_value":"nil","external_name":"under","restriction":"RbModule | RbClass | Nil"}],"args_string":"(rb : RbInterpreter, class_ptr : RbCore::RClassPtr, under : RbModule | RbClass | Nil = nil)","args_html":"(rb : <a href=\"../Anyolite/RbInterpreter.html\">RbInterpreter</a>, class_ptr : RbCore::RClassPtr, under : <a href=\"../Anyolite/RbModule.html\">RbModule</a> | <a href=\"../Anyolite/RbClass.html\">RbClass</a> | Nil = <span class=\"n\">nil</span>)","location":{"filename":"src/RbClass.cr","line_number":20,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbClass.cr#L20"},"def":{"name":"new","args":[{"name":"rb","external_name":"rb","restriction":"RbInterpreter"},{"name":"class_ptr","external_name":"class_ptr","restriction":"RbCore::RClassPtr"},{"name":"under","default_value":"nil","external_name":"under","restriction":"RbModule | RbClass | Nil"}],"visibility":"Public","body":"_ = allocate\n_.initialize(rb, class_ptr, under)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"to_rb_obj-instance-method","name":"to_rb_obj","abstract":false,"location":{"filename":"src/RbClass.cr","line_number":42,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbClass.cr#L42"},"def":{"name":"to_rb_obj","visibility":"Public","body":"RbCore.get_rb_obj_value(@class_ptr)"}},{"html_id":"to_unsafe-instance-method","name":"to_unsafe","abstract":false,"location":{"filename":"src/RbClass.cr","line_number":46,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbClass.cr#L46"},"def":{"name":"to_unsafe","visibility":"Public","body":"return @class_ptr"}}]},{"html_id":"anyolite/Anyolite/RbClassCache","path":"Anyolite/RbClassCache.html","kind":"module","full_name":"Anyolite::RbClassCache","name":"RbClassCache","abstract":false,"locations":[{"filename":"src/RbClassCache.cr","line_number":3,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbClassCache.cr#L3"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Cache for mruby class and module references","summary":"<p>Cache for mruby class and module references</p>","class_methods":[{"html_id":"check(crystal_class:Class|RbModule|Nil)-class-method","name":"check","abstract":false,"args":[{"name":"crystal_class","external_name":"crystal_class","restriction":"Class | RbModule | Nil"}],"args_string":"(crystal_class : Class | RbModule | Nil)","args_html":"(crystal_class : Class | <a href=\"../Anyolite/RbModule.html\">RbModule</a> | Nil)","location":{"filename":"src/RbClassCache.cr","line_number":30,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbClassCache.cr#L30"},"def":{"name":"check","args":[{"name":"crystal_class","external_name":"crystal_class","restriction":"Class | RbModule | Nil"}],"visibility":"Public","body":"if crystal_class.is_a?(Class)\n  @@cache[crystal_class.name]?\nelse\n  crystal_class\nend"}},{"html_id":"get(n:Nil)-class-method","name":"get","abstract":false,"args":[{"name":"n","external_name":"n","restriction":"Nil"}],"args_string":"(n : Nil)","args_html":"(n : Nil)","location":{"filename":"src/RbClassCache.cr","line_number":14,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbClassCache.cr#L14"},"def":{"name":"get","args":[{"name":"n","external_name":"n","restriction":"Nil"}],"visibility":"Public","body":"nil"}},{"html_id":"get(crystal_class:Class)-class-method","name":"get","abstract":false,"args":[{"name":"crystal_class","external_name":"crystal_class","restriction":"Class"}],"args_string":"(crystal_class : Class)","args_html":"(crystal_class : Class)","location":{"filename":"src/RbClassCache.cr","line_number":22,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbClassCache.cr#L22"},"def":{"name":"get","args":[{"name":"crystal_class","external_name":"crystal_class","restriction":"Class"}],"visibility":"Public","body":"if @@cache[crystal_class.name]?\n  return @@cache[crystal_class.name]\nelse\n  raise(\"Uncached class or module: #{crystal_class}\")\nend"}},{"html_id":"get(ruby_module:RbModule)-class-method","name":"get","abstract":false,"args":[{"name":"ruby_module","external_name":"ruby_module","restriction":"RbModule"}],"args_string":"(ruby_module : RbModule)","args_html":"(ruby_module : <a href=\"../Anyolite/RbModule.html\">RbModule</a>)","location":{"filename":"src/RbClassCache.cr","line_number":18,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbClassCache.cr#L18"},"def":{"name":"get","args":[{"name":"ruby_module","external_name":"ruby_module","restriction":"RbModule"}],"visibility":"Public","body":"ruby_module"}},{"html_id":"register(crystal_class:Class,rb_class:RbClass)-class-method","name":"register","abstract":false,"args":[{"name":"crystal_class","external_name":"crystal_class","restriction":"Class"},{"name":"rb_class","external_name":"rb_class","restriction":"RbClass"}],"args_string":"(crystal_class : Class, rb_class : RbClass)","args_html":"(crystal_class : Class, rb_class : <a href=\"../Anyolite/RbClass.html\">RbClass</a>)","location":{"filename":"src/RbClassCache.cr","line_number":6,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbClassCache.cr#L6"},"def":{"name":"register","args":[{"name":"crystal_class","external_name":"crystal_class","restriction":"Class"},{"name":"rb_class","external_name":"rb_class","restriction":"RbClass"}],"visibility":"Public","body":"@@cache[crystal_class.name] = rb_class"}},{"html_id":"register(crystal_module:Class,rb_module:RbModule)-class-method","name":"register","abstract":false,"args":[{"name":"crystal_module","external_name":"crystal_module","restriction":"Class"},{"name":"rb_module","external_name":"rb_module","restriction":"RbModule"}],"args_string":"(crystal_module : Class, rb_module : RbModule)","args_html":"(crystal_module : Class, rb_module : <a href=\"../Anyolite/RbModule.html\">RbModule</a>)","location":{"filename":"src/RbClassCache.cr","line_number":10,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbClassCache.cr#L10"},"def":{"name":"register","args":[{"name":"crystal_module","external_name":"crystal_module","restriction":"Class"},{"name":"rb_module","external_name":"rb_module","restriction":"RbModule"}],"visibility":"Public","body":"@@cache[crystal_module.name] = rb_module"}},{"html_id":"reset-class-method","name":"reset","abstract":false,"location":{"filename":"src/RbClassCache.cr","line_number":38,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbClassCache.cr#L38"},"def":{"name":"reset","visibility":"Public","body":"@@cache.clear"}}]},{"html_id":"anyolite/Anyolite/RbInterpreter","path":"Anyolite/RbInterpreter.html","kind":"class","full_name":"Anyolite::RbInterpreter","name":"RbInterpreter","abstract":false,"superclass":{"html_id":"anyolite/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"anyolite/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"anyolite/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/RbInterpreter.cr","line_number":4,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbInterpreter.cr#L4"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Wrapper for an mruby state reference\nNOTE: Do not create more than one at a time!","summary":"<p>Wrapper for an mruby state reference NOTE: Do not create more than one at a time!</p>","class_methods":[{"html_id":"create(&)-class-method","name":"create","abstract":false,"location":{"filename":"src/RbInterpreter.cr","line_number":7,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbInterpreter.cr#L7"},"def":{"name":"create","yields":1,"visibility":"Public","body":"rb = self.new\nAnyolite::HelperClasses.load_all(rb)\nyield rb\nrb.close\n"}}],"constructors":[{"html_id":"new-class-method","name":"new","abstract":false,"location":{"filename":"src/RbInterpreter.cr","line_number":16,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbInterpreter.cr#L16"},"def":{"name":"new","visibility":"Public","body":"_ = allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"close-instance-method","name":"close","abstract":false,"location":{"filename":"src/RbInterpreter.cr","line_number":21,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbInterpreter.cr#L21"},"def":{"name":"close","visibility":"Public","body":"RbCore.rb_close(@rb_ptr)\nRbRefTable.reset\nRbTypeCache.reset\nRbClassCache.reset\n"}},{"html_id":"define_class_method(name:String,c:RbClass|RbModule,proc:RbCore::RbFunc)-instance-method","name":"define_class_method","abstract":false,"args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"c","external_name":"c","restriction":"RbClass | RbModule"},{"name":"proc","external_name":"proc","restriction":"RbCore::RbFunc"}],"args_string":"(name : String, c : RbClass | RbModule, proc : RbCore::RbFunc)","args_html":"(name : String, c : <a href=\"../Anyolite/RbClass.html\">RbClass</a> | <a href=\"../Anyolite/RbModule.html\">RbModule</a>, proc : RbCore::RbFunc)","location":{"filename":"src/RbInterpreter.cr","line_number":65,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbInterpreter.cr#L65"},"def":{"name":"define_class_method","args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"c","external_name":"c","restriction":"RbClass | RbModule"},{"name":"proc","external_name":"proc","restriction":"RbCore::RbFunc"}],"visibility":"Public","body":"if c.is_a?(RbModule)\n  RbCore.rb_define_module_function(@rb_ptr, c, name, proc, 1)\nelse\n  RbCore.rb_define_class_method(@rb_ptr, c, name, proc, 1)\nend"}},{"html_id":"define_method(name:String,c:RbClass|RbModule,proc:RbCore::RbFunc)-instance-method","name":"define_method","doc":"TODO: Use internal mruby arg count in future versions","summary":"<p><span class=\"flag orange\">TODO</span>  Use internal mruby arg count in future versions</p>","abstract":false,"args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"c","external_name":"c","restriction":"RbClass | RbModule"},{"name":"proc","external_name":"proc","restriction":"RbCore::RbFunc"}],"args_string":"(name : String, c : RbClass | RbModule, proc : RbCore::RbFunc)","args_html":"(name : String, c : <a href=\"../Anyolite/RbClass.html\">RbClass</a> | <a href=\"../Anyolite/RbModule.html\">RbModule</a>, proc : RbCore::RbFunc)","location":{"filename":"src/RbInterpreter.cr","line_number":49,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbInterpreter.cr#L49"},"def":{"name":"define_method","args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"c","external_name":"c","restriction":"RbClass | RbModule"},{"name":"proc","external_name":"proc","restriction":"RbCore::RbFunc"}],"visibility":"Public","body":"if c.is_a?(RbModule)\n  raise(\"Tried to define method #{name} for RbModule #{c}\")\nelse\n  RbCore.rb_define_method(@rb_ptr, c, name, proc, 1)\nend"}},{"html_id":"define_module_function(name:String,mod:RbModule|RbClass,proc:RbCore::RbFunc)-instance-method","name":"define_module_function","abstract":false,"args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"mod","external_name":"mod","restriction":"RbModule | RbClass"},{"name":"proc","external_name":"proc","restriction":"RbCore::RbFunc"}],"args_string":"(name : String, mod : RbModule | RbClass, proc : RbCore::RbFunc)","args_html":"(name : String, mod : <a href=\"../Anyolite/RbModule.html\">RbModule</a> | <a href=\"../Anyolite/RbClass.html\">RbClass</a>, proc : RbCore::RbFunc)","location":{"filename":"src/RbInterpreter.cr","line_number":57,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbInterpreter.cr#L57"},"def":{"name":"define_module_function","args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"mod","external_name":"mod","restriction":"RbModule | RbClass"},{"name":"proc","external_name":"proc","restriction":"RbCore::RbFunc"}],"visibility":"Public","body":"if mod.is_a?(RbModule)\n  RbCore.rb_define_module_function(@rb_ptr, mod, name, proc, 1)\nelse\n  RbCore.rb_define_class_method(@rb_ptr, mod, name, proc, 1)\nend"}},{"html_id":"execute_bytecode(bytecode:Array(UInt8))-instance-method","name":"execute_bytecode","abstract":false,"args":[{"name":"bytecode","external_name":"bytecode","restriction":"Array(UInt8)"}],"args_string":"(bytecode : Array(UInt8))","args_html":"(bytecode : Array(UInt8))","location":{"filename":"src/RbInterpreter.cr","line_number":40,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbInterpreter.cr#L40"},"def":{"name":"execute_bytecode","args":[{"name":"bytecode","external_name":"bytecode","restriction":"Array(UInt8)"}],"visibility":"Public","body":"RbCore.execute_bytecode(@rb_ptr, bytecode)"}},{"html_id":"execute_script_line(str:String)-instance-method","name":"execute_script_line","abstract":false,"args":[{"name":"str","external_name":"str","restriction":"String"}],"args_string":"(str : String)","args_html":"(str : String)","location":{"filename":"src/RbInterpreter.cr","line_number":32,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbInterpreter.cr#L32"},"def":{"name":"execute_script_line","args":[{"name":"str","external_name":"str","restriction":"String"}],"visibility":"Public","body":"RbCore.execute_script_line(@rb_ptr, str)"}},{"html_id":"load_bytecode_from_file(filename:String)-instance-method","name":"load_bytecode_from_file","abstract":false,"args":[{"name":"filename","external_name":"filename","restriction":"String"}],"args_string":"(filename : String)","args_html":"(filename : String)","location":{"filename":"src/RbInterpreter.cr","line_number":44,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbInterpreter.cr#L44"},"def":{"name":"load_bytecode_from_file","args":[{"name":"filename","external_name":"filename","restriction":"String"}],"visibility":"Public","body":"RbCore.load_bytecode_from_file(@rb_ptr, filename)"}},{"html_id":"load_script_from_file(filename:String)-instance-method","name":"load_script_from_file","abstract":false,"args":[{"name":"filename","external_name":"filename","restriction":"String"}],"args_string":"(filename : String)","args_html":"(filename : String)","location":{"filename":"src/RbInterpreter.cr","line_number":36,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbInterpreter.cr#L36"},"def":{"name":"load_script_from_file","args":[{"name":"filename","external_name":"filename","restriction":"String"}],"visibility":"Public","body":"RbCore.load_script_from_file(@rb_ptr, filename)"}},{"html_id":"to_unsafe-instance-method","name":"to_unsafe","abstract":false,"location":{"filename":"src/RbInterpreter.cr","line_number":28,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbInterpreter.cr#L28"},"def":{"name":"to_unsafe","visibility":"Public","body":"return @rb_ptr"}}]},{"html_id":"anyolite/Anyolite/RbModule","path":"Anyolite/RbModule.html","kind":"class","full_name":"Anyolite::RbModule","name":"RbModule","abstract":false,"superclass":{"html_id":"anyolite/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"anyolite/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"anyolite/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/RbModule.cr","line_number":3,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbModule.cr#L3"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Reference to a mruby module","summary":"<p>Reference to a mruby module</p>","class_methods":[{"html_id":"get_from_ruby_name(rb:RbInterpreter,name:String,under:RbModule|RbClass|Nil=nil)-class-method","name":"get_from_ruby_name","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":"RbInterpreter"},{"name":"name","external_name":"name","restriction":"String"},{"name":"under","default_value":"nil","external_name":"under","restriction":"RbModule | RbClass | Nil"}],"args_string":"(rb : RbInterpreter, name : String, under : RbModule | RbClass | Nil = nil)","args_html":"(rb : <a href=\"../Anyolite/RbInterpreter.html\">RbInterpreter</a>, name : String, under : <a href=\"../Anyolite/RbModule.html\">RbModule</a> | <a href=\"../Anyolite/RbClass.html\">RbClass</a> | Nil = <span class=\"n\">nil</span>)","location":{"filename":"src/RbModule.cr","line_number":18,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbModule.cr#L18"},"def":{"name":"get_from_ruby_name","args":[{"name":"rb","external_name":"rb","restriction":"RbInterpreter"},{"name":"name","external_name":"name","restriction":"String"},{"name":"under","default_value":"nil","external_name":"under","restriction":"RbModule | RbClass | Nil"}],"visibility":"Public","body":"if under\n  available = ((RbCore.rb_module_defined_under(rb, under, name)) != 0)\nelse\n  available = ((RbCore.rb_module_defined(rb, name)) != 0)\nend\nif !available\n  return nil\nend\nif under\n  ruby_module = RbCore.rb_module_get_under(rb, under, name)\nelse\n  ruby_module = RbCore.rb_module_get(rb, name)\nend\nif ruby_module\n  self.new(rb, ruby_module, under)\nend\n"}}],"constructors":[{"html_id":"new(rb:RbInterpreter,name:String,under:RbModule|RbClass|Nil=nil)-class-method","name":"new","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":"RbInterpreter"},{"name":"name","external_name":"name","restriction":"String"},{"name":"under","default_value":"nil","external_name":"under","restriction":"RbModule | RbClass | Nil"}],"args_string":"(rb : RbInterpreter, name : String, under : RbModule | RbClass | Nil = nil)","args_html":"(rb : <a href=\"../Anyolite/RbInterpreter.html\">RbInterpreter</a>, name : String, under : <a href=\"../Anyolite/RbModule.html\">RbModule</a> | <a href=\"../Anyolite/RbClass.html\">RbClass</a> | Nil = <span class=\"n\">nil</span>)","location":{"filename":"src/RbModule.cr","line_number":6,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbModule.cr#L6"},"def":{"name":"new","args":[{"name":"rb","external_name":"rb","restriction":"RbInterpreter"},{"name":"name","external_name":"name","restriction":"String"},{"name":"under","default_value":"nil","external_name":"under","restriction":"RbModule | RbClass | Nil"}],"visibility":"Public","body":"_ = allocate\n_.initialize(rb, name, under)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"html_id":"new(rb:RbInterpreter,module_ptr:RbCore::RClassPtr,under:RbModule|RbClass|Nil=nil)-class-method","name":"new","abstract":false,"args":[{"name":"rb","external_name":"rb","restriction":"RbInterpreter"},{"name":"module_ptr","external_name":"module_ptr","restriction":"RbCore::RClassPtr"},{"name":"under","default_value":"nil","external_name":"under","restriction":"RbModule | RbClass | Nil"}],"args_string":"(rb : RbInterpreter, module_ptr : RbCore::RClassPtr, under : RbModule | RbClass | Nil = nil)","args_html":"(rb : <a href=\"../Anyolite/RbInterpreter.html\">RbInterpreter</a>, module_ptr : RbCore::RClassPtr, under : <a href=\"../Anyolite/RbModule.html\">RbModule</a> | <a href=\"../Anyolite/RbClass.html\">RbClass</a> | Nil = <span class=\"n\">nil</span>)","location":{"filename":"src/RbModule.cr","line_number":14,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbModule.cr#L14"},"def":{"name":"new","args":[{"name":"rb","external_name":"rb","restriction":"RbInterpreter"},{"name":"module_ptr","external_name":"module_ptr","restriction":"RbCore::RClassPtr"},{"name":"under","default_value":"nil","external_name":"under","restriction":"RbModule | RbClass | Nil"}],"visibility":"Public","body":"_ = allocate\n_.initialize(rb, module_ptr, under)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"to_rb_obj-instance-method","name":"to_rb_obj","abstract":false,"location":{"filename":"src/RbModule.cr","line_number":38,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbModule.cr#L38"},"def":{"name":"to_rb_obj","visibility":"Public","body":"RbCore.get_rb_obj_value(@class_ptr)"}},{"html_id":"to_unsafe-instance-method","name":"to_unsafe","abstract":false,"location":{"filename":"src/RbModule.cr","line_number":42,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbModule.cr#L42"},"def":{"name":"to_unsafe","visibility":"Public","body":"return @module_ptr"}}]},{"html_id":"anyolite/Anyolite/RbRef","path":"Anyolite/RbRef.html","kind":"class","full_name":"Anyolite::RbRef","name":"RbRef","abstract":false,"superclass":{"html_id":"anyolite/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"anyolite/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"anyolite/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/Main.cr","line_number":54,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L54"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Class to contain Ruby values in a GC-protected container","summary":"<p>Class to contain Ruby values in a GC-protected container</p>","constructors":[{"html_id":"new(value:RbCore::RbValue)-class-method","name":"new","doc":"Create a new container with *value* as content","summary":"<p>Create a new container with <em>value</em> as content</p>","abstract":false,"args":[{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"args_string":"(value : RbCore::RbValue)","args_html":"(value : RbCore::RbValue)","location":{"filename":"src/Main.cr","line_number":58,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L58"},"def":{"name":"new","args":[{"name":"value","external_name":"value","restriction":"RbCore::RbValue"}],"visibility":"Public","body":"_ = allocate\n_.initialize(value)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"is_array?-instance-method","name":"is_array?","doc":"Return `true` if the value is a Ruby array, otherwise `false`","summary":"<p>Return <code>true</code> if the value is a Ruby array, otherwise <code>false</code></p>","abstract":false,"location":{"filename":"src/Main.cr","line_number":104,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L104"},"def":{"name":"is_array?","visibility":"Public","body":"RbCast.check_for_array(@value)"}},{"html_id":"is_bool?-instance-method","name":"is_bool?","doc":"Return `true` if the value is a Ruby bool, otherwise `false`","summary":"<p>Return <code>true</code> if the value is a Ruby bool, otherwise <code>false</code></p>","abstract":false,"location":{"filename":"src/Main.cr","line_number":74,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L74"},"def":{"name":"is_bool?","visibility":"Public","body":"RbCast.check_for_bool(@value)"}},{"html_id":"is_custom?(class_name)-instance-method","name":"is_custom?","doc":"Return `true` if the value is a wrapped object of class *class_name*, otherwise `false`","summary":"<p>Return <code>true</code> if the value is a wrapped object of class <em>class_name</em>, otherwise <code>false</code></p>","abstract":false,"args":[{"name":"class_name","external_name":"class_name","restriction":""}],"args_string":"(class_name)","args_html":"(class_name)","location":{"filename":"src/Main.cr","line_number":119,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L119"},"def":{"name":"is_custom?","args":[{"name":"class_name","external_name":"class_name","restriction":""}],"visibility":"Public","body":"RbCast.check_custom_type(RbRefTable.get_current_interpreter, value, class_name)"}},{"html_id":"is_custom?-instance-method","name":"is_custom?","doc":"Return `true` if the value is a wrapped objects, otherwise `false`","summary":"<p>Return <code>true</code> if the value is a wrapped objects, otherwise <code>false</code></p>","abstract":false,"location":{"filename":"src/Main.cr","line_number":114,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L114"},"def":{"name":"is_custom?","visibility":"Public","body":"RbCast.check_for_data(@value)"}},{"html_id":"is_fixnum?-instance-method","name":"is_fixnum?","doc":"Return `true` if the value is a Ruby fixnum, otherwise `false`","summary":"<p>Return <code>true</code> if the value is a Ruby fixnum, otherwise <code>false</code></p>","abstract":false,"location":{"filename":"src/Main.cr","line_number":84,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L84"},"def":{"name":"is_fixnum?","visibility":"Public","body":"RbCast.check_for_fixnum(@value)"}},{"html_id":"is_float?-instance-method","name":"is_float?","doc":"Return `true` if the value is a Ruby float, otherwise `false`","summary":"<p>Return <code>true</code> if the value is a Ruby float, otherwise <code>false</code></p>","abstract":false,"location":{"filename":"src/Main.cr","line_number":89,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L89"},"def":{"name":"is_float?","visibility":"Public","body":"RbCast.check_for_float(@value)"}},{"html_id":"is_hash?-instance-method","name":"is_hash?","doc":"Return `true` if the value is a Ruby hash, otherwise `false`","summary":"<p>Return <code>true</code> if the value is a Ruby hash, otherwise <code>false</code></p>","abstract":false,"location":{"filename":"src/Main.cr","line_number":109,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L109"},"def":{"name":"is_hash?","visibility":"Public","body":"RbCast.check_for_hash(@value)"}},{"html_id":"is_nil?-instance-method","name":"is_nil?","doc":"Return `true` if the value is a Ruby nil, otherwise `false`","summary":"<p>Return <code>true</code> if the value is a Ruby nil, otherwise <code>false</code></p>","abstract":false,"location":{"filename":"src/Main.cr","line_number":79,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L79"},"def":{"name":"is_nil?","visibility":"Public","body":"RbCast.check_for_nil(@value)"}},{"html_id":"is_string?-instance-method","name":"is_string?","doc":"Return `true` if the value is a Ruby string, otherwise `false`","summary":"<p>Return <code>true</code> if the value is a Ruby string, otherwise <code>false</code></p>","abstract":false,"location":{"filename":"src/Main.cr","line_number":94,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L94"},"def":{"name":"is_string?","visibility":"Public","body":"RbCast.check_for_string(@value)"}},{"html_id":"is_symbol?-instance-method","name":"is_symbol?","doc":"Return `true` if the value is a Ruby symbol, otherwise `false`","summary":"<p>Return <code>true</code> if the value is a Ruby symbol, otherwise <code>false</code></p>","abstract":false,"location":{"filename":"src/Main.cr","line_number":99,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L99"},"def":{"name":"is_symbol?","visibility":"Public","body":"RbCast.check_for_symbol(@value)"}},{"html_id":"is_undef?-instance-method","name":"is_undef?","doc":"Return `true` if the value is undefined, otherwise `false`","summary":"<p>Return <code>true</code> if the value is undefined, otherwise <code>false</code></p>","abstract":false,"location":{"filename":"src/Main.cr","line_number":69,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L69"},"def":{"name":"is_undef?","visibility":"Public","body":"RbCast.check_for_undef(@value)"}},{"html_id":"value:Anyolite::RbCore::RbValue-instance-method","name":"value","doc":"Return the contained value","summary":"<p>Return the contained value</p>","abstract":false,"location":{"filename":"src/Main.cr","line_number":64,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L64"},"def":{"name":"value","visibility":"Public","body":"@value"}}]},{"html_id":"anyolite/Anyolite/RbRefTable","path":"Anyolite/RbRefTable.html","kind":"module","full_name":"Anyolite::RbRefTable","name":"RbRefTable","abstract":false,"locations":[{"filename":"src/RbRefTable.cr","line_number":8,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbRefTable.cr#L8"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"This is a very simple approach to generate artificial references to the wrapped objects.\nTherefore, the GC won't delete the wrapped objects until necessary.\nFurthermore, this is only possible as a module due to C closure limitations.\n\nTODO: Add compilation option for ignoring entry checks\nTODO: Put the hash value union into a struct","summary":"<p>This is a very simple approach to generate artificial references to the wrapped objects.</p>","class_methods":[{"html_id":"add(identification,value,rb_value)-class-method","name":"add","abstract":false,"args":[{"name":"identification","external_name":"identification","restriction":""},{"name":"value","external_name":"value","restriction":""},{"name":"rb_value","external_name":"rb_value","restriction":""}],"args_string":"(identification, value, rb_value)","args_html":"(identification, value, rb_value)","location":{"filename":"src/RbRefTable.cr","line_number":60,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbRefTable.cr#L60"},"def":{"name":"add","args":[{"name":"identification","external_name":"identification","restriction":""},{"name":"value","external_name":"value","restriction":""},{"name":"rb_value","external_name":"rb_value","restriction":""}],"visibility":"Public","body":"if option_active?(:logging)\n  puts(\"> Added reference #{identification} -> #{value}\")\nend\nif @@content[identification]?\n  if value != @@content[identification][0]\n    if option_active?(:replace_conflicting_pointers)\n      if option_active?(:warnings)\n        puts(\"WARNING: Value #{identification} replaced pointers (#{value} vs #{@@content[identification][0]}).\")\n      end\n      if option_active?(:pedantic)\n        raise(\"Corrupted reference table\")\n      end\n      @@content[identification] = {value, @@content[identification][1] + 1, rb_value}\n    else\n      if rb_value == @@content[identification][2]\n        @@content[identification] = {@@content[identification][0], @@content[identification][1] + 1, rb_value}\n      else\n        if option_active?(:warnings)\n          puts(\"WARNING: Ruby value for #{identification} got updated.\")\n        end\n        if option_active?(:pedantic)\n          raise(\"Corrupted reference table\")\n        end\n      end\n    end\n  else\n    @@content[identification] = {value, @@content[identification][1] + 1, rb_value}\n  end\nelse\n  @@content[identification] = {value, 1_i64, rb_value}\nend\n"}},{"html_id":"check_interpreter-class-method","name":"check_interpreter","abstract":false,"location":{"filename":"src/RbRefTable.cr","line_number":48,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbRefTable.cr#L48"},"def":{"name":"check_interpreter","visibility":"Public","body":"!(!@@current_interpreter)"}},{"html_id":"delete(identification)-class-method","name":"delete","abstract":false,"args":[{"name":"identification","external_name":"identification","restriction":""}],"args_string":"(identification)","args_html":"(identification)","location":{"filename":"src/RbRefTable.cr","line_number":85,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbRefTable.cr#L85"},"def":{"name":"delete","args":[{"name":"identification","external_name":"identification","restriction":""}],"visibility":"Public","body":"if option_active?(:logging)\n  puts(\"> Removed reference #{identification}\")\nend\nif @@content[identification]?\n  @@content.delete(identification)\nelse\n  if option_active?(:warnings)\n    puts(\"WARNING: Tried to remove unregistered object #{identification} from reference table.\")\n  end\n  if option_active?(:pedantic)\n    raise(\"Corrupted reference table\")\n  end\nend\nnil\n"}},{"html_id":"get(identification)-class-method","name":"get","abstract":false,"args":[{"name":"identification","external_name":"identification","restriction":""}],"args_string":"(identification)","args_html":"(identification)","location":{"filename":"src/RbRefTable.cr","line_number":27,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbRefTable.cr#L27"},"def":{"name":"get","args":[{"name":"identification","external_name":"identification","restriction":""}],"visibility":"Public","body":"return @@content[identification][0]"}},{"html_id":"get_current_interpreter:RbInterpreter-class-method","name":"get_current_interpreter","abstract":false,"location":{"filename":"src/RbRefTable.cr","line_number":52,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbRefTable.cr#L52"},"def":{"name":"get_current_interpreter","return_type":"RbInterpreter","visibility":"Public","body":"if c = @@current_interpreter\n  c\nelse\n  raise(\"No interpreter instance available.\")\nend"}},{"html_id":"get_object_id(value)-class-method","name":"get_object_id","doc":"TODO: If a struct wrapper is given here, call the struct methods instead of the wrapper methods","summary":"<p><span class=\"flag orange\">TODO</span>  If a struct wrapper is given here, call the struct methods instead of the wrapper methods</p>","abstract":false,"args":[{"name":"value","external_name":"value","restriction":""}],"args_string":"(value)","args_html":"(value)","location":{"filename":"src/RbRefTable.cr","line_number":119,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbRefTable.cr#L119"},"def":{"name":"get_object_id","args":[{"name":"value","external_name":"value","restriction":""}],"visibility":"Public","body":"if value.responds_to?(:rb_ref_id)\n  value.rb_ref_id.to_u64\nelse\n  if value.responds_to?(:object_id)\n    value.object_id.to_u64\n  else\n    value.hash.to_u64\n  end\nend"}},{"html_id":"get_rb_value(identification)-class-method","name":"get_rb_value","abstract":false,"args":[{"name":"identification","external_name":"identification","restriction":""}],"args_string":"(identification)","args_html":"(identification)","location":{"filename":"src/RbRefTable.cr","line_number":31,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbRefTable.cr#L31"},"def":{"name":"get_rb_value","args":[{"name":"identification","external_name":"identification","restriction":""}],"visibility":"Public","body":"if rb_value = @@content[identification][2]\n  return rb_value\nelse\n  raise(\"No ruby value given for object id #{identification}.\")\nend"}},{"html_id":"inspect-class-method","name":"inspect","abstract":false,"location":{"filename":"src/RbRefTable.cr","line_number":104,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbRefTable.cr#L104"},"def":{"name":"inspect","visibility":"Public","body":"@@content.inspect"}},{"html_id":"is_registered?(identification)-class-method","name":"is_registered?","abstract":false,"args":[{"name":"identification","external_name":"identification","restriction":""}],"args_string":"(identification)","args_html":"(identification)","location":{"filename":"src/RbRefTable.cr","line_number":96,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbRefTable.cr#L96"},"def":{"name":"is_registered?","args":[{"name":"identification","external_name":"identification","restriction":""}],"visibility":"Public","body":"return @@content[identification]?"}},{"html_id":"may_delete?(identification)-class-method","name":"may_delete?","abstract":false,"args":[{"name":"identification","external_name":"identification","restriction":""}],"args_string":"(identification)","args_html":"(identification)","location":{"filename":"src/RbRefTable.cr","line_number":100,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbRefTable.cr#L100"},"def":{"name":"may_delete?","args":[{"name":"identification","external_name":"identification","restriction":""}],"visibility":"Public","body":"@@content[identification][1] <= 1"}},{"html_id":"option_active?(symbol)-class-method","name":"option_active?","abstract":false,"args":[{"name":"symbol","external_name":"symbol","restriction":""}],"args_string":"(symbol)","args_html":"(symbol)","location":{"filename":"src/RbRefTable.cr","line_number":129,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbRefTable.cr#L129"},"def":{"name":"option_active?","args":[{"name":"symbol","external_name":"symbol","restriction":""}],"visibility":"Public","body":"if @@options[symbol]?\n  @@options[symbol]\nelse\n  false\nend"}},{"html_id":"reset-class-method","name":"reset","abstract":false,"location":{"filename":"src/RbRefTable.cr","line_number":108,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbRefTable.cr#L108"},"def":{"name":"reset","visibility":"Public","body":"if !@@content.empty?\n  if option_active?(:warnings)\n    puts(\"WARNING: Reference table is not empty (#{@@content.size} elements will be deleted).\")\n  end\n  if option_active?(:pedantic)\n    raise(\"Corrupted reference table\")\n  end\nend\n@@content.clear\n@@current_interpreter = nil\n"}},{"html_id":"set_current_interpreter(interpreter:RbInterpreter)-class-method","name":"set_current_interpreter","abstract":false,"args":[{"name":"interpreter","external_name":"interpreter","restriction":"RbInterpreter"}],"args_string":"(interpreter : RbInterpreter)","args_html":"(interpreter : <a href=\"../Anyolite/RbInterpreter.html\">RbInterpreter</a>)","location":{"filename":"src/RbRefTable.cr","line_number":39,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbRefTable.cr#L39"},"def":{"name":"set_current_interpreter","args":[{"name":"interpreter","external_name":"interpreter","restriction":"RbInterpreter"}],"visibility":"Public","body":"if @@current_interpreter\n  if option_active?(:warnings)\n    puts(\"WARNING: One interpreter was already registered and will be overwritten!\")\n  end\n  if option_active?(:pedantic)\n    raise(\"Current interpreter was overwritten.\")\n  end\nelse\n  @@current_interpreter = interpreter\nend"}},{"html_id":"set_option(symbol)-class-method","name":"set_option","abstract":false,"args":[{"name":"symbol","external_name":"symbol","restriction":""}],"args_string":"(symbol)","args_html":"(symbol)","location":{"filename":"src/RbRefTable.cr","line_number":137,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbRefTable.cr#L137"},"def":{"name":"set_option","args":[{"name":"symbol","external_name":"symbol","restriction":""}],"visibility":"Public","body":"@@options[symbol] = true"}},{"html_id":"unset_option(symbol)-class-method","name":"unset_option","abstract":false,"args":[{"name":"symbol","external_name":"symbol","restriction":""}],"args_string":"(symbol)","args_html":"(symbol)","location":{"filename":"src/RbRefTable.cr","line_number":141,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbRefTable.cr#L141"},"def":{"name":"unset_option","args":[{"name":"symbol","external_name":"symbol","restriction":""}],"visibility":"Public","body":"@@options[symbol] = false"}}]},{"html_id":"anyolite/Anyolite/RbTypeCache","path":"Anyolite/RbTypeCache.html","kind":"module","full_name":"Anyolite::RbTypeCache","name":"RbTypeCache","abstract":false,"locations":[{"filename":"src/RbTypeCache.cr","line_number":3,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbTypeCache.cr#L3"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Cache for mruby data types, holding the destructor methods","summary":"<p>Cache for mruby data types, holding the destructor methods</p>","class_methods":[{"html_id":"register(crystal_class:Class,destructor:RbCore::RbDataFunc)-class-method","name":"register","abstract":false,"args":[{"name":"crystal_class","external_name":"crystal_class","restriction":"Class"},{"name":"destructor","external_name":"destructor","restriction":"RbCore::RbDataFunc"}],"args_string":"(crystal_class : Class, destructor : RbCore::RbDataFunc)","args_html":"(crystal_class : Class, destructor : RbCore::RbDataFunc)","location":{"filename":"src/RbTypeCache.cr","line_number":6,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbTypeCache.cr#L6"},"def":{"name":"register","args":[{"name":"crystal_class","external_name":"crystal_class","restriction":"Class"},{"name":"destructor","external_name":"destructor","restriction":"RbCore::RbDataFunc"}],"visibility":"Public","body":"if @@cache[crystal_class.name]?\nelse\n  new_type = RbCore::RbDataType.new(struct_name: crystal_class.name, dfree: destructor)\n  @@cache[crystal_class.name] = Pointer(RbCore::RbDataType).malloc(size: 1, value: new_type)\nend\nreturn @@cache[crystal_class.name]\n"}},{"html_id":"register_custom_destructor(crystal_class:Class,destructor:RbCore::RbDataFunc)-class-method","name":"register_custom_destructor","abstract":false,"args":[{"name":"crystal_class","external_name":"crystal_class","restriction":"Class"},{"name":"destructor","external_name":"destructor","restriction":"RbCore::RbDataFunc"}],"args_string":"(crystal_class : Class, destructor : RbCore::RbDataFunc)","args_html":"(crystal_class : Class, destructor : RbCore::RbDataFunc)","location":{"filename":"src/RbTypeCache.cr","line_number":14,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbTypeCache.cr#L14"},"def":{"name":"register_custom_destructor","args":[{"name":"crystal_class","external_name":"crystal_class","restriction":"Class"},{"name":"destructor","external_name":"destructor","restriction":"RbCore::RbDataFunc"}],"visibility":"Public","body":"new_type = RbCore::RbDataType.new(struct_name: crystal_class.name, dfree: destructor)\nPointer(RbCore::RbDataType).malloc(size: 1, value: new_type)\n"}},{"html_id":"reset-class-method","name":"reset","abstract":false,"location":{"filename":"src/RbTypeCache.cr","line_number":47,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbTypeCache.cr#L47"},"def":{"name":"reset","visibility":"Public","body":"@@cache.clear"}}],"macros":[{"html_id":"destructor_method(crystal_class)-macro","name":"destructor_method","abstract":false,"args":[{"name":"crystal_class","external_name":"crystal_class","restriction":""}],"args_string":"(crystal_class)","args_html":"(crystal_class)","location":{"filename":"src/RbTypeCache.cr","line_number":19,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/RbTypeCache.cr#L19"},"def":{"name":"destructor_method","args":[{"name":"crystal_class","external_name":"crystal_class","restriction":""}],"visibility":"Public","body":"      Anyolite::Macro.new_rb_data_func do\n        if \n{{ crystal_class }}\n <= Struct || \n{{ crystal_class }}\n <= Enum\n          \n%crystal_ptr\n = __ptr.as(Anyolite::StructWrapper(\n{{ crystal_class }}\n)*)\n          \n%obj_id\n = Anyolite::RbRefTable.get_object_id(\n%crystal_ptr\n.value)\n\n          \n# Call optional mruby callback\n\n          if (\n%crystal_value\n = \n%crystal_ptr\n.value.content).responds_to?(:rb_finalize)\n            if Anyolite::RbRefTable.may_delete?(\n%obj_id\n)\n              \n%crystal_value\n.rb_finalize(__rb)\n            \nend\n          \nend\n        \nelse\n          \n%crystal_ptr\n = __ptr.as(\n{{ crystal_class }}\n*)\n          \n%obj_id\n = Anyolite::RbRefTable.get_object_id(\n%crystal_ptr\n.value)\n\n          if (\n%crystal_value\n = \n%crystal_ptr\n.value).responds_to?(:rb_finalize)\n            if Anyolite::RbRefTable.may_delete?(\n%obj_id\n)\n              \n%crystal_value\n.rb_finalize(__rb)\n            \nend\n          \nend\n        \nend\n\n        \n# Delete the Crystal reference to this object\n\n        Anyolite::RbRefTable.delete(\n%obj_id\n)\n      \nend\n    \n"}}]},{"html_id":"anyolite/Anyolite/Rename","path":"Anyolite/Rename.html","kind":"annotation","full_name":"Anyolite::Rename","name":"Rename","abstract":false,"locations":[{"filename":"src/Main.cr","line_number":848,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L848"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Renames the function to the first argument if wrapped.","summary":"<p>Renames the function to the first argument if wrapped.</p>"},{"html_id":"anyolite/Anyolite/RenameClass","path":"Anyolite/RenameClass.html","kind":"annotation","full_name":"Anyolite::RenameClass","name":"RenameClass","abstract":false,"locations":[{"filename":"src/Main.cr","line_number":863,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L863"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Renames the class to the first argument if wrapped.","summary":"<p>Renames the class to the first argument if wrapped.</p>"},{"html_id":"anyolite/Anyolite/RenameClassMethod","path":"Anyolite/RenameClassMethod.html","kind":"annotation","full_name":"Anyolite::RenameClassMethod","name":"RenameClassMethod","abstract":false,"locations":[{"filename":"src/Main.cr","line_number":856,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L856"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Renames the class method given as the first argument\nto the second argument if wrapped.","summary":"<p>Renames the class method given as the first argument to the second argument if wrapped.</p>"},{"html_id":"anyolite/Anyolite/RenameConstant","path":"Anyolite/RenameConstant.html","kind":"annotation","full_name":"Anyolite::RenameConstant","name":"RenameConstant","abstract":false,"locations":[{"filename":"src/Main.cr","line_number":860,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L860"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Renames the constant given as the first argument\nto the second argument if wrapped.","summary":"<p>Renames the constant given as the first argument to the second argument if wrapped.</p>"},{"html_id":"anyolite/Anyolite/RenameInstanceMethod","path":"Anyolite/RenameInstanceMethod.html","kind":"annotation","full_name":"Anyolite::RenameInstanceMethod","name":"RenameInstanceMethod","abstract":false,"locations":[{"filename":"src/Main.cr","line_number":852,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L852"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Renames the instane method given as the first argument\nto the second argument if wrapped.","summary":"<p>Renames the instane method given as the first argument to the second argument if wrapped.</p>"},{"html_id":"anyolite/Anyolite/RenameModule","path":"Anyolite/RenameModule.html","kind":"annotation","full_name":"Anyolite::RenameModule","name":"RenameModule","abstract":false,"locations":[{"filename":"src/Main.cr","line_number":866,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L866"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Renames the module to the first argument if wrapped.","summary":"<p>Renames the module to the first argument if wrapped.</p>"},{"html_id":"anyolite/Anyolite/ReturnNil","path":"Anyolite/ReturnNil.html","kind":"annotation","full_name":"Anyolite::ReturnNil","name":"ReturnNil","abstract":false,"locations":[{"filename":"src/Main.cr","line_number":886,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L886"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Lets the function always return `nil`.","summary":"<p>Lets the function always return <code>nil</code>.</p>"},{"html_id":"anyolite/Anyolite/ReturnNilClassMethod","path":"Anyolite/ReturnNilClassMethod.html","kind":"annotation","full_name":"Anyolite::ReturnNilClassMethod","name":"ReturnNilClassMethod","abstract":false,"locations":[{"filename":"src/Main.cr","line_number":892,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L892"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Lets the class method given as the first argument always return `nil`.","summary":"<p>Lets the class method given as the first argument always return <code>nil</code>.</p>"},{"html_id":"anyolite/Anyolite/ReturnNilInstanceMethod","path":"Anyolite/ReturnNilInstanceMethod.html","kind":"annotation","full_name":"Anyolite::ReturnNilInstanceMethod","name":"ReturnNilInstanceMethod","abstract":false,"locations":[{"filename":"src/Main.cr","line_number":889,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L889"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Lets the instance method given as the first argument always return `nil`.","summary":"<p>Lets the instance method given as the first argument always return <code>nil</code>.</p>"},{"html_id":"anyolite/Anyolite/Specialize","path":"Anyolite/Specialize.html","kind":"annotation","full_name":"Anyolite::Specialize","name":"Specialize","abstract":false,"locations":[{"filename":"src/Main.cr","line_number":835,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L835"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Excludes all definitions of this function besides this one from wrapping.\nThe optional first argument overwrites the original argument array.","summary":"<p>Excludes all definitions of this function besides this one from wrapping.</p>"},{"html_id":"anyolite/Anyolite/SpecializeClassMethod","path":"Anyolite/SpecializeClassMethod.html","kind":"annotation","full_name":"Anyolite::SpecializeClassMethod","name":"SpecializeClassMethod","abstract":false,"locations":[{"filename":"src/Main.cr","line_number":845,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L845"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Excludes all definitions of the class method given as the first argument\nbesides the one with the arguments given in the second argument (`nil` for none) from wrapping.\nThe optional third argument overwrites the original argument array.","summary":"<p>Excludes all definitions of the class method given as the first argument besides the one with the arguments given in the second argument (<code>nil</code> for none) from wrapping.</p>"},{"html_id":"anyolite/Anyolite/SpecializeInstanceMethod","path":"Anyolite/SpecializeInstanceMethod.html","kind":"annotation","full_name":"Anyolite::SpecializeInstanceMethod","name":"SpecializeInstanceMethod","abstract":false,"locations":[{"filename":"src/Main.cr","line_number":840,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L840"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Excludes all definitions of the instance method given as the first argument\nbesides the one with the arguments given in the second argument (`nil` for none) from wrapping.\nThe optional third argument overwrites the original argument array.","summary":"<p>Excludes all definitions of the instance method given as the first argument besides the one with the arguments given in the second argument (<code>nil</code> for none) from wrapping.</p>"},{"html_id":"anyolite/Anyolite/SpecifyGenericTypes","path":"Anyolite/SpecifyGenericTypes.html","kind":"annotation","full_name":"Anyolite::SpecifyGenericTypes","name":"SpecifyGenericTypes","abstract":false,"locations":[{"filename":"src/Main.cr","line_number":896,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L896"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Specifies the generic type names for the following class as its argument,\nin form of an `Array` of their names.","summary":"<p>Specifies the generic type names for the following class as its argument, in form of an <code>Array</code> of their names.</p>"},{"html_id":"anyolite/Anyolite/StoreBlockArg","path":"Anyolite/StoreBlockArg.html","kind":"annotation","full_name":"Anyolite::StoreBlockArg","name":"StoreBlockArg","abstract":false,"locations":[{"filename":"src/Main.cr","line_number":916,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L916"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Instructs the function to cache an incoming Ruby block argument if given.","summary":"<p>Instructs the function to cache an incoming Ruby block argument if given.</p>"},{"html_id":"anyolite/Anyolite/StoreBlockArgClassMethod","path":"Anyolite/StoreBlockArgClassMethod.html","kind":"annotation","full_name":"Anyolite::StoreBlockArgClassMethod","name":"StoreBlockArgClassMethod","abstract":false,"locations":[{"filename":"src/Main.cr","line_number":922,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L922"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Instructs the class method given as the first argument to cache an incoming Ruby block argument if given.","summary":"<p>Instructs the class method given as the first argument to cache an incoming Ruby block argument if given.</p>"},{"html_id":"anyolite/Anyolite/StoreBlockArgInstanceMethod","path":"Anyolite/StoreBlockArgInstanceMethod.html","kind":"annotation","full_name":"Anyolite::StoreBlockArgInstanceMethod","name":"StoreBlockArgInstanceMethod","abstract":false,"locations":[{"filename":"src/Main.cr","line_number":919,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L919"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Instructs the instance method given as the first argument to cache an incoming Ruby block argument if given.","summary":"<p>Instructs the instance method given as the first argument to cache an incoming Ruby block argument if given.</p>"},{"html_id":"anyolite/Anyolite/StructWrapper","path":"Anyolite/StructWrapper.html","kind":"class","full_name":"Anyolite::StructWrapper(T)","name":"StructWrapper","abstract":false,"superclass":{"html_id":"anyolite/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"anyolite/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"anyolite/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/Main.cr","line_number":32,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L32"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Internal class to hide the `Struct` *T* in a special class\nto obtain all class-related properties.","summary":"<p>Internal class to hide the <code>Struct</code> <em>T</em> in a special class to obtain all class-related properties.</p>","constructors":[{"html_id":"new(value)-class-method","name":"new","abstract":false,"args":[{"name":"value","external_name":"value","restriction":""}],"args_string":"(value)","args_html":"(value)","location":{"filename":"src/Main.cr","line_number":35,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L35"},"def":{"name":"new","args":[{"name":"value","external_name":"value","restriction":""}],"visibility":"Public","body":"_ = StructWrapper(T).allocate\n_.initialize(value)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"content:T-instance-method","name":"content","abstract":false,"location":{"filename":"src/Main.cr","line_number":39,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L39"},"def":{"name":"content","return_type":"T","visibility":"Public","body":"if c = @content\n  c\nelse\n  raise(\"Content of struct wrapper for #{T} is undefined!\")\nend"}},{"html_id":"content=(value)-instance-method","name":"content=","abstract":false,"args":[{"name":"value","external_name":"value","restriction":""}],"args_string":"(value)","args_html":"(value)","location":{"filename":"src/Main.cr","line_number":48,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L48"},"def":{"name":"content=","args":[{"name":"value","external_name":"value","restriction":""}],"visibility":"Public","body":"@content = value"}}]},{"html_id":"anyolite/Anyolite/Undefined","path":"Anyolite/Undefined.html","kind":"struct","full_name":"Anyolite::Undefined","name":"Undefined","abstract":false,"superclass":{"html_id":"anyolite/Struct","kind":"struct","full_name":"Struct","name":"Struct"},"ancestors":[{"html_id":"anyolite/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"anyolite/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"anyolite/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/Main.cr","line_number":17,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L17"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Special struct representing undefined values in mruby.","summary":"<p>Special struct representing undefined values in mruby.</p>"},{"html_id":"anyolite/Anyolite/WrapWithoutKeywords","path":"Anyolite/WrapWithoutKeywords.html","kind":"annotation","full_name":"Anyolite::WrapWithoutKeywords","name":"WrapWithoutKeywords","abstract":false,"locations":[{"filename":"src/Main.cr","line_number":871,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L871"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Wraps all arguments of the function to positional arguments.\nThe optional argument limits the number of arguments to wrap as positional\narguments (`-1` for all arguments).","summary":"<p>Wraps all arguments of the function to positional arguments.</p>"},{"html_id":"anyolite/Anyolite/WrapWithoutKeywordsClassMethod","path":"Anyolite/WrapWithoutKeywordsClassMethod.html","kind":"annotation","full_name":"Anyolite::WrapWithoutKeywordsClassMethod","name":"WrapWithoutKeywordsClassMethod","abstract":false,"locations":[{"filename":"src/Main.cr","line_number":883,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L883"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Wraps all arguments of the class method given as the first argument\nto positional arguments.\nThe optional seconds argument limits the number of arguments to wrap as positional\narguments (`-1` for all arguments).","summary":"<p>Wraps all arguments of the class method given as the first argument to positional arguments.</p>"},{"html_id":"anyolite/Anyolite/WrapWithoutKeywordsInstanceMethod","path":"Anyolite/WrapWithoutKeywordsInstanceMethod.html","kind":"annotation","full_name":"Anyolite::WrapWithoutKeywordsInstanceMethod","name":"WrapWithoutKeywordsInstanceMethod","abstract":false,"locations":[{"filename":"src/Main.cr","line_number":877,"url":"https://github.com/Anyolite/anyolite/blob/v1.0.0/src/Main.cr#L877"}],"repository_name":"anyolite","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"anyolite/Anyolite","kind":"module","full_name":"Anyolite","name":"Anyolite"},"doc":"Wraps all arguments of the instance method given as the first argument\nto positional arguments.\nThe optional seconds argument limits the number of arguments to wrap as positional\narguments (`-1` for all arguments).","summary":"<p>Wraps all arguments of the instance method given as the first argument to positional arguments.</p>"}]}]}})